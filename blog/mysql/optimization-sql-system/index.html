
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>无心技术簿  | SQL优化【服务器优化】</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">

    
    <meta name="sogou_site_verification" content="OYyzP0Cdur"/>
    
    <meta name="baidu_union_verify" content="809cdfb6c64fa651335f2075e055a2e6">
    
    <meta name="baidu-site-verification" content="Vm6jkM9VW0" />
    
    <meta name="google-site-verification" content="USqpH0v0l7K80xnRcaNKjnDMeNAWKjKwPYSHK1wk0oY" />
    
    
      
    <link href='/dist/css/app.8e831b6359bad500b66d8214096381de.css' rel='stylesheet' type="text/css" data-turbolinks-track="reload" />
      
    <link href='/dist/css/search.css' rel='stylesheet' type="text/css" data-turbolinks-track="reload" />
      
    

    
      
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />


    

    

    

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-8547276212175642",
            enable_page_level_ads: true
        });
    </script>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  


  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
        <div class="flex-l justify-between items-center center" >
          <a href="https://www.wuxinvip.com/" style="font-family:kaiti"class="f3 fw2 hover-white no-underline white-90 dib">
            无心技术簿
          </a>
          
          <div class="flex-3 items-end">
            
              <ul class="flex-l justify-between items-center center">
                <li class="list f5 f5-ns fw4 dib pr3">
                <a class="hover-white no-underline white-90" href="/blog/" title="咖啡系列">
                  咖啡系列
                </a>
                </li>
                <li class="list f5 f5-ns fw4 dib pr3">
                  <a class="hover-white no-underline white-90" href="http://search.wuxinvip.com/" title="万站灯火家">
                    万站灯火家
                  </a>
                </li>
              </ul>
            
          </div>
        </div>
    
    <div class="webdesigntuts-workshop"><input id="aa-search-input"  type="search" placeholder="搜索..." name="search" autocomplete="off"></div>

<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/algoliasearch.min.js"></script>
<script src="https://res.cloudinary.com/jimmysong/raw/upload/rootsongjc-hugo/autocomplete.min.js"></script>
<script>
    var client = algoliasearch("SC89XM72DY", "576959787929fc9893d43b70124b49cd");
    var index = client.initIndex('wuxinvip');
    autocomplete('#aa-search-input',
        { hint: false}, {
            source: autocomplete.sources.hits(index, {hitsPerPage: 8}),
            displayKey: 'name',
            templates: {
                suggestion: function(suggestion) {
                    console.log(suggestion);
                    return '<span  class="webdesigntuts-span">' +
                        '<a class="webdesigntuts-a" href="/' + suggestion.uri + '">' +
                        suggestion.title + '</a></span><br/>';
                }
            }
        });
</script>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <article class="flex-l flex-wrap justify-between mw10 center">

    <header class="mt4 w-100">
      <p class="f6 b helvetica tracked">
          
        咖啡系列
      </p>
      <h1 class="f1 athelas mb1">SQL优化【服务器优化】</h1>
      
      <time class="f6 mv4 dib tracked" datetime="2018-03-24T00:00:00Z">March 24, 2018</time>
    </header>

    <main class="nested-copy-line-height lh-copy serif f5 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><img src="https://upload-images.jianshu.io/upload_images/6434888-6042e18b04a9453d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" /></p>

<p>本节讨论数据库服务器的优化技术，主要处理系统配置而不是调整SQL语句。
本节中的信息适用于想要确保他们管理的服务器的性能和可扩展性的DBA; 对于构建包括设置数据库的安装脚本的开发人员; 以及那些希望最大限度提高自身生产力的开发，测试等人员自己运行MySQL。</p>

<ul>
<li>8.12.1系统因素</li>
</ul>

<pre><code>一些系统级因素可能会以主要方式影响性能：

如果有足够的RAM，则可以删除所有交换设备。
某些操作系统在某些情况下使用交换设备，即使您拥有可用内存。


避免对MyISAM表格进行外部锁定 。
默认值是禁用外部锁定。
在 --external-locking和 --skip-external-locking 选项明确地启用和禁用外部锁定。


只要您只运行一台服务器，禁用外部锁定不会影响MySQL的功能。
请记住在运行myisamchk之前取下服务器（或者锁定并冲洗相关的表格） 。
在某些系统中，强制禁用外部锁定是因为它无法工作。


唯一不能禁用外部锁定的情况是在 同一数据上运行多个MySQL 服务器（而不是客户端），或者如果您运行 myisamchk检查（而不是修复）表而不告知服务器先刷新和锁定表。
请注意 ，除了使用NDB群集时，通常不建议使用多个MySQL服务器同时访问相同的数据。


该LOCK TABLES和 UNLOCK TABLES语句使用内部锁定，所以你可以使用他们，即使外部锁定被禁用。
</code></pre>

<ul>
<li>8.12.2优化磁盘I / O</li>
</ul>

<pre><code>本节介绍如何在您将更多更快的存储硬件投入数据库服务器时配置存储设备。
有关优化 InnoDB配置以提高I / O性能的信息，请参见第8.5.8节“优化InnoDB磁盘I / O”。


磁盘寻求是一个巨大的性能瓶颈。
当数据量开始变得如此之大以至于不能有效缓存时，这个问题就会变得更加明显。
对于您可以随意访问数据的大型数据库，您可以确保至少需要一次磁盘查找以及一些磁盘写入操作。
为了尽量减少这个问题，请使用低寻道时间的磁盘。


通过将文件符号链接到不同的磁盘或剥离磁盘来增加可用磁盘主轴的数量（从而减少查找开销）：

使用符号链接

这意味着，对于MyISAM表，您可以将索引文件和数据文件从其在数据目录中的常用位置符号链接到另一个磁盘（也可以是条带化的）。
这使得查找和读取时间更好，假设磁盘也不用于其他目的。
参见 第8.12.3节“使用符号链接”。


符号链接不支持与InnoDB表一起使用 。
但是，可以将InnoDB数据和日志文件放置在不同的物理磁盘上。
有关更多信息，请参见第8.5.8节“优化InnoDB磁盘I / O”。


条带化

条带化意味着您有许多磁盘，并将第一个磁盘块，第二个磁盘上的第二个磁盘N块和（）磁盘上的第 - 个磁盘块，依此类推。
这意味着如果您的正常数据大小小于条带大小（或完全对齐），则可以获得更好的性能。
分条非常依赖操作系统和条带大小，因此可以用不同的条带大小对应用程序进行基准测试。
参见第8.13.2节“使用自己的基准”。
 N MOD number_of_disks

对于分拆的速度差是 非常依赖的参数。
根据您设置条带参数和磁盘数量的方式，您可能会得到数量级差异。
您必须选择针对随机或顺序访问进行优化。


为了保证可靠性，您可能需要使用RAID 0 + 1（分条加镜像），但在这种情况下，您需要2个 N驱动器来保存 N数据驱动器。
如果你有钱，这可能是最好的选择。
但是，您可能还需要投资一些卷管理软件来有效处理它。


一个好的选择是根据数据类型的重要性来改变RAID级别。
例如，存储可在RAID 0磁盘上重新生成的半重要数据，但存储真正重要的数据，例如主机信息和日志记录在RAID 0 + 1或RAID N磁盘上。
N由于更新奇偶校验位所需的时间，如果您有很多写操作，则RAID 可能会成为问题。


您还可以设置数据库使用的文件系统的参数：

如果您不需要知道上次访问文件的时间（这在数据库服务器上并不真正有用），则可以使用该-o noatime 选项安装文件系统。
这会跳过对文件系统inode中最后一次访问时间的更新，从而避免一些磁盘搜索。


在许多操作系统上，可以通过将该-o async选项挂载来将文件系统设置为异步更新。
如果您的计算机相当稳定，这应该可以提供更好的性能而不会牺牲太多的可靠性。
（这个标志在Linux上默认打开。
）

在MySQL中使用NFS
建议在考虑使用NFS与MySQL时谨慎。
潜在问题因操作系统和NFS版本而异，其中包括：

放置在NFS卷上的MySQL数据和日志文件被锁定并无法使用。
例如，如果多个MySQL实例访问相同的数据目录，或由于停电等原因导致MySQL不正确关闭，则可能会出现锁定问题。
NFS版本4通过引入基于咨询和基于租约的锁定来解决潜在的锁定问题。
但是，不建议在MySQL实例中共享数据目录。


由于收到的消息乱序或网络流量丢失而​​导致数据不一致。
要避免此问题，请使用TCP hard和 intr安装选项。


最大文件大小限制。
NFS版本2客户端只能访问文件的最低2GB（带符号32位偏移量）。
NFS版本3客户端支持较大的文件（最多64位偏移量）。
支持的最大文件大小还取决于NFS服务器的本地文件系统。


在专业SAN环境或其他存储系统中使用NFS往往比在这种环境之外使用NFS提供更高的可靠性。
但是，SAN环境中的NFS可能比直接连接或总线连接的非循环存储要慢。


如果您选择使用NFS，建议使用NFS版本4或更高版本，与在部署到生产环境之前彻底测试NFS设置一样。

</code></pre>

<ul>
<li>8.12.3使用符号链接</li>
<li>8.12.3.1在Unix上使用数据库的符号链接</li>
<li>8.12.3.2在Unix上使用MyISAM表的符号链接</li>
<li>8.12.3.3在Windows上使用数据库的符号链接</li>
</ul>

<pre><code>您可以将数据库或表从数据库目录移动到其他位置，并用符号链接替换它们到新的位置。
例如，您可能想要执行此操作，将数据库移动到具有更多可用空间的文件系统，或者通过将表分布到不同的磁盘来提高系统的速度。


对于InnoDB表，请使用语句中的DATA DIRECTORY子句CREATE TABLE而不是符号链接，如第14.7.5节“在数据目录之外创建文件 - 表 - 表空间”中所述。
这项新功能是支持的跨平台技术。


推荐的方法是将整个数据库目录符号链接到不同的磁盘。
符号链接 MyISAM表仅作为最后的手段。


要确定数据目录的位置，请使用以下语句：

SHOW VARIABLES LIKE'datadir';
</code></pre>

<ul>
<li>8.12.3.1在Unix上使用数据库的符号链接</li>
</ul>

<pre><code>在Unix上，符号链接数据库的方式首先是在有空闲空间的磁盘上创建一个目录，然后从MySQL数据目录创建一个到它的软链接。


shell&gt; mkdir /dr1/databases/test
shell&gt;ln -s /dr1/databases/test /path/to/datadir
MySQL不支持将一个目录链接到多个数据库。
只要不在数据库之间建立符号链接，用符号链接替换数据库目录就可以工作。
假设您db1在MySQL数据目录下有一个数据库 ，然后创建一个符号链接db2指向 db1：

shell&gt; 
shell&gt;cd /path/to/datadirln -s db1 db2
其结果是，对于任何表tbl_a中 db1，也似乎是一个表 tbl_a中db2。
如果一个客户端更新db1.tbl_a并且另一个客户端更新db2.tbl_a，则可能出现问题。

</code></pre>

<ul>
<li>8.12.3.2在Unix上使用MyISAM表的符号链接</li>
</ul>

<pre><code>符号链接仅完全支持 MyISAM表格。
对于其他存储引擎的表使用的文件，如果尝试使用符号链接，则可能会遇到奇怪的问题。
对于InnoDB表，请使用 第14.7.5节“在数据目录之外创建文件 - 表 - 表空间”中介绍的替代技术。


不要在没有完全可操作realpath()调用的系统上建立符号链接表。
（Linux和Solaris支持realpath()）。
要确定您的系统是否支持符号链接，请have_symlink使用以下语句检查系统变量的值：

SHOW VARIABLES LIKE'have_symlink';
处理MyISAM 表的符号链接的工作如下：

在数据目录中，您始终拥有表格format（.frm）文件，data（.MYD）文件和index（.MYI）文件。
数据文件和索引文件可以在别处移动并通过符号链接替换到数据目录中。
格式文件不能。


您可以将数据文件和索引文件独立链接到不同的目录。


要指示正在运行的MySQL服务器执行符号链接，请使用DATA DIRECTORY和 INDEX DIRECTORY选项 CREATE TABLE。
请参见 第13.1.18节“CREATE TABLE语法”。
或者，如果 mysqld未运行，则可以使用 命令行中的ln -s手动完成符号链接。


注意
用的一方或双方使用的路径DATA DIRECTORY和INDEX DIRECTORY选项可能不包括MySQL的 data目录。
（错误＃32167）

myisamchk不会替换数据文件或索引文件的符号链接。
它直接在符号链接指向的文件上工作。
任何临时文件都在数据文件或索引文件所在的目录中创建。
同样是真实的 ALTER TABLE， OPTIMIZE TABLE和 REPAIR TABLE语句。


注意
当您删除使用符号链接的表时，符号 链接和符号链接点将被删除的文件。
这是一个非常好的理由，不作为系统 运行 mysqldroot或允许系统用户拥有对MySQL数据库目录的写入权限。


如果使用ALTER TABLE ... RENAMEor 重命名表 RENAME TABLE并且不将该表移动到另一个数据库，那么数据库目录中的符号链接将重命名为新名称，并相应地重命名数据文件和索引文件。


如果您使用 ALTER TABLE ... RENAME或RENAME TABLE将表移动到另一个数据库，则该表将移动到其他数据库目录。
如果表名更改，新数据库目录中的符号链接将重命名为新名称，并相应地重命名数据文件和索引文件。


如果您不使用符号链接，请使用该 选项启动 mysqld， --skip-symbolic-links以确保没有人可以使用 mysqld删除或重命名数据目录之外的文件。


这些表符号链接操作不受支持：

ALTER TABLE忽略 DATA DIRECTORY和INDEX DIRECTORY表格选项。


如前所述，只有数据和索引文件可以是符号链接。
该.frm文件绝 不能是符号链接。
尝试执行此操作（例如，使一个表名称成为另一个表的同义词）会产生不正确的结果。
假设你db1在MySQL数据目录下有一个数据库，tbl1在这个数据库中有一个表，并且在db1你创建一个tbl2指向符号链接的目录中 tbl1：

shell&gt; 
shell&gt; 
shell&gt; 
shell&gt;cd /path/to/datadir/db1ln -s tbl1.frm tbl2.frmln -s tbl1.MYD tbl2.MYDln -s tbl1.MYI tbl2.MYI
问题的结果，如果一个线程读取 db1.tbl1，而另一个线程更新 db1.tbl2：

查询缓存是“ 被愚弄的 ”（它无法知道tbl1尚未更新，因此它会返回过期的结果）。


ALTER声明 tbl2失败。

</code></pre>

<ul>
<li>8.12.3.3在Windows上使用数据库的符号链接</li>
</ul>

<pre><code>在Windows上，符号链接可用于数据库目录。
这使您可以通过设置数据库目录的不同位置（例如，在不同的磁盘上）来设置数据库目录的符号链接。
在Windows上使用数据库符号链接与在Unix上使用数据库符号链接类似，尽管设置链接的过程有所不同。


假设你想要放置一个名为mydbat 的数据库的数据库目录D:\data\mydb。
为此，请在指向的MySQL数据目录中创建一个符号链接 D:\data\mydb。
但是，在创建符号链接之前，D:\data\mydb必要时通过创建它来确保该 目录存在。
如果您已mydb在数据目录中指定了一个数据库目录，请将其移至D:\data。
否则，符号链接将无效。
为避免出现问题，请确保在移动数据库目录时服务器未运行。


Windows Vista，Windows Server 2008或更新版本具有原生符号链接支持，因此您可以使用mklink命令创建符号链接 。
该命令需要管理权限。


将位置更改为数据目录：

C：\&gt; cd \path\to\datadir
在数据目录中，创建一个名为的mydb指向数据库目录位置的符号链接 ：

C：\&gt; mklink /d mydb D:\data\mydb
在此之后，数据库mydb中创建的所有表格 都将在中创建 D:\data\mydb。

</code></pre>

<ul>
<li>8.12.4优化内存使用</li>
<li>8.12.4.1 MySQL如何使用内存</li>
<li>8.12.4.2启用大页面支持</li>
<li>8.12.4.1 MySQL如何使用内存</li>
</ul>

<pre><code>MySQL分配缓冲区和缓存以提高数据库操作的性能。
默认配置旨在允许MySQL服务器在具有大约512MB内存的虚拟机上启动。
您可以通过增加某些缓存和缓冲区相关系统变量的值来提高MySQL的性能。
您还可以修改默认配置以在内存有限的系统上运行MySQL。


以下列表描述了MySQL使用内存的一些方式。
在适用的情况下，引用相关的系统变量。
有些项目是存储引擎或功能特定的。


所述InnoDB缓冲器池是保持缓存的存储区InnoDB表，索引，及其它辅助缓冲器中的数据。
为了提高高容量读取操作的效率，缓冲池分为 可能包含多行的页面。
为了高速缓存管理的效率，缓冲池被实现为页面的链接列表; 很少使用的数据使用LRU算法的变体超时缓存 。
有关更多信息，请参见第14.6.3.1节“InnoDB缓冲池”。


缓冲池的大小对系统性能很重要：

InnoDB在服务器启动时使用malloc()操作为整个缓冲池分配内存 。
所述 innodb_buffer_pool_size 系统变量定义缓冲池大小。
通常，推荐 innodb_buffer_pool_size 值是系统内存的50％到75％。
 innodb_buffer_pool_size 可以在服务器运行时动态配置。
有关更多信息，请参见 第14.6.3.2节“配置InnoDB缓冲池大小”。


在具有大量内存的系统上，可以通过将缓冲池分为多个缓冲池实例来提高并发性 。
所述 innodb_buffer_pool_instances 系统变量定义缓冲池实例的数量。


缓冲池太小可能会导致过度搅动，因为页面仅从缓冲池刷新到短时间内再次需要。


由于竞争内存，缓冲池太大可能会导致交换。


所有线程共享MyISAM 密钥缓冲区。
的 key_buffer_size系统变量决定其大小。


对于MyISAM服务器打开的每个表，索引文件都打开一次; 对于每个访问表的并发运行线程，数据文件都会打开一次。
对于每个并发线程，分配一个表结构，每列的列结构和一个大小的缓冲区 （其中是最大行长度，不包括 列）。
一 列需要五到八个字节加上数据的长度 。
该 存储引擎维护用于内部使用一个额外的行缓冲。
 3 * NNBLOBBLOBBLOBMyISAM

所述myisam_use_mmap 系统变量可以被设置为1，使能对所有内存映射MyISAM表。


如果内部内存临时表变得太大（使用tmp_table_size和 max_heap_table_size 系统变量确定 ），MySQL会自动将表从内存转换为磁盘格式。
磁盘上的临时表使用由internal_tmp_disk_storage_engine 系统变量定义的存储引擎 。
您可以按照第8.4.4节“MySQL中的内部临时表使用”中所述增加允许的临时表大小 。


对于使用MEMORY明确创建的表CREATE TABLE，只有 max_heap_table_size 系统变量决定允许表增长多少，并且没有转换为磁盘格式。


在MySQL性能模式是在低级别监控MySQL服务器执行的功能。
性能模式以增量方式动态分配内存，将其内存使用扩展到实际的服务器负载，而不是在服务器启动期间分配所需的内存。
一旦分配内存，在服务器重新启动之前它不会被释放。
有关更多信息，请参见 第25.16节“性能模式内存分配模型”。


服务器用于管理客户端连接的每个线程都需要一些线程特定的空间。
以下列表指示这些以及哪些系统变量控制其大小：

堆栈（thread_stack）

连接缓冲区（net_buffer_length）

结果缓冲区（net_buffer_length）

连接缓冲区和结果缓冲区每个都以大小等于net_buffer_length字节的大小开始 ，但max_allowed_packet根据需要动态放大到 字节。
net_buffer_length在每个SQL语句之后，结果缓冲区会缩小为 字节。
当语句正在运行时，还会分配当前语句字符串的副本。


每个连接线程都使用内存来计算语句摘要。
服务器分配 max_digest_length每个会话的字节数。
请参见 第25.9节“性能架构语句摘要”。


所有线程共享相同的基本内存。


当不再需要线程时，分配给它的内存将被释放并返回到系统，除非线程回到线程缓存中。
在这种情况下，内存保持分配。


每个执行表的顺序扫描的请求都会分配一个读取缓冲区。
的 read_buffer_size系统变量决定缓冲器大小。


在以任意顺序读取行时（例如，在排序后）， 可能会分配一个 随机读取缓冲区以避免磁盘搜索。
的 read_rnd_buffer_size 系统变量决定缓冲器大小。


所有连接都在一次执行中执行，大多数连接都可以在不使用临时表的情况下完成。
大多数临时表是基于内存的哈希表。
具有较大行长度（以所有列长度的总和计算）或包含BLOB列的临时表 存储在磁盘上。


大多数执行排序的请求会根据结果集大小分配排序缓冲区和零到两个临时文件。
请参见第B.5.3.5节“MySQL存储临时文件的位置”。


几乎所有的解析和计算都是在线程本地和可重用的内存池中完成的。
小项目不需要内存开销，从而避免了正常的慢速内存分配和释放。
内存仅分配给意外大的字符串。


对于每个包含BLOB 列的表，动态地放大缓冲区以读取更大的BLOB值。
如果您扫描一个表格，缓冲区会增大到 BLOB最大值。


MySQL需要表缓存的内存和描述符。
所有使用中表格的处理程序结构都保存在表格缓存中，并作为“ 先进先出 ”（FIFO）进行管理。
所述 table_open_cache系统变量定义初始表高速缓存大小; 请参见 第8.4.3.1节“MySQL如何打开和关闭表”。


MySQL还需要用于表定义缓存的内存。
所述 table_definition_cache 系统变量定义的表定义（距离的数量.frm可以存储在表中定义的高速缓存文件）。
如果您使用大量表格，则可以创建大型表格定义缓存以加快表格的打开速度。
与表缓存不同，表定义缓存占用更少的空间并且不使用文件描述符。


一个FLUSH TABLES语句或 中mysqladmin冲水表命令关闭不在使用一次的所有表，并标记所有在用的表被关闭当前正在执行的线程结束时。
这有效地释放了大部分使用中的内存。
FLUSH TABLES直到所有表都关闭后才会返回。


服务器在内存中缓存信息的结果 GRANT， CREATE USER， CREATE SERVER，和 INSTALL PLUGIN语句。
该内存不能由相应的释放 REVOKE， DROP USER， DROP SERVER，和 UNINSTALL PLUGIN 语句，所以执行导致缓存报表的多个实例的服务器上，将有内存使用的增加。
这个缓存的内存可以被释放FLUSH PRIVILEGES。


ps和其他系统状态程序可能会报告 mysqld使用大量内存。
这可能是由不同内存地址上的线程堆栈引起的。
例如，Solaris的 ps版本将 堆栈之间未使用的内存计为已用内存。
要验证这一点，请检查可用的交换 swap -s。
我们 用几个内存泄漏检测器（商业和开源）测试 mysqld，所以应该没有内存泄漏。


监视MySQL内存使用情况
以下示例演示如何使用 Performance Schema 和sys模式来监视MySQL内存使用情况。


大多数性能架构内存工具默认情况下处于禁用状态。
可以通过更新ENABLED性能模式setup_instruments表的列 来启用仪器 。
记忆仪器的名称形式为 ，其中是诸如或的值，并且 是仪器的详细信息。
 memory/code_area/instrument_namecode_areasqlinnodbinstrument_name

要查看可用的MySQL内存工具，请查询性能架构 setup_instruments表。
以下查询返回所有代码区域的数百个内存工具。


MySQL的&gt; SELECT * FROM performance_schema.setup_instruments
       WHERE NAME LIKE '%memory%';
您可以通过指定代码区域来缩小结果。
例如，您可以InnoDB通过指定innodb代码区域将结果限制在 内存仪器中。


MySQL的&gt; SELECT * FROM performance_schema.setup_instruments
       WHERE NAME LIKE '%memory/innodb%';
+ ------------------------------------------- + ----- ---- + ------- +
| NAME | ENABLED | TIMED |
+ ------------------------------------------- + ----- ---- + ------- +
| 内存/ innodb /自适应哈希索引| NO | NO |
| 内存/ innodb / buf_buf_pool | NO | NO |
| 内存/ innodb / dict_stats_bg_recalc_pool_t | NO | NO |
| 内存/ innodb / dict_stats_index_map_t | NO | NO |
| 内存/ innodb / dict_stats_n_diff_on_level | NO | NO |
| 内存/ innodb / other | NO | NO |
| 内存/ innodb / row_log_buf | NO | NO |
| 内存/ innodb / row_merge_sort | NO | NO |
| 内存/ innodb / std | NO | NO |
| 内存/ innodb / trx_sys_t :: rw_trx_ids | NO | NO |
...
根据您的MySQL安装代码区域可能包括performance_schema， sql，client， innodb，myisam， csv，memory， blackhole， archive， partition，和其他人。


要启用内存工具，performance-schema-instrument请在MySQL配置文件中添加一条 规则。
例如，要启用所有内存工具，请将此规则添加到您的配置文件并重新启动服务器：

性能架构仪器=“存储器/％=计数”
注意
在启动时启用内存工具可确保启动时发生的内存分配计数。


重新启动服务器后，ENABLEDPerformance Schema setup_instruments 表的 列应报告YES您启用的内存工具。
内存操作未定时TIMED，setup_instruments表中的 列 被忽略。


MySQL的&gt; SELECT * FROM performance_schema.setup_instruments
       WHERE NAME LIKE '%memory/innodb%';
+ ------------------------------------------- + ----- ---- + ------- +
| NAME | ENABLED | TIMED |
+ ------------------------------------------- + ----- ---- + ------- +
| 内存/ innodb /自适应哈希索引| NO | NO |
| 内存/ innodb / buf_buf_pool | NO | NO |
| 内存/ innodb / dict_stats_bg_recalc_pool_t | NO | NO |
| 内存/ innodb / dict_stats_index_map_t | NO | NO |
| 内存/ innodb / dict_stats_n_diff_on_level | NO | NO |
| 内存/ innodb / other | NO | NO |
| 内存/ innodb / row_log_buf | NO | NO |
| 内存/ innodb / row_merge_sort | NO | NO |
| 内存/ innodb / std | NO | NO |
| 内存/ innodb / trx_sys_t :: rw_trx_ids | NO | NO |
...
查询记忆仪器数据。
在本例中，内存仪器数据在Performance Schema memory_summary_global_by_event_name 表格中查询，该 表格通过对数据进行汇总 EVENT_NAME。
这 EVENT_NAME是乐器的名称。


以下查询返回InnoDB缓冲池的内存数据 。
有关列说明，请参见 第25.11.15.9节“内存汇总表”。


MySQL的&gt; SELECT * FROM performance_schema.memory_summary_global_by_event_name
       WHERE EVENT_NAME LIKE 'memory/innodb/buf_buf_pool'\G
                  EVENT_NAME：内存/ innodb / buf_buf_pool
                 COUNT_ALLOC：1
                  COUNT_FREE：0
   SUM_NUMBER_OF_BYTES_ALLOC：137428992
    SUM_NUMBER_OF_BYTES_FREE：0
              LOW_COUNT_USED：0
          CURRENT_COUNT_USED：1
             HIGH_COUNT_USED：1
    LOW_NUMBER_OF_BYTES_USED：0
CURRENT_NUMBER_OF_BYTES_USED：137428992
   HIGH_NUMBER_OF_BYTES_USED：137428992
可以使用sys架构memory_global_by_current_bytes 表来查询相同的底层数据，该 架构 表显示全局服务器当前的内存使用情况，按分配类型细分。


MySQL的&gt; SELECT * FROM sys.memory_global_by_current_bytes
       WHERE event_name LIKE 'memory/innodb/buf_buf_pool'\G
*************************** 1. row ******************** *******
       event_name：内存/ innodb / buf_buf_pool
    current_count：1
    current_alloc：131.06 MiB
current_avg_alloc：131.06 MiB
       high_count：1
       high_alloc：131.06 MiB
   high_avg_alloc：131.06 MiB
该sys模式查询current_alloc通过代码区域聚合当前分配的内存（）：

MySQL的&gt; SELECT SUBSTRING_INDEX(event_name,'/',2) AS
       code_area, sys.format_bytes(SUM(current_alloc))
       AS current_alloc
       FROM sys.x$memory_global_by_current_bytes
       GROUP BY SUBSTRING_INDEX(event_name,'/',2)
       ORDER BY SUM(current_alloc) DESC;
+ --------------------------- + -------- +
| code_area | current_alloc |
+ --------------------------- + -------- +
| 内存/ innodb | 843.24 MiB |
| 内存/ performance_schema | 81.29 MiB |
| 内存/ mysys | 8.20 MiB |
| memory / sql | 2.47 MiB |
| 内存/内存| 174.01 KiB |
| 内存/ myisam | 46.53 KiB |
| 内存/黑洞| 512字节|
| 内存/联合| 512字节|
| 内存/ csv | 512字节|
| 记忆/ vio | 496字节|
+ --------------------------- + -------- +
有关sys模式的更多信息 ，请参阅 第26章MySQL sys模式。

</code></pre>

<ul>
<li>8.12.4.2启用大页面支持</li>
</ul>

<pre><code>某些硬件/操作系统体系结构支持的内存页面大于默认值（通常为4KB）。
这种支持的实际实施取决于底层硬件和操作系统。
执行大量内存访问的应用程序可能通过使用大页面来获得性能改进，这是因为减少了翻译旁视缓冲区（TLB）缺失。


在MySQL中，InnoDB可以使用大页面为其缓冲池和额外的内存池分配内存。


标准使用MySQL中的大页面将尝试使用支持的最大大小，最大为4MB。
在Solaris下， “ 超大页面 ”功能可以使用最多256MB的页面。
此功能适用于最新的SPARC平台。
可以使用--super-large-pages或 --skip-super-large-pages 选项启用或禁用它 。


MySQL还支持大型页面支持的Linux实现（在Linux中称为HugeTLB）。


在Linux上可以使用大页面之前，必须启用内核来支持它们，并且需要配置HugeTLB内存池。
作为参考，HugeTBL API记录在 Documentation/vm/hugetlbpage.txt您的Linux源文件中。


最近的一些系统（如红帽企业Linux）的内核似乎默认启用了大页面功能。
要检查内核是否为真，请使用以下命令并查找包含“ 巨大 ”的输出行 ：

外壳&gt; cat /proc/meminfo | grep -i huge
HugePages_Total：0
HugePages_Free：0
HugePages_Rsvd：0
HugePages_Surp：0
Hugepagesize：4096 kB
非空命令输出表示存在大页面支持，但零值表示没有配置页面供使用。


如果您的内核需要重新配置以支持大页面，请查阅该hugetlbpage.txt文件以获取说明。


假设您的Linux内核已启用大页面支持，请使用以下命令将其配置为供MySQL使用。
通常，将这些rc文件放入系统启动序列中执行的 文件或等效启动文件中，以便每次系统启动时执行这些命令。
在MySQL服务器启动之前，命令应该在引导序列中尽早执行。
请务必根据您的系统更改分配编号和组编号。


＃设置要使用的页数。

＃每页通常为2MB，因此值为20 = 40MB。

＃这个命令实际上是分配内存，所以这么多
＃内存必须可用。

echo 20&gt; / proc / sys / vm / nr_hugepages

＃设置允许访问的组号
＃内存（在这种情况下为102）。
mysql用户必须是
＃此组的成员。

echo 102&gt; / proc / sys / vm / hugetlb_shm_group

＃增加每段允许的shmem数量
＃（在这种情况下为12G）。

echo 1560281088&gt; / proc / sys / kernel / shmmax

＃增加共享内存总量。
价值
＃是页数。
4KB /页，4194304 = 16GB。

echo 4194304&gt; / proc / sys / kernel / shmall
对于MySQL的使用情况，您通常希望值 shmmax接近的值 shmall。


要验证大页面配置，请/proc/meminfo按前面所述重新检查 。
现在你应该看到一些非零值：

外壳&gt; cat /proc/meminfo | grep -i huge
HugePages_Total：20
HugePages_Free：20
HugePages_Rsvd：0
HugePages_Surp：0
Hugepagesize：4096 kB
利用这个最后一步 hugetlb_shm_group就是为 mysql用户提供一个“ 无限 ”的 值，用于memlock限制。
这可以通过编辑/etc/security/limits.conf或将以下命令添加到 mysqld_safe脚本来完成：

ulimit -l无限制
将ulimit命令添加到 mysqld_safe会导致 root用户unlimited在切换到mysql用户之前 设置memlock限制 。
（这个假定 mysqld_safe由启动 root。
）

MySQL中的大页面支持默认是禁用的。
要启用它，请使用该--large-pages选项启动服务器 。
例如，您可以在服务器my.cnf文件中使用以下行 ：

的[mysqld]
大型网页
使用此选项时，会InnoDB自动为其缓冲池和附加内存池使用大页面。
如果InnoDB不能这样做，则会回退到使用传统内存并向错误日志中写入警告：警告：使用常规内存池

要验证是否正在使用大页面，请/proc/meminfo再次检查 ：

外壳&gt; cat /proc/meminfo | grep -i huge
HugePages_Total：20
HugePages_Free：20
HugePages_Rsvd：2
HugePages_Surp：0
Hugepagesize：4096 kB
</code></pre>

<ul>
<li>8.12.5优化网络使用</li>
<li>8.12.5.1 MySQL如何使用线程进行客户端连接</li>
<li>8.12.5.2 DNS查找优化和主机缓存</li>
<li>8.12.5.1 MySQL如何使用线程进行客户端连接</li>
</ul>

<pre><code>连接管理器线程处理服务器侦听的网络接口上的客户端连接请求。
在所有平台上，一个管理器线程处理TCP / IP连接请求。
在Unix上，这个管理器线程还处理Unix套接字文件连接请求。
在Windows上，管理器线程处理共享内存连接请求，另一个处理命名管道连接请求。
服务器不会创建线程来处理它不会听的接口。
例如，不支持命名管道连接的Windows服务器不会创建线程来处理它们。


连接管理器线程将每个客户端连接与专用于它的线程关联，以处理该连接的身份验证和请求处理。
管理器线程在必要时创建一个新线程，但尝试通过首先查询线程缓存来查看它是否包含可用于连接的线程来避免这样做。
当连接结束时，如果缓存未满，则其线程返回到线程缓存。


在这种连接线​​程模型中，线程数量与客户端当前连接的线程数量一样多，当服务器工作负载必须扩展以处理大量连接时，这有一些缺点。
例如，线程创建和处理变得昂贵。
另外，每个线程都需要服务器和内核资源，例如堆栈空间。
为了容纳大量的同时连接，每个线程的堆栈大小必须保持很小，导致它或者太小或者服务器消耗大量内存。
其他资源也可能耗尽，调度开销可能会变得很大。


要控制和监视服务器如何管理处理客户端连接的线程，几个系统和状态变量是相关的。
（请参见第5.1.7节“服务器系统变量”和第5.1.9节“服务器状态变量”。）

线程缓存的大小由thread_cache_size系统变量决定 。
默认值为0（不缓存），这会导致为每个新连接设置线程并在连接终止时处理该线程。
设置 thread_cache_size为 N启用 N缓存非活动连接线程。
thread_cache_size可以在服务器启动时设置，也可以在服务器运行时更​​改。
连接线程在与其关联的客户端连接终止时变为非活动状态。


为了监测缓存的线程和多少个线程已创建的数量，因为一个线程无法从缓存中取，监视 Threads_cached和 Threads_created状态变量。


您可以max_connections 在服务器启动时或运行时设置，以控制可同时连接的最大客户端数量。


当线程堆栈太小时，这会限制服务器可以处理的SQL语句的复杂性，存储过程的递归深度以及其他耗费内存的操作。
要N为每个线程设置字节的堆栈大小，请使用 以下命令启动服务器 。
 --thread_stack=N
</code></pre>

<ul>
<li>8.12.5.2 DNS查找优化和主机缓存</li>
</ul>

<pre><code>MySQL服务器在内存中维护一个包含客户端信息的主机缓存：IP地址，主机名和错误信息。
在host_cache 性能架构表暴露主机缓存，以便它可以使用被检查的内容 SELECT陈述。
这可以帮助您诊断连接问题的原因。
请参见 第25.11.16.1节“host_cache表”。


服务器使用主机缓存有以下几个目的：

通过缓存IP到主机名称查找的结果，服务器可避免为每个客户端连接执行DNS查找。
相反，对于给定的主机，它只需要对来自该主机的第一个连接执行查找。


缓存包含有关在连接过程中发生的错误的信息。
有些错误被认为是 “ 阻塞”。
“如果没有成功连接的情况下，从给定主机连续发生太多这样的事件，服务器将阻止来自该主机的进一步连接。
的 max_connect_errors系统变量决定阻挡发生之前允许的错误的数目。
参见第B.5.2.5节“主机'host_name'被阻止”。


服务器为非本地TCP连接使用主机缓存。
它不使用高速缓存来建立使用回送接口地址（例如127.0.0.1或::1）建立的TCP连接 ，或者使用Unix套接字文件，命名管道或共享内存建立的连接。


对于每个新的客户端连接，服务器都使用客户端IP地址来检查客户端主机名是否在主机缓存中。
如果没有，则服务器尝试解析主机名。
首先，它将IP地址解析为主机名，并将该主机名解析为IP地址。
然后将结果与原始IP地址进行比较，以确保它们相同。
服务器将有关此操作结果的信息存储在主机缓存中。
如果缓存已满，则丢弃最近最少使用的条目。


服务器像这样处理主机高速缓存中的条目：

当第一个TCP客户端连接从给定IP地址到达服务器时，将创建一个新的缓存条目来记录客户端IP，主机名和客户端查找验证标志。
最初，主机名被设置为 NULL并且标志为假。
此条目也用于来自同一始发IP的后续客户端连接。


如果客户端IP条目的验证标志为false，则服务器将尝试IP到主机名称的DNS解析。
如果成功，则使用解析的主机名更新主机名，并将验证标志设置为true。
如果解决不成功，则采取的行动取决于错误是永久性的还是暂时性的。
对于永久性故障，主机名保持不变NULL ，验证标志设置为true。
对于瞬态故障，主机名和验证标志保持不变。
（在这种情况下，下一次客户端从此IP连接时会发生另一次DNS解析尝试。
）

如果在处理来自给定IP地址的传入客户端连接时发生错误，则服务器将更新该IP项的相应错误计数器。
有关所记录错误的说明，请参见 第25.11.16.1节“host_cache表”。


服务器使用线程安全来执行主机名称解析， gethostbyaddr_r()并 gethostbyname_r()在操作系统支持它们时调用。
否则，执行查找的线程会锁定互斥锁并调用 gethostbyaddr()， gethostbyname()而不是。
在这种情况下，除非持有互斥锁的线程释放它，否则其他线程无法解析主机缓存中找不到的主机名。


要取消阻止阻止的主机，请通过发出FLUSH HOSTS语句或执行mysqladmin flush-hosts命令来刷新主机缓存 。


即使没有FLUSH HOSTS来自阻止主机的最后一次连接尝试后发生的来自其他主机的活动，阻止的主机也可能变为畅通无阻。
发生这种情况的原因可能是服务器放弃了最近最少使用的高速缓存条目，以便在连接从不在高速缓存中的客户端IP到达时缓存已满时为新条目腾出空间。
如果放弃的条目用于阻止的主机，则该主机将变为未阻止状态。


主机缓存默认启用。
要禁用它，请host_cache_size在服务器启动时或运行时将系统变量设置 为0。


要禁用DNS主机名查找，请使用该--skip-name-resolve选项启动服务器 。
在这种情况下，服务器仅使用IP地址，而不使用主机名将连接主机与MySQL授权表中的行匹配。
只能使用那些使用IP地址的表中指定的帐户。
（如果不存在指定客户端IP地址的帐户，则客户端可能无法连接。
）

如果您的DNS和主机速度非常慢，则可以通过禁用DNS查找来提高性能，--skip-name-resolve或者通过增大host_cache_size用于使主机缓存更大的值 来提高性能 。


要完全禁止TCP / IP连接，请使用该--skip-networking选项启动服务器。


某些连接错误与TCP连接无关，在连接过程中很早（甚至在知道IP地址之前），或者不特定于任何特定IP地址（如内存不足条件）。
有关这些错误的信息，请检查 状态变量（请参见 第5.1.9节“服务器状态变量”）。
 Connection_errors_xxx
 
</code></pre>
<ul class="pa0">
  
   <li class="list" style="float: left;">
     
     <a href="/tags/sql%E4%BC%98%E5%8C%96" style="color:#FFFFFF " class="link db f6 pa2 br3 bg-mid-gray white dim w4 tc">SQL优化</a>
   </li>
    <li class="list" style="float: left;">
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </li>
  
</ul>
<div class="mt6"></div>


<div id="SOHUCS" sid="/blog/mysql/optimization-sql-system/" ></div>
<script type="text/javascript">
    (function(){
        var appid = 'cytHkUEmA';
        var conf = 'prod_6e7b7d38e80b8603d4192a4d85f24774';
        var width = window.innerWidth || document.documentElement.clientWidth;
        if (width < 960) {
            window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>


    </main>

    <aside class="w-30-l mt6-l">





  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">相关文章</p>
    <ul class="pa0 list">
	   
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-myisam/">SQL优化【MyISAM-表优化】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-innodb/">SQL优化【InnoDB-表优化】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-data-structure/">SQL优化【数据结构】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-selector-1/">SQL优化【查询器优化·一】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-lock/">SQL优化【锁优化】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-performance-measurement/">SQL优化【绩效衡量】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-sentence/">SQL优化【SQL语句】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-total-2/">常见MYSQL调优策略</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-cached/">SQL优化【缓存优化】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-indexes/">SQL优化【SQL索引】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-selector-2/">SQL优化【查询器优化·二】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-thread/">SQL优化【线程信息检查】</a>
        </li>
	    
	     <li  class="mb2">
          <a href="/blog/mysql/optimization-sql-total/">SQL优化【总方向】</a>
        </li>
	    
    </ul>
</div>


<iframe frameborder="no" border="0" marginwidth="0" marginheight="0"  width=300 height=400
        src="//music.163.com/outchain/player?type=0&id=2269118953&auto=0&height=430"></iframe>



</aside>

  </article>

    </main>
    
<footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://www.wuxinvip.com/" >
    &copy; 2018 京ICP备18026588号
    
  </a>
  



  <a href="https://twitter.com/huoyan403" class="link-transition twitter link dib z-999 pt3 pt0-l mr2" title="Twitter link">
    <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

  </a>




  <a href="http://www.linkedin.com/in/%e9%95%bf-%e8%bf%9e-05215b142/" class="link-transition linkedin link dib z-999 pt3 pt0-l mr2" title="LinkedIn link">
    <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

  </a>


  <a href="https://github.com/wuxinvip" class="link-transition github link dib z-999 pt3 pt0-l mr2" title="Github link">
    <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

  </a>


  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="/friends-chain/" >
    友情链接
  </a>
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="/contact/" >
   联系站长
  </a>

  </div>


</footer>

    



<div style="display:none">
  <script src="https://s22.cnzz.com/z_stat.php?id=1273992689&web_id=1273992689" language="JavaScript"></script>
</div>
  </body>
