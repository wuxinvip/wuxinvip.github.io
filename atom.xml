<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>无心の技术簿</title>
  
  <subtitle>时光荏苒、不浮青春.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.wuxinvip.com/"/>
  <updated>2018-10-22T16:43:50.266Z</updated>
  <id>https://www.wuxinvip.com/</id>
  
  <author>
    <name>无心</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>本博客成长笔记</title>
    <link href="https://www.wuxinvip.com/2018/10/24/essay/essay-16/"/>
    <id>https://www.wuxinvip.com/2018/10/24/essay/essay-16/</id>
    <published>2018-10-24T00:00:00.000Z</published>
    <updated>2018-10-22T16:43:50.266Z</updated>
    
    <content type="html"><![CDATA[<h2 id="回忆、"><a href="#回忆、" class="headerlink" title="回忆、"></a>回忆、</h2><p>本博客起初只是一份html笔记、慢慢的竟然成了一个网站、也是各种原有促使了这一切的发生、获取就是冥冥中自有天注定吧</p><p>一开始作为html笔记只在学习的时候作为笔录使用、后来工作忙了起来也就不在维护、麻烦、还没有随时可复习的特性、</p><p>后来、机缘巧合、在阿里买了台ECS、又机缘巧合买了个域名、然后….</p><p>一时兴起便把笔录做成了网站、选择了hugo作为编辑器</p><p>再后来hugo没有比较好的插件支持、于是换了hexo、彷佛鸟枪换大炮的感觉~~</p><h2 id="得到了啥"><a href="#得到了啥" class="headerlink" title="得到了啥"></a>得到了啥</h2><ul><li><p>在期初作为笔录的时候让我骄傲了许多、恬不知耻的见人就送、哈哈、带给了我些许乐趣</p></li><li><p>后来机缘巧合有了ecs和域名、才有了做一个网站的念头、也是源于leader对于知识体系的一个模糊认识、<br>借助该网站编辑的过程中、分类、画出自己的知识图谱</p></li><li><p>建好了自己的知识体系、就更明白自己向往技术的哪个方向发展了、而不是拘泥于、今天java、后天nginx、大后天es、大大后天又java<br>陷入知识死循环、反而得不到更为迅速的成长、<br>避免了陷入知识世界、这山望着那山高、看着这一块、又想那一块、造成的只是混乱</p></li><li><p>再后来随着分类的细节化、就想在知识分类做更为详细的学习、就想到做知识专题<br>知识的积累、日积跬步、水滴石穿</p></li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>虽然一个网站并不是必须的、但是我还是建议【有缘到此的朋友】有时间做一个、<br>一方面构建自己的知识体系、一方面分享的乐趣会是学习的一大助力</p><p>  分享过程中、你才会学得更多、知识体系的梳理、才会让你大脑里的知识不乱糟糟的像一团乱麻</p><a id="more"></a><ul><li>v1.0        </li></ul><p><img src="/img/adsense/v1.0.png" alt="如图"></p><ul><li>v2.0</li></ul><p><img src="/img/adsense/v2.0-1.png" alt="如图"><br><img src="/img/adsense/v2.0-2.png" alt="如图"><br><img src="/img/adsense/v2.0-3.png" alt="如图"></p><ul><li>v3.0</li></ul><p><img src="/img/adsense/v3.0.png" alt="如图"></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;回忆、&quot;&gt;&lt;a href=&quot;#回忆、&quot; class=&quot;headerlink&quot; title=&quot;回忆、&quot;&gt;&lt;/a&gt;回忆、&lt;/h2&gt;&lt;p&gt;本博客起初只是一份html笔记、慢慢的竟然成了一个网站、也是各种原有促使了这一切的发生、获取就是冥冥中自有天注定吧&lt;/p&gt;
&lt;p&gt;一开始作为html笔记只在学习的时候作为笔录使用、后来工作忙了起来也就不在维护、麻烦、还没有随时可复习的特性、&lt;/p&gt;
&lt;p&gt;后来、机缘巧合、在阿里买了台ECS、又机缘巧合买了个域名、然后….&lt;/p&gt;
&lt;p&gt;一时兴起便把笔录做成了网站、选择了hugo作为编辑器&lt;/p&gt;
&lt;p&gt;再后来hugo没有比较好的插件支持、于是换了hexo、彷佛鸟枪换大炮的感觉~~&lt;/p&gt;
&lt;h2 id=&quot;得到了啥&quot;&gt;&lt;a href=&quot;#得到了啥&quot; class=&quot;headerlink&quot; title=&quot;得到了啥&quot;&gt;&lt;/a&gt;得到了啥&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在期初作为笔录的时候让我骄傲了许多、恬不知耻的见人就送、哈哈、带给了我些许乐趣&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;后来机缘巧合有了ecs和域名、才有了做一个网站的念头、也是源于leader对于知识体系的一个模糊认识、&lt;br&gt;借助该网站编辑的过程中、分类、画出自己的知识图谱&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;建好了自己的知识体系、就更明白自己向往技术的哪个方向发展了、而不是拘泥于、今天java、后天nginx、大后天es、大大后天又java&lt;br&gt;陷入知识死循环、反而得不到更为迅速的成长、&lt;br&gt;避免了陷入知识世界、这山望着那山高、看着这一块、又想那一块、造成的只是混乱&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;再后来随着分类的细节化、就想在知识分类做更为详细的学习、就想到做知识专题&lt;br&gt;知识的积累、日积跬步、水滴石穿&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;a href=&quot;#总结&quot; class=&quot;headerlink&quot; title=&quot;总结&quot;&gt;&lt;/a&gt;总结&lt;/h2&gt;&lt;p&gt;虽然一个网站并不是必须的、但是我还是建议【有缘到此的朋友】有时间做一个、&lt;br&gt;一方面构建自己的知识体系、一方面分享的乐趣会是学习的一大助力&lt;/p&gt;
&lt;p&gt;  分享过程中、你才会学得更多、知识体系的梳理、才会让你大脑里的知识不乱糟糟的像一团乱麻&lt;/p&gt;
    
    </summary>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>微博社交广告系统架构实践</title>
    <link href="https://www.wuxinvip.com/2018/10/04/service-design/design-6/"/>
    <id>https://www.wuxinvip.com/2018/10/04/service-design/design-6/</id>
    <published>2018-10-04T00:00:00.000Z</published>
    <updated>2018-10-20T15:09:30.495Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://wemedia.ifeng.com/60159435/wemedia.shtml" target="_blank" rel="noopener">原链接地址</a><br>整理了一下演讲内容、记录一下、也分享一下</p><p>技术内容并不多、主要学习微博对于自己产品形式利用推广广告的idea、<br>充分利用自己的优势进行深度挖掘广告投放点</p><h2 id="基本需求"><a href="#基本需求" class="headerlink" title="基本需求"></a>基本需求</h2><ul><li><p>在微博内投放广告进行收益分成</p></li><li><p>需求特点【利用自己的优势、做怎样的产品】</p><ul><li>粉丝头条 </li><li>无购买门槛</li><li>社交关系传播 </li></ul></li></ul><h2 id="微博特点【微博投放广告优势】"><a href="#微博特点【微博投放广告优势】" class="headerlink" title="微博特点【微博投放广告优势】"></a>微博特点【微博投放广告优势】</h2><ul><li>海量投放</li><li>定价保量【合约投放】</li><li>opcm、【pcm、一种广告计费模式、点击计费、曝光计费】<a id="more"></a><h2 id="模块设计"><a href="#模块设计" class="headerlink" title="模块设计"></a>模块设计</h2></li></ul><p><img src="/img/service-design/adsense-1.jpeg" alt="图片"></p><ul><li>投放系统–对外广告接入系统、进行广告流入、整理广告属性、用户属性</li><li>人群定向–广告匹配用户属性</li><li>在线分发–广告列表整理、根据用户属性进行用户画像、形成用户池、广告池</li><li>竞价–对整理后的广告列表进行评分排序</li><li>模型匹配–精准匹配用户投放</li><li>预算–对外提供购买服务、已投放次数整理、对投放次数进行控制</li></ul><h2 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h2><ul><li><p>人群定向 </p><ul><li>用户属性与广告定向条件匹配</li><li>维度 性别、年龄、地域、兴趣、设备、社交关系、考虑交叉</li><li>实时性</li><li>性能要求 10ms</li></ul></li><li><p>社交定向【依据产品形式深度挖掘】</p><ul><li>一度关系<ul><li>关注流消息过载</li><li>精准触达</li><li>粉丝传播效果</li></ul></li><li>二度关系<ul><li>通过粉丝关系进行人群扩展</li><li>基于社交关系的Look-alike</li><li>根据亲密度选取关键节点</li></ul></li><li>相似用户<ul><li>通过粉丝相似度挖掘相似用户</li><li>通过相似用户进行定向扩展</li></ul></li><li>行为定向<ul><li>利用互动性为扩展定向人群</li><li>行为实时反馈</li><li>行为类型、评论、赞、关注</li></ul></li><li>亲密度</li></ul></li></ul><h2 id="需要解决问题【依据广告需求考虑性能、需求】"><a href="#需要解决问题【依据广告需求考虑性能、需求】" class="headerlink" title="需要解决问题【依据广告需求考虑性能、需求】"></a>需要解决问题【依据广告需求考虑性能、需求】</h2><ul><li>降低使用门槛</li><li>冷启动如何投放</li><li>复购用户扩展目标人群</li></ul><h2 id="核心服务如何保证稳定性"><a href="#核心服务如何保证稳定性" class="headerlink" title="核心服务如何保证稳定性"></a>核心服务如何保证稳定性</h2><ul><li>控制中心的稳定性</li><li>耦合服务、负载分发、并行执行</li><li>服务快速迭代</li></ul><p><img src="/img/service-design/adsense-2.jpeg" alt="图片"></p><ul><li>以实时消息处理+es搜索技术完成消息注入</li><li>以openresty+nginx保证服务负载的可靠稳定性和快速迭代性</li><li>内部提供服务集群提供服务处理【这里基本都差不多、对要求高的服务提供并发服务】</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://wemedia.ifeng.com/60159435/wemedia.shtml&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;原链接地址&lt;/a&gt;&lt;br&gt;整理了一下演讲内容、记录一下、也分享一下&lt;/p&gt;
&lt;p&gt;技术内容并不多、主要学习微博对于自己产品形式利用推广广告的idea、&lt;br&gt;充分利用自己的优势进行深度挖掘广告投放点&lt;/p&gt;
&lt;h2 id=&quot;基本需求&quot;&gt;&lt;a href=&quot;#基本需求&quot; class=&quot;headerlink&quot; title=&quot;基本需求&quot;&gt;&lt;/a&gt;基本需求&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;在微博内投放广告进行收益分成&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;需求特点【利用自己的优势、做怎样的产品】&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;粉丝头条 &lt;/li&gt;
&lt;li&gt;无购买门槛&lt;/li&gt;
&lt;li&gt;社交关系传播 &lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;微博特点【微博投放广告优势】&quot;&gt;&lt;a href=&quot;#微博特点【微博投放广告优势】&quot; class=&quot;headerlink&quot; title=&quot;微博特点【微博投放广告优势】&quot;&gt;&lt;/a&gt;微博特点【微博投放广告优势】&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;海量投放&lt;/li&gt;
&lt;li&gt;定价保量【合约投放】&lt;/li&gt;
&lt;li&gt;opcm、【pcm、一种广告计费模式、点击计费、曝光计费】
    
    </summary>
    
      <category term="服务架构" scheme="https://www.wuxinvip.com/categories/%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/"/>
    
      <category term="广告架构" scheme="https://www.wuxinvip.com/categories/%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/%E5%B9%BF%E5%91%8A%E6%9E%B6%E6%9E%84/"/>
    
    
      <category term="服务架构" scheme="https://www.wuxinvip.com/tags/%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>每天一点人生感悟的句子</title>
    <link href="https://www.wuxinvip.com/2018/09/24/essay/essay-14/"/>
    <id>https://www.wuxinvip.com/2018/09/24/essay/essay-14/</id>
    <published>2018-09-24T00:00:00.000Z</published>
    <updated>2018-10-22T05:21:18.703Z</updated>
    
    <content type="html"><![CDATA[<h2 id="每天一点人生感悟的句子"><a href="#每天一点人生感悟的句子" class="headerlink" title="每天一点人生感悟的句子"></a>每天一点人生感悟的句子</h2><p>　　1、有些人生来是为了赶路的…完成学业事业结婚生子，一切有条不紊按部就班，匆匆忙忙在前三十年生命里就完成了大部分任务，再用剩下的时间去修补与忍耐，并学着苦中作乐。而有些人的人生任务可能只完成了一半，但他们却看了别人几辈子才能看到的风景，你不能说任何一种选择是错。真的，自己开心就好。</p><p>　　2、真正能治愈自己的，只有你自己。要想活得快乐，要学会清醒地做事，糊涂地去做人。</p><p>　　3、当你能看懂一件事情的时候，说明你长大了；当你能看清一件事情的时候，说明你开窍了；当你能看破一件事情的时候，说明你理性了；当你能看透一件事情的时候，说明你成熟了；当你能看淡一件事情的时候，说明你放下了。</p><p>　　4、一生要走多远的路程，经过多少年才能走到终点。梦想需要多少时间才能慢慢实现。只要肯期待希望就不会幻灭。</p><p>　　5、人生其实也就是选择，有所放弃才能在有限的生命里活得充实、饱满、旺盛。没有果敢的放弃，就没有辉煌的选择。放弃是一种灵性的觉醒，是一种慧根的显现，一如放鸟返林、放鱼入水。学会放弃，才会有所收获。当一切尘埃落定，当一切归于平静，我们才会真正懂得放弃其实也是另一种美丽的收获。</p><p>　　6、人生百年，没有太多的时间可以挥霍，都说幸福如饮水，冷暖自知，有些人，每天都在追逐幸福的路上，却从来也没有感觉到幸福的存在；有些人，懂得收集点滴的温暖和感动，便会与快乐同行。</p><p>　　7、你总会遇到一个人，吼着五音不全的嗓子唱歌给你听，陪你在大雨的夜里狂奔，在你黑白的人生中拿着颜料盘画来画去，听得懂你的胡言乱语，看得清你没有微笑的表情，穿越拥挤的人潮走向你，拥抱你。</p><p>　　8、人生难免要受些委屈和伤害，与其耿耿于怀郁郁寡欢，倒不如坦坦荡荡泰然处之。只有经受住狂风暴雨的洗礼，才能练就波澜不惊的淡定。</p><p>　　9、人生的每个抉择都像是一个赌局，输赢都是自己的。不同的是赌注的大小，选择了就没有反悔的机会。</p><p>　　10、人生在世最大的勇气不是不怕死亡，而是坚强的活着，勇敢的面对生活带给的压力和考验！</p><a id="more"></a><h2 id="佛说人生感悟的句子"><a href="#佛说人生感悟的句子" class="headerlink" title="佛说人生感悟的句子"></a>佛说人生感悟的句子</h2><p>　　1、 【佛说人生】</p><ul><li>①若是无法成就大事，就用伟大的方法，去做小事；</li><li>②心灵深处发出的善意，是一种有价值的资产，是一种无声而重要的力量；</li><li>③人如何看待自己的命运，比了解命运是什么来得重要；</li><li>④凡事以善意解释，心无旁骛的工作，自能不受末节枝叶的事所困扰；</li><li>⑤世上没有真正的黑暗，只有晦昧的眼睛。</li></ul><p>　　2、 【经典禅语】</p><ul><li>1、发现自己的错误，就是开悟；改正自己的错误，就是成就。发现了所有的错误，就是彻悟；改正了所有的错误，就是圆满。</li><li>2、多看自己的缺点，才能改正自己的错误；多看别人的优点，方能学到别人的功德。</li><li>3、世界上没有什么完美，想开了想通了，就是完美。</li></ul><p>　　3、 穷人问佛：我为何这样穷？佛说：你没有学会给予别人。穷人：我一无所有如何给予？佛：一个人一无所有也可以给予别人七种东西：颜施：微笑处事；言施：说赞美安慰的话；心施：敞开心扉对人和蔼；眼施：善义的眼光给予别人；身施：以行动帮助别人；座施：即谦让座位；房施：有容人之心。</p><p>　　4、 人生要做到这几点：人生总是有输有赢，得势顺境时，千万不要得意忘形，放纵自己；失势逆境时，千万不可消极颓唐，放弃自己；人生成功的定义，要自己去找，别迷失在别人的看法中。</p><p>　　5、 人生十四最：人生最大的敌人是自己，最大的失败是自大，最大的无知是欺骗，最大的悲哀是妒忌，最大的错误是自弃，最可佩服的是精进，最大的破产是绝望，最大的财富是健康，最大的债务是情债，最大的礼物是宽恕，最大的欠缺是顿悟，最大的欣慰是布施，最可怜的性情是自卑，最大的罪过是自欺欺人。</p><p>　　6、 这世上没有无缘无故的爱，也没有无缘无故的恨。不要参与评论任何人，做到心中有数就可以了。所谓盖棺定论的道理很简单，就是有人操之过急。谁也没有理论依据来介定好人与坏人，说白了就是利益关系的问题。邓小平三七开了毛泽东，说明伟人也不是完人。</p><p>　　7、 人生中，许多的成败与得失，并不是我们都能预料到的，很多的事情也并不是我们都能够承担得起的，但，只要我们努力去做，求得一份付出后的坦然，其实得到的也是一种快乐。</p><p>　　8、 人们都向往和寻找快乐，在某种意义上，人生就是一场彻底的清算，太多的事情我们无法预料，也来不及思考，随着尘缘卷入了一场又一场的眷恋，却无法想象接着会有怎样的离别。</p><p>　　9、 最使人颓废的往往不是前途的坎坷，而是你自信的丧失； 最使人痛苦的往往不是生活的不幸，而是你希望的破灭； 最使人绝望的往往不是挫折的打击，而是你心灵的死亡； 凡事看淡一些，心放开一点，一切都会慢慢变好。</p><p>　　10、 【经典哲理】1.事到万难须放胆，人处逆境须从容。2.走自己的路，听别人的劝。3.人生如戏，为他人演还是为自己。4.给人以“惊喜”，不如给人以“踏实”。5.大多数人想着改造这个世界，却罕见有人想改造自己。6.老了，才看清这个世界还很年轻。7.越成熟麦穗，越懂得弯腰。</p><p>　　11、 【奋斗中你必须学会的】1、学会放弃。放弃你不想做的事，放弃你不擅长的事，放弃你做不到的事。2、学会闷骚。有些事情，无需争辩，表面服从，偷偷反抗。3、学会示弱。在哪里跌倒，就在哪里趴着，哭了再起来。4、学会装傻。装傻是时尚，博取同情，坐他人的车，走自己的路。</p><p>　　12、 心胸决定了境界，心态决定了命运。你来自何处其实并不重要，重要的是你要去往何方，人生最重要的不是所站的位置，而是所去的方向。人只要不失去方向，就永远不会失去自己！</p><p>　　13、 珍惜现在所拥有的，是一种唯美的想法，世间有许多的东西，但真正属于自己的却并不多。看庭前花开花落，荣辱不惊，望天上云卷云舒，去留无意。在这个纷绕的世俗世界里，能够学会用一颗平常的心去对待周围的一切，也是一种境界。</p><p>　　14、 人生是祸福相依，笑泪交织，有同情心，才能利人；有体谅心，才能容人；有忍耐心，才能做人；有慈悲心，才能度人；有艰难心，才能助人；有明智心，才能观人；有包容心，才能处人；有美丽心，才能示人。</p><p>　　15、 人生在世，要与无数的“不可能”遭遇。若一味胆怯退缩，你就无法战胜“不可能”。永远不要让“我不行”消磨自己的斗志、不要让“不可能”束缚自己的手脚，有时只要再向前迈进一步，再坚持一下。不忠，感情的疑惑，善变，自相矛盾，内心所有的那些冲动不安，像世界一样古老。</p><p>　　16、 【让人反思的话】1.求而不得，舍而不能，得而不惜，这是人最大的悲哀。2.人犯错误，大半是该用真情时太过动脑筋，而在该用脑筋时又太感情用事。3.自由不是做你想做的，而是可以不做你不想做的。4.一句“拿着””胜过十句“我会给你的”。5.幸福是个比较级，要有东西垫底才感觉得到。”</p><p>　　17、 人生学会随缘，才能活得自在。随不是跟随，是顺其自然，不怨恨，不躁进，不过度，不强求；随不是随便，是把握机缘，不悲观，不刻板，不慌乱，不忘形；随是一种达观，是一种洒脱，是一份人生的成熟，一份人情的练达。</p><p>　　18、 事在人为，是一种积极的人生态度，随遇而安，是一种乐观的处世妙方，顺其自然，是一种豁达的生存之道，水到渠成，是一种高超的入世智慧。不保留的，才叫青春。不解释的，才叫从容。不放手的，才叫真爱。不完美的，才叫人生。</p><p>　　19、 真正的陪伴，经得起坎坷，经得起平淡。不要再给我一些突如其来的关心。不是每一次我都会觉得受宠若惊。我真的真的，消受不起了。我不会一直犯贱。好了伤，疤忘了疼的事，我不会一直做。</p><p>　　20、 人生就是这样，处同样的位置，有人哭，有人笑，有人沉默。有一种坚强是假装的，笑容背后是一颗酸楚的心；有一种转身是隐忍的，心碎了依然惦念那走远的背影；有一种执着是逞强的，没有人愿意输得太多；有一种付出是徒劳的，错误的路上走得再远也是错的；有些事不可避免地发生，只能坦然接受。</p><h2 id="伤感的人生感悟的句子"><a href="#伤感的人生感悟的句子" class="headerlink" title="伤感的人生感悟的句子"></a>伤感的人生感悟的句子</h2><p>　　1、或许离开，就再也不可能回来；或许回来，你已不再让我依赖；或许依赖，是对我自己最大的伤害；或许伤害，会最终让我释怀；或许释怀，就注定了我的离开…</p><p>　　2、不要说，离开以后还会想念；更不要说，分手以后还是朋友；离开一个地方，风景就不再属于你；错过一个人，他的幸福与你无关；人都是会变的，可以守住一个不变的承诺，却守不住一颗善变的心；不要因为寂寞而爱错人；更不要因为爱错人，而寂寞一生。</p><p>　　3、当我惊叹人生如梦的时候，才似如梦初醒。然而一切都已失去，无法再挽回，爱不再是爱，永恒也不是永恒，也许剩下的这一份回忆，这一份思念，才是真正的永恒。</p><p>　　4、没人会真正的感同身受到你的痛楚，也没人会真正的去在意你一路走来所遇过的坎与负过的伤，所以别再为了寻求安慰而四处同人诉说你的苦，因为旁人只看结果，也只关心结果。成长本就是一个孤立无援的过程，你必须得学会独当一面。</p><p>　　5、世间痛分两种，一种像是多年前张起灵离去，一别十年，相思入骨，期间凡提起那人均觉痛不自持，却强颜欢笑，如针刺在心头。另一种是空等数十载，某日重遇，那人容颜未改，身边却是另一人同生共死，眼里再无自己，只觉痛彻骨髓，却一句话都说不出来。</p><p>　　6、人生不止，寂寞不已。寂寞人生爱无休，寂寞是爱永远的主题.我和我的影子独处.它说它有悄悄话想跟我说，它说它很想念你，原来，我和我的影子，都在想你。</p><h2 id="以下是人生感悟的句子，人生感悟经典名言大全："><a href="#以下是人生感悟的句子，人生感悟经典名言大全：" class="headerlink" title="以下是人生感悟的句子，人生感悟经典名言大全："></a>以下是人生感悟的句子，人生感悟经典名言大全：</h2><p>　　人生像一本书，愚人哗啦哗啦地翻它，而贤者潜心细读。—G.保罗</p><p>　　人生应该如蜡烛一样,从顶燃到底,一直都是光明的。——萧楚女</p><p>　　人应尊敬他自己,并应自视能配得上最高尚的东西。——黑格尔</p><p>　　如果是玫瑰，它总会开花的。——歌德</p><p>　　生活、工作、学习倘使都能自动,则教育之收效定能事半功倍。 所以我们特别注意自动力之培养，使它关注于全部的生活工作学习 之中。自动是自觉的行动,而不是自发的行动。自觉的行动,需要适 当的培养而后可以实现。——陶行知</p><p>　　生活就是战斗。——柯罗连科</p><p>　　生活是最伟大的一部活语汇。——老舍</p><p>　　失败时,不垂头丧气;得意时,不快乐忘形;临阵时才能勇往直前。——《五卷书》</p><p>　　失去今天不是失去一时,而是失去明天的美好。——王英琦 使人失败的不是强大的对手,而是害怕挑战自卑。——叶荃麟</p><p>　　使人失去快乐的不是困难和挫折,而是自信和努力。——陆鑫娅</p><p>　　使人失去理智的不是迷幻药,而是金钱。一袁海荣</p><p>　　使一家温馨的不是金钱而是一家人之间的关爱之情。—叶莶麟</p><p>　　世界上的事物永远不是绝对的，结果完全因人而异,苦难对于天 才是一块垫脚石，对能干的人是一笔财富，对弱者是一个万丈深渊。——巴尔扎克</p><p>　　试玉要烧三日满,辨才须待七年期。一白居易</p><p>　　我们曾经在天真烂漫的童年嬉戏过,在意气风发的青年时代留 下心湖的涟漪,在激情似火的成年一晃而过后，我们在满头白发时会 回忆什么呢？让我们为生命画上一个完美的句号而努力吧！——叶荃麟</p><p>　　一个人只要行为高尚,不管怎样无知也会得到原谅的。——巴尔扎克</p><p>　　“难”也是如此,面对悬崖峭壁，一百年也看不出一条缝来，但用 斧凿，能进一寸进一寸，得进一尺进一尺,不断积累，飞跃必来，突破随之。——华罗庚</p><p>　　不付出艰辛的劳动，生活不会给人任何东西。——贺拉斯</p><p>　　不幸的遭遇可以增长人的见解，改善人的心地，锻炼人的体质， 使一个青年能够担当起生活的责任,同时能够知道怎样享受人生，这是在富裕的环境中所受的教育万万不能达到的。一斯沫莱特</p><p>　　成长总是那么神秘而惊人，都是由于不注意，我们才不感觉到惊讶。——纪德</p><p>　　但愿每次回忆,对生活都不感到负疚。一郭小川</p><p>　　当你的希望一个个落空，你也要坚定,要沉着！——胡费罗</p><p>　　当我们爱别人的时候，生活是美好、快乐的。——托尔斯泰</p><p>　　懂得生命真谙的人，可以使短促的生命延长。——西塞罗</p><p>　　对人要和气,但不要狎昵。一莎士比亚</p><p>　　对于那些贏得不朽名声的人来说，生命并没有消逝。——斯宾塞</p><p>　　对于你，生命的光正在开始，而我的太阳已经下山了，黄昏正包 围着我的头脑。一显克微支</p><p>　　对于我来说,生命的意义在于设身处地替人着想,忧他人之优， 乐他人之乐。——爱因斯坦</p><p>　　奋斗就是生活,人生只有前进。——巴金</p><p>　　风雅的人是真正的生活之王。——托尔斯泰</p><p>　　光景不待人,须臾发成丝。一李白</p><p>　　过去属于死神,未来属于你自己。一雪莱</p><p>　　幻想消灭是人一生注定的悲剧,青年的幻灭,更是悲剧中的悲 剧,夜一般的沉黑,死一般的凶恶。徐志摩</p><p>　　活在世上而又不能标志出自己的存在——这对我来说实在太可怕了。——果戈理</p><p>　　即使生活中最暗淡的时候,也一样找得到心灵的安慰……生活 不会没有补偿,希望和信念放开心扉，更有那爱情和友谊，悄无声息 地左右追随。——斯特朗</p><p>　　假如生命是无趣的，我怕有来生，假如生命是有趣的，今生巳是满足的了。一冰心</p><p>　　简单淳朴的生活,无论在身体上，还是精神上，对每个人都是有 益的。一爱因斯坦</p><p>　　将自己的生命寄托于他人记忆中，生命仿佛就加长了一些;光 荣,是我们获得的新生命,其可珍可贵，实在不下于天賦的生命。——孟德斯鸠</p><p>　　锦城虽乐,不如回故乡;乐园虽好,非久留之地。归去来兮。——华罗庚</p><p>　　决定一个人的一生，以及整个命运的，只是一瞬之间。一歌德</p><p>　　君看白日驰，何异弦上箭。——李益</p><p>　　路是脚踏出来的，历史是人写出来的。人的每一步行动都在书 写自己的历史。——吉鸿昌</p><p>　　没有理智绝不会有理性的生活。一斯宾诺莎</p><p>　　没有目标而生活，恰如没有罗盘而航行。一康德</p><p>　　没有音乐的生命简直是一个错误、一种苦难、一次流放。——尼采</p><p>　　命运不能妨碍我们的欢乐,让他来胁迫我们吧！我们还是要欢 笑度日。只有傻瓜才不是这样。——高尔基</p><p>　　命运是我们手中的泥。一石评梅</p><p>　　你明白,人的一生,既不是人们想象的那么好，也不是那么坏。—莫泊桑</p><p>　　你若要为你的意义而欢喜,就必须给这个世界以意义。清贫,洁白朴素的生活,正是我们革命者能够战胜许多困难的地 方！——方志敏</p><p>　　人不能像走兽那样活着,应该追求知识和美德。——但丁</p><p>　　人的价值是由自己决定的。——卢梭</p><p>　　人的生命,似洪水奔流,不遇着岛屿和暗礁，难以激起美丽的浪花。——奥斯特洛夫斯基</p><p>　　人的一生可能燃烧也可能腐朽,我不能腐朽,我愿意燃烧起来！—奥斯特洛夫斯基</p><p>　　人间没有永恒的夜晚，世界没有永恒的冬天。——艾青</p><p>　　人间桑海朝朝变,莫遣佳期更后期。一李商隐</p><p>　　人类被賦予了一种工作,那就是精神的成长。——托尔斯泰 人类的一切努力的目的在于获得幸福。——欧文</p><p>　　人们必须明白，在人生这个剧场中，只有上帝和天使们才是观众。——培根</p><p>　　人们所努力追求的庸俗的目标——财产、虚荣、奢侈的生活—— 我总觉得都是可鄙的。一爱因斯坦</p><p>　　人们需要快乐’就像需要衣服一样。——玛格瑞特·科利尔·格雷厄姆</p><p>　　人们有时可以支配自己的命运。要是受制于人,那错处并不在 于命运,而是在于自己。——莎士比亚</p><p>　　人生并非游戏，因此,我们并没有权利只凭自己的意愿放弃它。——托尔斯泰</p><p>　　人生不是一支短短的错烛,而是一支由我们暂时拿着的火炬,我们一定要把它燃的十分光明灿烂,然后交给下一代的人们。　—萧伯纳</p><p>　　人生不是一种享乐,而是一桩十分沉重的工作。一托尔斯泰</p><p>　　人生不售来回票，一旦动身,绝不能复返。一罗曼·罗兰</p><p>　　人生得一知己足矣,斯世当以同怀视之。一鲁迅</p><p>　　人生的价值,并不是用时间，而是用深度去衡量的。——托尔斯泰</p><p>　　人生的价值，即以其人对于当代所做的工作为尺度。——徐玮</p><p>　　人生的一切变化，一切魅力，一切美都是由光明和阴影构成的。—托尔斯泰</p><p>　　人生的意义就在于人的自我完善。</p><p>　　人生的最大悲痛莫过于辜负青春。</p><p>　　人生贵相知,何用金与钱。</p><p>　　人生就像爬坡,要一步一步来。</p><p>　　人生苦短,若虚度年华，则短暂的人生就太长了。</p><p>　　人生乐在相知心。</p><p>　　人生离不开友谊，但要得到真正的友谊才是不容易;友谊总需要 忠诚去播种，用热情去灌溉,用原则去培养，用谅解去护理。——马克思</p><p>　　人生每天失望,能把思想寄托在高贵的性格、纯洁的感情和幸福 的境界上，也就大可自慰了。——福楼拜</p><p>　　人生如同故事。重要的并不在有多长，而是在有多好。—塞涅卡</p><p>　　人生是短促的,这句话应该促醒每一个人去进行一切他所想做 的事。虽然勤勉不能保证一定人生是各种不同的变故、循环不已的 痛苦和欢乐组成的。那种永远不变的蓝天只存在于心灵中间，向现 实的人生去要求未免是奢望。——巴尔扎克</p><p>　　人生是疾病，世界是医院，而死是我们的医生。——海涅</p><p>　　人生是没有毕业的学校。一黎凯</p><p>　　人生是一场无休、无歇、无情的战斗,凡是要做个够得上称为人 的人，都得时时刻刻向无形的敌人作战。一罗曼·罗兰</p><p>　　人生所有的欢乐是创造的欢乐:爱情、天才、行动一全靠创造 这一团烈火迸射出来的。一罗曼·罗兰</p><p>　　人生天地之间，若白驹过隙,忽然而已。一庄子</p><p>　　人生之要事在于确立伟大的目标与实现这目标的决心。——歌德</p><p>　　人生至善,就是对生活乐观,对工作愉快，对事业兴奋。——布兰登</p><p>　　人生自古谁无死,留取丹心照汗青。一文天祥</p><p>　　人生最宝贵的是生命，生命属于人只有一次。一个人的生命应 当这样度过:当他回忆往事的时候,他不致因虚度年华而悔恨,也不 致因碌碌无为而羞愧;在临死的时候，他能够说我的整个生命和全 部精力，都已献给世界上最壮丽的事业为人类的解放而斗争。”——奥斯特洛夫斯基</p><p>　　人生最终的价值在于觉醒和思考的能力，而不只在于生存。—亚里士多德</p><p>　　人世间的头等大事莫过于懂得如何保持自我。一蒙田</p><p>　　人无国王、庶民之分,只要家有和平,便是最幸福的人。——歌德</p><p>　　人一能之,己百之;人十能之，己千之。一《中庸》</p><p>　　人有时可以对自己、对一切嬉笑怒骂,但绝不可以永远采取这种 态度活在世上。一马克.吐温</p><p>　　人与人的友谊，把多数人的心灵结合在一起。由于这种可贵的 联系,生活才显得温柔甜蜜。一奥古斯丁</p><p>　　人真正的完美不在于他拥有什么，而在于他是什么。—王尔德</p><h2 id="关于人生感悟的诗词一"><a href="#关于人生感悟的诗词一" class="headerlink" title="关于人生感悟的诗词一"></a>关于人生感悟的诗词一</h2><p>　　1、质天何人能晓我？万里愁云困星锁。人生能有几次搏？</p><p>　　2、白发虽未生，朱颜已先悴。人生讵几何，在世犹如寄。</p><p>　　3、一叶浮萍归大海，人生何处不相逢？相逢莫要论人生，人生已是夕阳红。</p><p>　　4、阎罗大伯曾教来，道人生、但不须烦恼。</p><p>　　5、世情梦幻。复作如斯观。自叹人生，分合常相半。</p><p>　　6、世路风波险，十年一别须臾。人生聚散长如此，相见且欢娱。</p><p>　　7、盛衰各有时，立身苦不早。人生非金石，岂能长寿考？</p><p>　　8、人生自古一场梦，梦到天涯睡狮醒。踏平世间坎坷路，一路走来太从容。</p><p>　　9、人生自古多曲折，心内雪亮，身外雪亮，旧情一缕独难忘。</p><p>　　10、人生在世不满百，谁敢笑我鬓发白？三尺长剑提在手，白发一样杀强贼。</p><p>　　11、人生谁能料，堪悲处、身落柳陌花丛。</p><p>　　12、人生寄一世，奄忽若飙尘。何不策高足，先据要路津。</p><p>　　13、人生到处知何似，应似飞鸿踏雪泥。</p><p>　　14、去此若俯仰，如何似九秋。人生若尘露，天道邈悠悠。</p><p>　　15、青青陵上柏，磊磊涧中石。人生天地间，忽如远行客。</p><p>　　16、流离成鄙贱，常恐复捐废。人生几何时，怀忧终年岁。</p><p>　　17、几度寻君君不遇，梦里依旧相眷顾。千言万语难再叙，向谁诉？同在茫茫人生路。</p><p>　　18、浩浩阴阳移，年命如朝露。人生忽如寄，寿无金石固。</p><p>　　19、多少人生风雨后？多少慷慨不再有？多少壮举一场梦？多少盛情一杯酒？</p><p>　　20、对酒当歌，人生几何？譬如朝露，去日苦多。</p><h2 id="关于人生感悟的诗词二"><a href="#关于人生感悟的诗词二" class="headerlink" title="关于人生感悟的诗词二"></a>关于人生感悟的诗词二</h2><p>　　1、人生贵相知，何用金与钱？ –李白</p><p>　　2、人生多求复多怨，天公供尔良独难。 –苏舜钦</p><p>　　3、人生百年，犹如一瞬。 –王勃</p><p>　　4、人生有情泪沾衣，江水江花岂终极。 –杜甫</p><p>　　5、人生若波澜，世路有屈曲。–李白</p><p>　　6、人生结交在始终，莫于升沉中路分。–贺兰进明</p><p>　　7、人生莫作妇人身，百年苦乐由他人。 –白居易</p><p>　　8、人生一世间，忽若暮春草。 –徐干</p><p>　　9、人生百年，立于幼学。– 梁启超</p><p>　　10、人生得一知己足矣，斯世当以同怀视之。 –鲁迅</p><p>　　11、人生何适不艰难，赖是胸中万斛宽。 –陆游</p><p>　　12、人生富贵岂有极，男儿要在能死国。 –李梦阳</p><p>　　13、人生富贵驹过隙，惟有荣名寿金石。 –顾炎武</p><p>　　14、人生芳秽有千载，世上荣枯无百年。 –榭枋得</p><p>　　15、人生代代无穷己，江月年年只相似。 –张若虚</p><p>　　16、人生处一世，去若朝露唏。年在桑榆间，影响不能追。 –曹植</p><p>　　17、人生处万类，知识最为贤。 –韩愈</p><p>　　18、人生不失意，焉能暴己知？ –刘禹锡</p><p>　　19、人生不得行胸怀，虽寿百岁犹为夭。 –何良俊</p><p>　　20、埋骨岂须桑梓地，人生到处有青山。 –黄治峰</p><p>　　21、死生一事付鸿毛，人生到世方英杰。–秋瑾</p><p>　　22、人生自古谁无死，留取丹心照汗青。  –文天祥</p><p>　　23、人生在勤，勤则不匮；户枢不蠹，流水不腐。 –许名奎</p><p>　　24、人生在勤，不索何获。 –张衡</p><p>　　25、人生欲念千千万，且莫图利忘教子。 –字严</p><p>　　26、人生一世，草木一秋。 –冯梦龙</p><p>　　27、人生须自重。 –黄宗羲</p><p>　　28、人生世上风波险，一日风波十二时。 –兰陵笑笑生</p><p>　　29、人生若尘露，天道邈悠悠。 –阮籍</p><p>　　30、人生留得丹心在，纵死犹闻侠骨香。 –沈泰</p><p>　　31、人生交契无老少，论交何必先同调。 –杜甫</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;每天一点人生感悟的句子&quot;&gt;&lt;a href=&quot;#每天一点人生感悟的句子&quot; class=&quot;headerlink&quot; title=&quot;每天一点人生感悟的句子&quot;&gt;&lt;/a&gt;每天一点人生感悟的句子&lt;/h2&gt;&lt;p&gt;　　1、有些人生来是为了赶路的…完成学业事业结婚生子，一切有条不紊按部就班，匆匆忙忙在前三十年生命里就完成了大部分任务，再用剩下的时间去修补与忍耐，并学着苦中作乐。而有些人的人生任务可能只完成了一半，但他们却看了别人几辈子才能看到的风景，你不能说任何一种选择是错。真的，自己开心就好。&lt;/p&gt;
&lt;p&gt;　　2、真正能治愈自己的，只有你自己。要想活得快乐，要学会清醒地做事，糊涂地去做人。&lt;/p&gt;
&lt;p&gt;　　3、当你能看懂一件事情的时候，说明你长大了；当你能看清一件事情的时候，说明你开窍了；当你能看破一件事情的时候，说明你理性了；当你能看透一件事情的时候，说明你成熟了；当你能看淡一件事情的时候，说明你放下了。&lt;/p&gt;
&lt;p&gt;　　4、一生要走多远的路程，经过多少年才能走到终点。梦想需要多少时间才能慢慢实现。只要肯期待希望就不会幻灭。&lt;/p&gt;
&lt;p&gt;　　5、人生其实也就是选择，有所放弃才能在有限的生命里活得充实、饱满、旺盛。没有果敢的放弃，就没有辉煌的选择。放弃是一种灵性的觉醒，是一种慧根的显现，一如放鸟返林、放鱼入水。学会放弃，才会有所收获。当一切尘埃落定，当一切归于平静，我们才会真正懂得放弃其实也是另一种美丽的收获。&lt;/p&gt;
&lt;p&gt;　　6、人生百年，没有太多的时间可以挥霍，都说幸福如饮水，冷暖自知，有些人，每天都在追逐幸福的路上，却从来也没有感觉到幸福的存在；有些人，懂得收集点滴的温暖和感动，便会与快乐同行。&lt;/p&gt;
&lt;p&gt;　　7、你总会遇到一个人，吼着五音不全的嗓子唱歌给你听，陪你在大雨的夜里狂奔，在你黑白的人生中拿着颜料盘画来画去，听得懂你的胡言乱语，看得清你没有微笑的表情，穿越拥挤的人潮走向你，拥抱你。&lt;/p&gt;
&lt;p&gt;　　8、人生难免要受些委屈和伤害，与其耿耿于怀郁郁寡欢，倒不如坦坦荡荡泰然处之。只有经受住狂风暴雨的洗礼，才能练就波澜不惊的淡定。&lt;/p&gt;
&lt;p&gt;　　9、人生的每个抉择都像是一个赌局，输赢都是自己的。不同的是赌注的大小，选择了就没有反悔的机会。&lt;/p&gt;
&lt;p&gt;　　10、人生在世最大的勇气不是不怕死亡，而是坚强的活着，勇敢的面对生活带给的压力和考验！&lt;/p&gt;
    
    </summary>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>网站制作app、并发布github、生成二维码推广下载</title>
    <link href="https://www.wuxinvip.com/2018/09/24/essay/essay-15/"/>
    <id>https://www.wuxinvip.com/2018/09/24/essay/essay-15/</id>
    <published>2018-09-24T00:00:00.000Z</published>
    <updated>2018-10-16T09:24:37.607Z</updated>
    
    <content type="html"><![CDATA[<p>应用全部工具 ：Hbuilder、 github账户、草料二维码生成器</p><h1 id="网站制作app"><a href="#网站制作app" class="headerlink" title="网站制作app"></a>网站制作app</h1><p>工具 Hbuilder</p><p>下载地址：<a href="http://dcloud.io/" target="_blank" rel="noopener">http://dcloud.io/</a></p><p>步骤 ：</p><a id="more"></a><h3 id="新建工程-添加app信息"><a href="#新建工程-添加app信息" class="headerlink" title="新建工程 添加app信息"></a>新建工程 添加app信息</h3><p><img src="/img/essay/essay-15/new-project.png" alt="如图"></p><h3 id="选择wap转app"><a href="#选择wap转app" class="headerlink" title="选择wap转app"></a>选择wap转app</h3><p><img src="/img/essay/essay-15/project-config.png" alt="如图"></p><h3 id="生成"><a href="#生成" class="headerlink" title="生成"></a>生成</h3><ul><li>选择发行-》》app在云端打包<br><img src="/img/essay/essay-15/faxing.png" alt="如图"></li></ul><p>然后等待 后台打包<br>控制台会实时输出打包信息</p><h1 id="github发布二进制可下载文件"><a href="#github发布二进制可下载文件" class="headerlink" title="github发布二进制可下载文件"></a>github发布二进制可下载文件</h1><h3 id="仓库release分支建立一个新的release-tag"><a href="#仓库release分支建立一个新的release-tag" class="headerlink" title="仓库release分支建立一个新的release tag"></a>仓库release分支建立一个新的release tag</h3><p><img src="/img/essay/essay-15/release.png" alt="如图"></p><h3 id="把生成的文件上传上去"><a href="#把生成的文件上传上去" class="headerlink" title="把生成的文件上传上去"></a>把生成的文件上传上去</h3><p><img src="/img/essay/essay-15/publish-github.png" alt="如图"></p><h3 id="选中文件右键复制下载地址"><a href="#选中文件右键复制下载地址" class="headerlink" title="选中文件右键复制下载地址"></a>选中文件右键复制下载地址</h3><h1 id="草料二维码生成下载图片"><a href="#草料二维码生成下载图片" class="headerlink" title="草料二维码生成下载图片"></a>草料二维码生成下载图片</h1><ul><li>地址：<a href="https://cli.im/" target="_blank" rel="noopener">https://cli.im/</a></li></ul><p><img src="/img/essay/essay-15/download-photo.png" alt="如图"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;应用全部工具 ：Hbuilder、 github账户、草料二维码生成器&lt;/p&gt;
&lt;h1 id=&quot;网站制作app&quot;&gt;&lt;a href=&quot;#网站制作app&quot; class=&quot;headerlink&quot; title=&quot;网站制作app&quot;&gt;&lt;/a&gt;网站制作app&lt;/h1&gt;&lt;p&gt;工具 Hbuilder&lt;/p&gt;
&lt;p&gt;下载地址：&lt;a href=&quot;http://dcloud.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://dcloud.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;步骤 ：&lt;/p&gt;
    
    </summary>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>timestamp 转 date 少一天</title>
    <link href="https://www.wuxinvip.com/2018/08/24/exception/exception-4/"/>
    <id>https://www.wuxinvip.com/2018/08/24/exception/exception-4/</id>
    <published>2018-08-24T00:00:00.000Z</published>
    <updated>2018-10-20T14:46:02.349Z</updated>
    
    <content type="html"><![CDATA[<p>timestamp 时间为 GMT</p><p>而我们数据库大都设置时区GMT+8</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 根据long类型时间戳 获取当前date  添加时区判断</span><br><span class="line"> * @param timestamp</span><br><span class="line"> * @return</span><br><span class="line"> */</span><br><span class="line">public static Date getDateByLongTime(Long timestamp)&#123;</span><br><span class="line"></span><br><span class="line">    TimeZone.setDefault(TimeZone.getTimeZone(&quot;GMT+8&quot;));</span><br><span class="line">    Calendar c = Calendar.getInstance(TimeZone.getTimeZone(&quot;GMT+8&quot;));</span><br><span class="line">    c.setTime(new Date(timestamp));</span><br><span class="line">    return c.getTime();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;timestamp 时间为 GMT&lt;/p&gt;
&lt;p&gt;而我们数据库大都设置时区GMT+8&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/s
      
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="exception" scheme="https://www.wuxinvip.com/categories/java/exception/"/>
    
    
      <category term="exception" scheme="https://www.wuxinvip.com/tags/exception/"/>
    
  </entry>
  
  <entry>
    <title>关于学习方法的一些思考</title>
    <link href="https://www.wuxinvip.com/2018/08/21/essay/essay-7/"/>
    <id>https://www.wuxinvip.com/2018/08/21/essay/essay-7/</id>
    <published>2018-08-21T00:00:00.000Z</published>
    <updated>2018-10-15T08:31:42.932Z</updated>
    
    <content type="html"><![CDATA[<p>关于学习方法的一些思考</p><p>在构建自己的技术图谱中、添加了一个open messaging<br>突然看到这个图</p><p><img src="/img/essay/img/思考学习方式.png" alt="如图"></p><p>添加了一个open messaging</p><p>那么我要回忆每个消息组件 功能特性、使用场景、使用限制、有哪些危险、这大概就是方法论？</p><a id="more"></a><p>渐渐的形成、我要做一个全新的东西、我需要面对什么样的问题、我需要解决什么样的问题</p><p>初次所有的东西都需要灵感？</p><p>而成长的人拼的是 方式方法、这大概是荟萃、就像所有的所学留下的才是精华</p><p>计算机世界？</p><p>从</p><ul><li><p>硬件、【硬件的内存、存储容量】</p></li><li><p>运行系统、【win 、linux、mac】</p></li><li><p>支撑系统运行的文件系统形式、【ext、ntfs等等】</p></li><li><p>容器、虚拟机【在系统基础上 支撑更多兼容软件的运行】</p></li><li><p>软件、【软件开发者、软件运行内存、线程、】</p></li><li><p>软件运行需要环境【端口、网卡、协议通讯】</p></li></ul><p>一个好的协议能够更好的承载和扩容通讯消息</p><p>一个好的网卡能够承载更多的请求量</p><p>端口则是软件监听器、也是软件的服务暴露接口</p><h2 id="优化原理"><a href="#优化原理" class="headerlink" title="优化原理"></a><strong>优化原理</strong></h2><p>搞java得想学系统运行原理 mysql文档第八章【也可见本博客专栏《sql优化》】 mysql优化 必不可少、一举两得、</p><p>从文件IO并发量、线程、文件系统支撑文件IO量、软件配置、sql优化、缓存优化、</p><p>对于软件优化、在每个方面都有优化、相对于任何一款软件都可以从这几个方面入手优化</p><p>不同之处就是、优化的参数不一样</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;关于学习方法的一些思考&lt;/p&gt;
&lt;p&gt;在构建自己的技术图谱中、添加了一个open messaging&lt;br&gt;突然看到这个图&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/essay/img/思考学习方式.png&quot; alt=&quot;如图&quot;&gt;&lt;/p&gt;
&lt;p&gt;添加了一个open messaging&lt;/p&gt;
&lt;p&gt;那么我要回忆每个消息组件 功能特性、使用场景、使用限制、有哪些危险、这大概就是方法论？&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/java/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>腾讯COS 阿里OSS 七牛 备份脚本</title>
    <link href="https://www.wuxinvip.com/2018/08/20/essay/essay-4/"/>
    <id>https://www.wuxinvip.com/2018/08/20/essay/essay-4/</id>
    <published>2018-08-20T00:00:00.000Z</published>
    <updated>2018-10-15T08:31:42.827Z</updated>
    
    <content type="html"><![CDATA[<p>腾讯COS 阿里OSS 七牛 备份脚本</p><p>#20171017:代码重构,支持将网站上传到腾讯云COS、阿里云OSS、七牛云存储.(v0.1.0)</p><p>#20171018:修复cos.conf判断错误.(v0.1.1)</p><p>#20171023:增加阿里云多站点备份.(v0.1.2)</p><p>#20171025:增加腾讯云多站点备份.(v0.1.3)</p><p>#20171029:修复阿里云下crontab不能正常上传bug(v0.1.4)</p><p>#20171030:修复阿里云/腾讯云修改key后，备份报错问题。移动pip判断到相应位置（v0.1.5）</p><p>#20171202:修复腾讯云与阿里云周期删除失败BUG(v0.1.6)</p><p>#20171204:修复mysqldump某些小bug.(v0.1.7)</p><p>#20180112:增加更新源地址、修改小bug(v0.1.8)</p><p>#20180524:更新腾讯cos上传。(v0.1.9)</p><p>#20180603:日常修复</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">#Scripts Name:itxg(beta)</span><br><span class="line">version=0.2.0</span><br><span class="line">#Owner:shengbao</span><br><span class="line">#Support URL:shengbao.org</span><br><span class="line">#Update URL:shengbao.org</span><br><span class="line">#Changelog:</span><br><span class="line">#20171017:代码重构,支持将网站上传到腾讯云COS、阿里云OSS、七牛云存储.(v0.1.0)</span><br><span class="line">#20171018:修复cos.conf判断错误.(v0.1.1)</span><br><span class="line">#20171023:增加阿里云多站点备份.(v0.1.2)</span><br><span class="line">#20171025:增加腾讯云多站点备份.(v0.1.3)</span><br><span class="line">#20171029:修复阿里云下crontab不能正常上传bug(v0.1.4)</span><br><span class="line">#20171030:修复阿里云/腾讯云修改key后，备份报错问题。移动pip判断到相应位置（v0.1.5）</span><br><span class="line">#20171202:修复腾讯云与阿里云周期删除失败BUG(v0.1.6)</span><br><span class="line">#20171204:修复mysqldump某些小bug.(v0.1.7)</span><br><span class="line">#20180112:增加更新源地址、修改小bug(v0.1.8)</span><br><span class="line">#20180524:更新腾讯cos上传。(v0.1.9)</span><br><span class="line">#20180603:日常修复</span><br><span class="line">stty erase &apos;^H&apos;</span><br><span class="line">backuptime=`date +%Y%m%d`</span><br><span class="line">rmbackuptime=`date -d &quot;-&quot;$rmdate&quot; days&quot; +%Y%m%d`</span><br><span class="line">#更新选项</span><br><span class="line">        case $1 in</span><br><span class="line">                update)</span><br><span class="line">                        echo 正在下载更新,请稍后....</span><br><span class="line">                        rm -rf itxg.sh &gt;&gt; /dev/null 2&gt;&amp;1</span><br><span class="line">                        wget --spider -q -o /dev/null  --tries=1 -T 5 shengbao.org</span><br><span class="line">                        if [ &quot;$?&quot; -eq 0 ];then </span><br><span class="line">                            wget https://shengbao.org/tools/itxg.sh</span><br><span class="line">                        else</span><br><span class="line">                            wget http://update.itxueguan.com/itxg.sh</span><br><span class="line">                        fi</span><br><span class="line">                        mv itxgt.sh $0</span><br><span class="line">                        echo &quot;更新完毕.请重新运行&quot;$0&quot;&quot;</span><br><span class="line">                        exit 0</span><br><span class="line">                ;;</span><br><span class="line">        esac</span><br><span class="line">#更新选项结束</span><br><span class="line">#判断是否存在更新版本</span><br><span class="line">v=`curl https://shengbao.org/tools/itxg.sh|awk NR==3|awk -F= &apos;&#123;print $2 &#125;&apos;`</span><br><span class="line">clear</span><br><span class="line">if [ `expr $version \&gt; $v` -eq 0 ] &amp;&amp; [ `expr $version \= $v` -eq 0 ];then</span><br><span class="line">        echo 有更新,请退出后输入命令:sh &quot;$0&quot; update ,10秒后继续....</span><br><span class="line">        sleep 10</span><br><span class="line">else</span><br><span class="line">        echo 无更新,2秒后继续...</span><br><span class="line">        sleep 2</span><br><span class="line">fi</span><br><span class="line">#判断更新结束</span><br><span class="line">if [ ! -f itxg.conf ];then</span><br><span class="line">cat &gt;itxg.conf &lt;&lt;EOF</span><br><span class="line">####----公共----####</span><br><span class="line">#当前配置文件版本</span><br><span class="line">conf_version=$version</span><br><span class="line">#enable=tengxun为开启备份到腾讯,qiniu为备份到七牛,aliyun为备份到阿里云</span><br><span class="line">enable=</span><br><span class="line">#备份周期0天为不删除备份文件</span><br><span class="line">rmdate=0</span><br><span class="line">#开启数据库备份yes,no</span><br><span class="line">db_enable=no</span><br><span class="line">#需要备份的网站目录，绝对路径末尾不需要加/</span><br><span class="line">backup_file=</span><br><span class="line">####----多站点----####</span><br><span class="line">#是否支持多站点,默认为关闭</span><br><span class="line">multistation=no</span><br><span class="line">#数字从0开始，因此2个站点该数字写1</span><br><span class="line">multisitenumber=1</span><br><span class="line">#上传到一个bucket下的不同目录,例如:shengbao itxueguan</span><br><span class="line">multlist=(shengbao itxueguan)</span><br><span class="line">#多站点备份路径,2个站点路径中间以空格分割。绝对路径末尾不需要加/</span><br><span class="line">backup_filelist=(/data1 /data2)</span><br><span class="line"></span><br><span class="line">####----数据库----####</span><br><span class="line">#数据库用户名</span><br><span class="line">DB_USER=</span><br><span class="line">#数据库密码</span><br><span class="line">DB_PASS=</span><br><span class="line">#数据库连接地址</span><br><span class="line">DB_HOST=localhost</span><br><span class="line">#数据库名称</span><br><span class="line">DB_NAME=</span><br><span class="line">#多站点数据库名称列表</span><br><span class="line">multdblist=(shdb itxgdb)</span><br><span class="line">####----腾讯----####</span><br><span class="line">#你的bucket名称</span><br><span class="line">txbucketname=</span><br><span class="line">#腾讯secret_key</span><br><span class="line">txsecret_key=</span><br><span class="line">#腾讯txappid</span><br><span class="line">txappid=</span><br><span class="line">#腾讯访问api区域，北京一区华北(ap-beijing-1),北京(ap-beijing),华东(ap-shanghai),华南(ap-guangzhou),西南(ap-chengdu),新加坡(ap-singapore),香港(ap-hongkong),多伦多(na-toronto),法兰克福(eu-frankfurt)</span><br><span class="line">txregion=</span><br><span class="line">####----阿里云----####</span><br><span class="line">#你的bucket名称</span><br><span class="line">albucketname=</span><br><span class="line">#阿里云access_id</span><br><span class="line">alaccess_key_id=</span><br><span class="line">#阿里云secreret_key</span><br><span class="line">alaccess_key_secret=</span><br><span class="line">#阿里云endpoint</span><br><span class="line">alendpoint=</span><br><span class="line">####----七牛----####</span><br><span class="line">#你的证书ID</span><br><span class="line">qnak=</span><br><span class="line">#你的证书key</span><br><span class="line">qnsk=</span><br><span class="line">#你的bucket名称</span><br><span class="line">qiniubucket=</span><br><span class="line">####----结束----####</span><br><span class="line">EOF</span><br><span class="line">        echo &quot;5秒后退出,请编辑`pwd`/itxg.conf&quot;</span><br><span class="line">        sleep 5</span><br><span class="line">        exit 0</span><br><span class="line">fi</span><br><span class="line">. ./itxg.conf</span><br><span class="line">rmbackuptime=`date -d &quot;-&quot;$rmdate&quot; days&quot; +%Y%m%d`</span><br><span class="line">#判断itxg.conf文件是否被编辑</span><br><span class="line">if [ -z $enable ];then</span><br><span class="line">        echo &quot;请先编辑:`pwd`/itxg.conf后执行&quot;$0&quot;&quot;</span><br><span class="line">        sleep 3</span><br><span class="line">        exit</span><br><span class="line">fi</span><br><span class="line">if [ `expr $conf_version \&gt; $version` -eq 0 ] &amp;&amp; [ `expr $conf_version \= $version` -eq 0 ];then</span><br><span class="line">        sed -i &quot;s/$conf_version/$version/g&quot; itxg.conf</span><br><span class="line">else</span><br><span class="line">        echo &quot;配置文件版本为:&quot;$conf_version&quot;检查完毕&quot;</span><br><span class="line">fi</span><br><span class="line">#判断itxg.conf文件是否被编辑结束</span><br><span class="line"></span><br><span class="line">#判断本地空间是否满足需求</span><br><span class="line">if [ &quot;$multistation&quot; == no ];then</span><br><span class="line">dfs=`df |awk &apos;NR==2&apos;&apos;&#123;print $4&#125;&apos;`</span><br><span class="line">dus=`du -s /&quot;$backup_file&quot;|awk &apos;&#123;print $1&#125;&apos;`</span><br><span class="line">if [ &quot;$dfs&quot; -lt &quot;$dus&quot; ];then</span><br><span class="line">    echo &quot;磁盘空间不能满足备份要求....2秒后退出&quot;</span><br><span class="line">    sleep 2</span><br><span class="line">else</span><br><span class="line">    echo &quot;磁盘空间检查完毕...&quot;</span><br><span class="line">    sleep 2</span><br><span class="line">fi</span><br><span class="line">fi</span><br><span class="line">#判断本地空间是否满足需求完毕</span><br><span class="line">#开始压缩需要备份的网站,并将压缩后文件保存在/itxg目录下</span><br><span class="line">qiniu_backup_file=/itxg/&quot;$backuptime&quot;.tar.gz</span><br><span class="line">if [ $db_enable = yes ];then</span><br><span class="line">    if [ &quot;$multistation&quot; == no ];then</span><br><span class="line">        /usr/local/mariadb/bin/mysqldump --opt -u$DB_USER -p$DB_PASS -h$DB_HOST $DB_NAME  &gt; $backup_file/$backuptime.sql</span><br><span class="line">        echo &quot;Warning: Using a password on the command line interface can be insecure.为正常&quot;</span><br><span class="line">    fi</span><br><span class="line">    if [ &quot;$multistation&quot; == yes ] &amp;&amp; [ ! -z &quot;$multisitenumber&quot; ];then</span><br><span class="line">        for((msnb=0;msnb&lt;=&quot;$multisitenumber&quot;;msnb++));do</span><br><span class="line">        /usr/local/mariadb/bin/mysqldump --opt -u$DB_USER -p$DB_PASS -h$DB_HOST $&#123;multdblist[&quot;$msnb&quot;]&#125;  &gt; $&#123;backup_filelist[&quot;$msnb&quot;]&#125;/$backuptime.sql</span><br><span class="line">        done</span><br><span class="line">    fi</span><br><span class="line">else</span><br><span class="line">    echo &quot;数据库备份关闭&quot;</span><br><span class="line">fi</span><br><span class="line">if [ &quot;$multistation&quot; == no ];then</span><br><span class="line">    if [ ! -d /itxg ];then</span><br><span class="line">        mkdir /itxg</span><br><span class="line">    fi</span><br><span class="line">    if [ -f /itxg/*.tar.gz ];then</span><br><span class="line">        rm -rf /itxg/*.tar.gz</span><br><span class="line">        echo &quot;删除上次本地备份,开始压缩文件... ...&quot;</span><br><span class="line">        tar -czvf /itxg/&quot;$backuptime&quot;.tar.gz &quot;$backup_file&quot; &gt;&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        rm -rf $backup_file/$backuptime.sql</span><br><span class="line">        echo &quot;压缩文件完成... ...&quot;</span><br><span class="line">    else</span><br><span class="line">        echo &quot;开始压缩文件... ...&quot;</span><br><span class="line">        tar -czvf /itxg/&quot;$backuptime&quot;.tar.gz &quot;$backup_file&quot; &gt;&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        rm -rf $backup_file/$backuptime.sql.gz</span><br><span class="line">        echo &quot;压缩文件完成... ...&quot;</span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line">#结束压缩小备份的网站，并将压缩后的文件保存在/itxg目录下</span><br><span class="line">#多站点压缩开始</span><br><span class="line">if [ &quot;$multistation&quot; == yes ] &amp;&amp; [ ! -z &quot;$multisitenumber&quot; ];then</span><br><span class="line">    for((msnb=0;msnb&lt;=&quot;$multisitenumber&quot;;msnb++));do</span><br><span class="line">    if [ ! -d &quot;/itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;&quot; ];then</span><br><span class="line">        mkdir -p /itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;</span><br><span class="line">    fi</span><br><span class="line">if [ -f &quot;/itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;&quot;/*.tar.gz ];then</span><br><span class="line">         echo &quot;开始压缩文件... ... &quot;</span><br><span class="line">        rm -rf &quot;/itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;&quot;/*.tar.gz</span><br><span class="line">        tar -czvf &quot;/itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;&quot;/&quot;$backuptime&quot;.tar.gz &quot;$&#123;backup_filelist[&quot;$msnb&quot;]&#125;&quot; &gt;&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        rm -rf &quot;$&#123;backup_filelist[&quot;$msnb&quot;]&#125;&quot;/$backuptime.sql</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line">        echo &quot;开始压缩文件... ...&quot;</span><br><span class="line">        tar -czvf &quot;/itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;&quot;/&quot;$backuptime&quot;.tar.gz &quot;$&#123;backup_filelist[&quot;$msnb&quot;]&#125;&quot; &gt;&gt;/dev/null 2&gt;&amp;1</span><br><span class="line">        rm -rf &quot;$&#123;backup_filelist[&quot;$msnb&quot;]&#125;&quot;/$backuptime.sql.gz</span><br><span class="line">fi</span><br><span class="line">#数据库备份开始</span><br><span class="line">#数据库备份结束</span><br><span class="line">done</span><br><span class="line">fi</span><br><span class="line">#多站点压缩结束</span><br><span class="line">#腾讯云开始</span><br><span class="line">if [ &quot;$enable&quot; == tengxun ];then</span><br><span class="line">    if [ -z &quot;$txbucketname&quot; ] &amp;&amp; [ -z &quot;$txaccess_id&quot; ] &amp;&amp; [ -z &quot;$txappid&quot; ] &amp;&amp; [ -z &quot;$txsecret_key&quot; ] &amp;&amp; [ -z &quot;$txregion&quot; ];then </span><br><span class="line">    echo &quot;腾讯云配置检查失败&quot;</span><br><span class="line">    exit 1    </span><br><span class="line">fi</span><br><span class="line">#检查coscmd环境</span><br><span class="line">    if [ -f /bin/coscmd ];then</span><br><span class="line">        echo &quot;coscmd检测完毕&quot;</span><br><span class="line">    else</span><br><span class="line">        echo &quot;coscmd检测失败，开始安装.&quot;</span><br><span class="line">#检查pip环境</span><br><span class="line"></span><br><span class="line">if [ -f /bin/pip ];then</span><br><span class="line">        echo &quot;pip检测完毕&quot;</span><br><span class="line">else</span><br><span class="line">        echo &quot;pip检测失败，开始安装.&quot;</span><br><span class="line">        yum install -y python-pip</span><br><span class="line">        pip install --upgrade pip</span><br><span class="line">fi</span><br><span class="line">#检查pip环境结束</span><br><span class="line">        git clone https://github.com/tencentyun/coscmd.git</span><br><span class="line">        cd coscmd &amp;&amp; python setup.py install </span><br><span class="line">    fi</span><br><span class="line">#检查coscmd环境结束</span><br><span class="line">#检查./.cos.conf环境开始</span><br><span class="line">    if [ -f ~/.cos.conf ];then</span><br><span class="line">        echo &quot;cos.conf检测完毕&quot;</span><br><span class="line">rm -rf ~/.cos.conf</span><br><span class="line">        coscmd config -a &quot;$txappid&quot; -s &quot;$txsecret_key&quot; -b &quot;$txbucketname&quot; -r &quot;$txregion&quot;</span><br><span class="line">    else</span><br><span class="line">        echo &quot;cos.conf检测失败,开始安装.&quot;</span><br><span class="line">        coscmd config -a &quot;$txappid&quot; -s &quot;$txsecret_key&quot;  -b &quot;$txbucketname&quot; -r &quot;$txregion&quot;</span><br><span class="line">    fi</span><br><span class="line">#检查./.cos.conf环境结求</span><br><span class="line">#上传开始</span><br><span class="line">    if [ &quot;$multistation&quot; == no ];then</span><br><span class="line">        coscmd upload -r /itxg/&quot;$backuptime&quot;.tar.gz &quot;$backuptime&quot;.tar.gz &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">#        if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">#            echo &quot;腾讯云上传完成&quot;</span><br><span class="line">#        elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">#            echo &quot;腾讯云上传完成&quot;</span><br><span class="line">#        else </span><br><span class="line">#            echo &quot;腾讯云上传失败&quot;</span><br><span class="line">#        fi</span><br><span class="line">    fi</span><br><span class="line">    if [ &quot;$multistation&quot; == yes ] &amp;&amp; [ ! -z &quot;$multisitenumber&quot; ];then</span><br><span class="line">        for((msnb=0;msnb&lt;=&quot;$multisitenumber&quot;;msnb++));do</span><br><span class="line">            coscmd upload -r &quot;/itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;&quot;/&quot;$backuptime&quot;.tar.gz  &quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$backuptime&quot;.tar.gz &gt;/dev/null</span><br><span class="line">#            if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">#                echo &quot;腾讯云&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$backuptime&quot;.tar.gz上传完成&quot;</span><br><span class="line">#             elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">#                echo &quot;腾讯云&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$backuptime&quot;.tar.gz上传完成&quot;</span><br><span class="line">#            else</span><br><span class="line">#                echo &quot;腾讯云&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$backuptime&quot;.tar.gz上传失败&quot;</span><br><span class="line">#             fi</span><br><span class="line">        done</span><br><span class="line">   fi</span><br><span class="line">#上传结束</span><br><span class="line">#腾讯云删除开始</span><br><span class="line">    if [ ! -z &quot;$rmdate&quot; ];then </span><br><span class="line">        if [ &quot;$multistation&quot; == no ];then</span><br><span class="line">             coscmd delete -f &quot;$rmbackuptime&quot;.tar.gz &gt;/dev/null</span><br><span class="line">            if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">                echo &quot;腾讯云&quot;$txbucketname&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">            elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">                echo &quot;腾讯云&quot;$txbucketname&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">            else</span><br><span class="line">                echo &quot;腾讯云&quot;$txbucketname&quot;/&quot;$rmbackuptime&quot;.tar.gz删除失败&quot;</span><br><span class="line">            fi</span><br><span class="line">        fi</span><br><span class="line">        if [ &quot;$multistation&quot; == yes ];then</span><br><span class="line">            for((msnb=0;msnb&lt;=&quot;$multisitenumber&quot;;msnb++));do</span><br><span class="line">                coscmd delete -f &quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz &gt;/dev/null</span><br><span class="line">                if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">                    echo &quot;腾讯云&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">                elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">                    echo &quot;腾讯云&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">                else</span><br><span class="line">                    echo &quot;腾讯云&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz删除失败&quot;</span><br><span class="line">                fi</span><br><span class="line">            done</span><br><span class="line">        fi</span><br><span class="line">    else</span><br><span class="line">        echo &quot;备份周期为永久，请注意COS存储使用情况...&quot;</span><br><span class="line">    fi</span><br><span class="line">#腾讯云删除结束</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">#阿里云开始</span><br><span class="line">if [ &quot;$enable&quot; == aliyun  ];then</span><br><span class="line">    if [ -z &quot;$albucketname&quot; ] &amp;&amp; [ -z &quot;$alaccess_key_id&quot; ] &amp;&amp; [ -z &quot;$alaccess_key_secret&quot; ] &amp;&amp; [ -z &quot;$alendpoint&quot; ];then</span><br><span class="line">        echo &quot;阿里云配置失败&quot;</span><br><span class="line">        exit 1</span><br><span class="line">    fi </span><br><span class="line">    if [ ! -f ./ossutil64 ];then</span><br><span class="line">        wget http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/50452/cn_zh/1506525299111/ossutil64?spm=5176.doc50452.2.3.7XHxTz</span><br><span class="line">        mv ossutil64?spm=5176.doc50452.2.3.7XHxTz ossutil64</span><br><span class="line">chmod 777 ossutil64</span><br><span class="line">    fi</span><br><span class="line">#阿里云配置检查</span><br><span class="line">    if [ -f .ossutilconfig ];then </span><br><span class="line">        echo &quot;ossutil配置检测完毕&quot;</span><br><span class="line">rm -rf `pwd`/.ossutilconfig</span><br><span class="line">`pwd`/./ossutil64 config -e &quot;$alendpoint&quot; -i &quot;$alaccess_key_id&quot; -k &quot;$alaccess_key_secret&quot; -L EN </span><br><span class="line">    else </span><br><span class="line">        echo &quot;ossutil配置检测失败,开始配置&quot;</span><br><span class="line">       `pwd`/./ossutil64 config -e &quot;$alendpoint&quot; -i &quot;$alaccess_key_id&quot; -k &quot;$alaccess_key_secret&quot; -L EN </span><br><span class="line">    fi</span><br><span class="line">#阿里云配置检查结束</span><br><span class="line">#阿里云上传开始</span><br><span class="line">    if [ &quot;$multistation&quot; == no ];then</span><br><span class="line">    `pwd`/./ossutil64 cp -f /itxg/&quot;$backuptime&quot;.tar.gz  oss://&quot;$albucketname&quot;</span><br><span class="line">        if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">            echo &quot;阿里云&quot;$backuptime&quot;.tar.gz上传完成&quot;</span><br><span class="line">        elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">            echo &quot;阿里云&quot;$backuptime&quot;.tar.gz上传完成&quot;</span><br><span class="line">        else</span><br><span class="line">            echo &quot;阿里云&quot;$backuptime&quot;.tar.gz上传失败&quot;</span><br><span class="line">        fi</span><br><span class="line">    fi</span><br><span class="line">    if [ &quot;$multistation&quot; == yes ] &amp;&amp; [ ! -z &quot;$multisitenumber&quot; ];then</span><br><span class="line">        for((msnb=0;msnb&lt;=&quot;$multisitenumber&quot;;msnb++));do</span><br><span class="line">    `pwd`/./ossutil64 cp -f &quot;/itxg/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;&quot;/&quot;$backuptime&quot;.tar.gz  oss://&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/ &gt;/dev/null</span><br><span class="line">    if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">                echo &quot;阿里云&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$backuptime&quot;.tar.gz上传完成&quot;</span><br><span class="line">            elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">                echo &quot;阿里云&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$backuptime&quot;.tar.gz上传完成&quot;</span><br><span class="line">            else</span><br><span class="line">                echo &quot;阿里云&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$backuptime&quot;.tar.gz上传失败&quot;</span><br><span class="line">            fi</span><br><span class="line">        done</span><br><span class="line">    fi</span><br><span class="line">#阿里云上传结束</span><br><span class="line">#阿里云删除开始</span><br><span class="line">if [ ! -z &quot;$rmdate&quot; ];then</span><br><span class="line">    if [ &quot;$multistation&quot; == no ];then</span><br><span class="line">        `pwd`/./ossutil64 rm oss://&quot;$albucketname&quot;/&quot;$rmbackuptime&quot;.tar.gz &gt;/dev/null</span><br><span class="line">        if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">            echo &quot;阿里云&quot;$albucketname&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">        elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">            echo &quot;阿里云&quot;$albucketname&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">        else</span><br><span class="line">            echo &quot;阿里云&quot;$albucketname&quot;/&quot;$rmbackuptime&quot;.tar.gz删除失败&quot;</span><br><span class="line">        fi</span><br><span class="line">    fi</span><br><span class="line">    if [ &quot;$multistation&quot; == yes ] &amp;&amp; [ ! -z &quot;$multisitenumber&quot; ];then</span><br><span class="line">        for((msnb=0;msnb&lt;=&quot;$multisitenumber&quot;;msnb++));do</span><br><span class="line">           `pwd`/./ossutil64 rm oss://&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz &gt;/dev/null</span><br><span class="line">            if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">                echo &quot;阿里云&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">            elif [ &quot;$?&quot; -eq 255 ];then</span><br><span class="line">                echo &quot;阿里云&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz删除结束&quot;</span><br><span class="line">            else</span><br><span class="line">                echo &quot;阿里云&quot;$albucketname&quot;/&quot;$&#123;multlist[&quot;$msnb&quot;]&#125;&quot;/&quot;$rmbackuptime&quot;.tar.gz删除失败&quot;</span><br><span class="line">            fi</span><br><span class="line">        done</span><br><span class="line">    fi</span><br><span class="line">else</span><br><span class="line">    echo &quot;备份周期为永久，请注意OSS存储使用情况...&quot;</span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line">#阿里云删除结束</span><br><span class="line"></span><br><span class="line">#七牛云开始</span><br><span class="line">#判断是否是七牛云上传</span><br><span class="line">if [ &quot;$enable&quot; == qiniu ];then</span><br><span class="line">    if [ -z &quot;$qnak&quot; ] &amp;&amp; [ -z &quot;$qnsk&quot; ] &amp;&amp; [ -z &quot;$qiniubucket&quot; ];then</span><br><span class="line">        echo &quot;七牛云配置检查失败&quot;</span><br><span class="line">        exit 1</span><br><span class="line">    fi</span><br><span class="line">    if [ ! -f ./qshell-linux-x64 ];then</span><br><span class="line">    wget https://dn-devtools.qbox.me/2.1.5/qshell-linux-x64 &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">    chmod 755 qshell-linux-x64</span><br><span class="line">        echo &quot;七牛云安装完成&quot;</span><br><span class="line">    fi</span><br><span class="line">./qshell-linux-x64 account &quot;$qnak&quot; &quot;$qnsk&quot;</span><br><span class="line">    echo &quot;开始上传...&quot;</span><br><span class="line">./qshell-linux-x64 rput &quot;$qiniubucket&quot; &quot;$backuptime&quot;.tar.gz /itxg/&quot;$backuptime&quot;.tar.gz </span><br><span class="line">    if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">        echo &quot;七牛云上传完成&quot;</span><br><span class="line">    else</span><br><span class="line">        echo &quot;七牛云上传失败&quot;</span><br><span class="line">    fi</span><br><span class="line">#七牛云删除开始</span><br><span class="line">    if [ ! -z &quot;$rmdate&quot; ];then</span><br><span class="line">        ./qshell-linux-x64 delete &quot;$qiniubacket&quot; &quot;$rmbackuptime&quot;.tar.gz &gt; /dev/null</span><br><span class="line">         if [ &quot;$?&quot; -eq 0 ];then</span><br><span class="line">                echo &quot;七牛云删除结束&quot;</span><br><span class="line">        else</span><br><span class="line">                echo &quot;七牛云删除失败&quot;</span><br><span class="line">         fi</span><br><span class="line">     else</span><br><span class="line">        echo &quot;备份周期为永久，请注意七牛存储使用情况...&quot;</span><br><span class="line">     fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;腾讯COS 阿里OSS 七牛 备份脚本&lt;/p&gt;
&lt;p&gt;#20171017:代码重构,支持将网站上传到腾讯云COS、阿里云OSS、七牛云存储.(v0.1.0)&lt;/p&gt;
&lt;p&gt;#20171018:修复cos.conf判断错误.(v0.1.1)&lt;/p&gt;
&lt;p&gt;#20171023:增加阿里云多站点备份.(v0.1.2)&lt;/p&gt;
&lt;p&gt;#20171025:增加腾讯云多站点备份.(v0.1.3)&lt;/p&gt;
&lt;p&gt;#20171029:修复阿里云下crontab不能正常上传bug(v0.1.4)&lt;/p&gt;
&lt;p&gt;#20171030:修复阿里云/腾讯云修改key后，备份报错问题。移动pip判断到相应位置（v0.1.5）&lt;/p&gt;
&lt;p&gt;#20171202:修复腾讯云与阿里云周期删除失败BUG(v0.1.6)&lt;/p&gt;
&lt;p&gt;#20171204:修复mysqldump某些小bug.(v0.1.7)&lt;/p&gt;
&lt;p&gt;#20180112:增加更新源地址、修改小bug(v0.1.8)&lt;/p&gt;
&lt;p&gt;#20180524:更新腾讯cos上传。(v0.1.9)&lt;/p&gt;
&lt;p&gt;#20180603:日常修复&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/java/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>spring 容器启动执行</title>
    <link href="https://www.wuxinvip.com/2018/08/06/exception/exception-3/"/>
    <id>https://www.wuxinvip.com/2018/08/06/exception/exception-3/</id>
    <published>2018-08-06T00:00:00.000Z</published>
    <updated>2018-10-19T03:22:38.837Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题背景："><a href="#问题背景：" class="headerlink" title="问题背景："></a>问题背景：</h2><p>容器启动执行后立刻执行改代码 、常用来初始化redis数据、等等</p><h2 id="方法一-spring"><a href="#方法一-spring" class="headerlink" title="方法一 spring"></a>方法一 spring</h2><p>扫描执行PostConstruct注解方法</p><p>spring.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.csdn.uc.init"</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 容器启动后加载redis</span></span><br><span class="line"><span class="comment"> * Created by huoyan403 on 3/22/2017.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddressToRedisInit</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger logger = LoggerFactory.getLogger(AddressToRedisInit.class);</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AreasDao areasDao;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisClient redisClient;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    启动开关</span></span><br><span class="line"><span class="comment">//    @PostConstruct</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">AddressToRedisInit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//子线程执行初始化</span></span><br><span class="line">        AddressToRedisThread addressToRedisThread = <span class="keyword">new</span> AddressToRedisThread();</span><br><span class="line">        addressToRedisThread.setRedisClient(redisClient);</span><br><span class="line">        addressToRedisThread.setAreasDao(areasDao);</span><br><span class="line">        addressToRedisThread.run();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="方法二-springboot"><a href="#方法二-springboot" class="headerlink" title="方法二 springboot"></a>方法二 springboot</h2><p>实现 CommandLineRunner 接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * description</span></span><br><span class="line"><span class="comment"> * 启动后执行 规划每个doc文档存储设置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> lishengkai</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018-03-28 16:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InitDocIndexSetting</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    ElasticsearchTemplate elasticsearchOperations;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    BeanPostProcessor beanPostProcessor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">        Map&lt;String, Object&gt; map = beanPostProcessor.map;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Object o : map.values()) &#123;</span><br><span class="line">            elasticsearchOperations.createIndexWithSettings(o.getClass());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;问题背景：&quot;&gt;&lt;a href=&quot;#问题背景：&quot; class=&quot;headerlink&quot; title=&quot;问题背景：&quot;&gt;&lt;/a&gt;问题背景：&lt;/h2&gt;&lt;p&gt;容器启动执行后立刻执行改代码 、常用来初始化redis数据、等等&lt;/p&gt;
&lt;h2 id=&quot;方法一-spring&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="exception" scheme="https://www.wuxinvip.com/categories/java/exception/"/>
    
    
      <category term="exception" scheme="https://www.wuxinvip.com/tags/exception/"/>
    
  </entry>
  
  <entry>
    <title>破解密码常见的几种方式</title>
    <link href="https://www.wuxinvip.com/2018/07/13/encryption/password-cracked/"/>
    <id>https://www.wuxinvip.com/2018/07/13/encryption/password-cracked/</id>
    <published>2018-07-13T00:00:00.000Z</published>
    <updated>2018-10-15T08:26:26.838Z</updated>
    
    <content type="html"><![CDATA[<h3 id="暴力穷举"><a href="#暴力穷举" class="headerlink" title="暴力穷举"></a>暴力穷举</h3><pre><code>使用字典生成常用密码序列进行密码尝试</code></pre><h3 id="击键记录"><a href="#击键记录" class="headerlink" title="击键记录"></a>击键记录</h3><pre><code>使用密码病毒获取输入工具点击操作</code></pre><h3 id="屏幕记录"><a href="#屏幕记录" class="headerlink" title="屏幕记录"></a>屏幕记录</h3><pre><code>使用密码病毒获取屏幕点击记录</code></pre><h3 id="网络钓鱼"><a href="#网络钓鱼" class="headerlink" title="网络钓鱼"></a>网络钓鱼</h3><pre><code>使用伪造站点获取用户密码</code></pre><h3 id="嗅探器【sniffer】"><a href="#嗅探器【sniffer】" class="headerlink" title="嗅探器【sniffer】"></a>嗅探器【sniffer】</h3><pre><code>使用网络监听工具获取获取网络消息</code></pre><a id="more"></a><h3 id="系统漏洞"><a href="#系统漏洞" class="headerlink" title="系统漏洞"></a>系统漏洞</h3><pre><code>使用系统漏洞进行shell操作、然后在进行以上获取密码操作、如：键盘、屏幕工具录入、或者文件下载、直接查看文件密码等</code></pre><h3 id="远程攻击"><a href="#远程攻击" class="headerlink" title="远程攻击"></a>远程攻击</h3><pre><code>分为两种：远程入侵和破坏性攻击远程获取目标主机shell 进行监控、文件download等dos、ddos、等等</code></pre><h3 id="不良习惯"><a href="#不良习惯" class="headerlink" title="不良习惯"></a>不良习惯</h3><pre><code>多网站使用同一密码使用简单密码使用常用单词、长期不更换密码</code></pre><h3 id="绕过破解"><a href="#绕过破解" class="headerlink" title="绕过破解"></a>绕过破解</h3><pre><code>常见：拦截cookie、session攻击等</code></pre><h3 id="密码心理学"><a href="#密码心理学" class="headerlink" title="密码心理学"></a>密码心理学</h3><pre><code>社会工程学破解密码   简单来讲就是、站在对方的角度上去设置密码、然后猜解密码、   一个密码会跟人生经历有很大关系、   一个人也不会用没碰到过的、没见过的东西作为密码   举几个例子：   某公司密码 可能是 公司大写或者小写+当年年份   某家路由器密码可能是：他或者他老婆姓名【姓氏】+生日、或者常见数字   破结果一个wifi 跑字典出来是 11121314  12131415    你觉得很安全 谁会想到我这么个序列作为密码、其实字典就是一个小时的功夫</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;暴力穷举&quot;&gt;&lt;a href=&quot;#暴力穷举&quot; class=&quot;headerlink&quot; title=&quot;暴力穷举&quot;&gt;&lt;/a&gt;暴力穷举&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;使用字典生成常用密码序列进行密码尝试
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;击键记录&quot;&gt;&lt;a href=&quot;#击键记录&quot; class=&quot;headerlink&quot; title=&quot;击键记录&quot;&gt;&lt;/a&gt;击键记录&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;使用密码病毒获取输入工具点击操作
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;屏幕记录&quot;&gt;&lt;a href=&quot;#屏幕记录&quot; class=&quot;headerlink&quot; title=&quot;屏幕记录&quot;&gt;&lt;/a&gt;屏幕记录&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;使用密码病毒获取屏幕点击记录
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;网络钓鱼&quot;&gt;&lt;a href=&quot;#网络钓鱼&quot; class=&quot;headerlink&quot; title=&quot;网络钓鱼&quot;&gt;&lt;/a&gt;网络钓鱼&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;使用伪造站点获取用户密码
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;嗅探器【sniffer】&quot;&gt;&lt;a href=&quot;#嗅探器【sniffer】&quot; class=&quot;headerlink&quot; title=&quot;嗅探器【sniffer】&quot;&gt;&lt;/a&gt;嗅探器【sniffer】&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;使用网络监听工具获取获取网络消息
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="password" scheme="https://www.wuxinvip.com/categories/java/password/"/>
    
    
      <category term="密码加密" scheme="https://www.wuxinvip.com/tags/%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>Hash环、一致性hash</title>
    <link href="https://www.wuxinvip.com/2018/07/10/essay/hash/"/>
    <id>https://www.wuxinvip.com/2018/07/10/essay/hash/</id>
    <published>2018-07-10T00:00:00.000Z</published>
    <updated>2018-10-15T08:31:42.824Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/img/essay/img/hash环.png" alt="图片">hash环、一致性hash</p><p><strong>Hash环</strong></p><p>上面说的Hash函数，只经过了1次hash，即把key hash到对应的机器编号。<br>而Hash环有2次Hash： </p><ul><li>（1）把所有机器编号hash到这个环上 </li><li>（2）把key也hash到这个环上。然后在这个环上进行匹配，看这个key和哪台机器匹配。</li></ul><p>具体来讲，如下：</p><pre><code>假定有这样一个Hash函数，其值空间为（0到2的32次方-1) ，也就是说，其hash值是个32位无整型数字 ，这些数字组成一个环。然后，先对机器进行hash(比如根据机器的ip)，算出每台机器在这个环上的位置； 再对key进行hash，算出该key在环上的位置，然后从这个位置往前走，遇到的第一台机器就是该key对应的机器，就把该(key, value) 存储到该机器上。首先计算出每台Cache服务器在环上的位置（图中的大圆圈）；然后每来一个(key, value)，计算出在环上的位置（图中的小圆圈），然后顺时针走，遇到的第1个机器，就是其要存储的机器。这里的关键点是：当你增加/减少机器时，其他机器在环上的位置并不会发生改变。这样只有增加的那台机器、或者减少的那台机器附近的数据会失效，其他机器上的数据都还是有效的。</code></pre><a id="more"></a><p><strong>数据倾斜问题</strong></p><pre><code>当你机器不多的时候，很可能出现几台机器在环上面贴的很近，不是在环上均匀分布。这将会导致大部分数据，都会集中在某1台机器上。为了解决这个问题，可以引入“虚拟机器”的概念，也就是说：1台机器，我在环上面计算出多个位置。怎么弄呢？ 假设用机器的ip来hash，我可以在ip后面加上几个编号, ip_1, ip_2, ip_3, .. 把1台物理机器生个多个虚拟机器的编号。数据首先映射到“虚拟机器上”，再从“虚拟机器”映射到物理机器上。因为虚拟机器可以很多，在环上面均匀分布，从而保证数据均匀分布到物理机器上面。</code></pre><p><strong>ZK的引入</strong></p><pre><code>上面我们提到了服务器的机器增加、减少，问题是客户端怎么知道呢？一种笨办法就是手动的，当服务器机器增加、减少时候，重新配置客户端，重启客户端。另外一种，就是引入ZK，服务器的节点列表注册到ZK上面，客户端监听ZK。发现结点数发生变化，自动更新自己的配置。当然，不用ZK，用一个其他的中心结点，只要能实现这种更改的通知，也是可以的。</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/img/essay/img/hash环.png&quot; alt=&quot;图片&quot;&gt;hash环、一致性hash&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Hash环&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;上面说的Hash函数，只经过了1次hash，即把key hash到对应的机器编号。&lt;br&gt;而Hash环有2次Hash： &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;（1）把所有机器编号hash到这个环上 &lt;/li&gt;
&lt;li&gt;（2）把key也hash到这个环上。然后在这个环上进行匹配，看这个key和哪台机器匹配。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体来讲，如下：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;假定有这样一个Hash函数，其值空间为（0到2的32次方-1) ，也就是说，其hash值是个32位无整型数字 ，这些数字组成一个环。
然后，先对机器进行hash(比如根据机器的ip)，算出每台机器在这个环上的位置； 再对key进行hash，算出该key在环上的位置，
然后从这个位置往前走，遇到的第一台机器就是该key对应的机器，就把该(key, value) 存储到该机器上。

首先计算出每台Cache服务器在环上的位置（图中的大圆圈）；然后每来一个(key, value)，计算出在环上的位置（图中的小圆圈），
然后顺时针走，遇到的第1个机器，就是其要存储的机器。

这里的关键点是：当你增加/减少机器时，其他机器在环上的位置并不会发生改变。这样只有增加的那台机器、
或者减少的那台机器附近的数据会失效，其他机器上的数据都还是有效的。
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/java/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>随便写点</title>
    <link href="https://www.wuxinvip.com/2018/07/06/essay/essay-2/"/>
    <id>https://www.wuxinvip.com/2018/07/06/essay/essay-2/</id>
    <published>2018-07-06T00:00:00.000Z</published>
    <updated>2018-10-15T08:31:42.979Z</updated>
    
    <content type="html"><![CDATA[<p><strong>spring cloud 刚刚上了生产</strong></p><p><strong>service mesh、事件驱动架构、来了</strong></p><p><strong>rest刚刚成为普遍api规范 GraphQL来了</strong></p><p><strong>更NB的是 Netflix 停止维护了eureka、出了个 “混沌工程”</strong></p><a id="more"></a><p>大公司的技术就像是生产苹果的、小公司的技术就是跟着屁股后头捡捡苹果核儿、、、</p><p>大公司吃完了苹果、吃核桃、换着花样吃、小公司跟后头就吃各种核儿、、哈哈、所以一定要进大公司耍耍去、若能玩顶尖的技术、岂不妙哉？</p><p><a href="http://www.infoq.com/cn/articles/5-microservices-trends-to-watch-in-2018" target="_blank" rel="noopener">infoq地址</a></p><p>技术更迭的真快、现在还有精力去学习、以后也就看看虎形而已了、</p><p>谁说程序员的工资好挣的、一不留神就失业没人要的工作、惶惶度日、不会学习的程序员就是温水的青蛙、安乐死…</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;spring cloud 刚刚上了生产&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;service mesh、事件驱动架构、来了&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;rest刚刚成为普遍api规范 GraphQL来了&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;更NB的是 Netflix 停止维护了eureka、出了个 “混沌工程”&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/java/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>ftp部署</title>
    <link href="https://www.wuxinvip.com/2018/07/04/service-deploy/ftp/"/>
    <id>https://www.wuxinvip.com/2018/07/04/service-deploy/ftp/</id>
    <published>2018-07-04T00:00:00.000Z</published>
    <updated>2018-10-15T08:38:38.660Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">1、首先服务器要安装ftp软件,查看是否已经安装ftp软件下：</span><br><span class="line">   #which vsftpd</span><br><span class="line">  如果看到有vsftpd的目录说明服务器已经安装了ftp软件</span><br><span class="line"></span><br><span class="line">2、查看ftp 服务器状态     </span><br><span class="line">   #service vsftpd status</span><br><span class="line"></span><br><span class="line">3、如果没有安装，查询是否有可用的rpm安装包</span><br><span class="line"></span><br><span class="line">[root@centos ~]# yum list |grep vsftpd</span><br><span class="line"></span><br><span class="line">vsftpd.i686                                 2.2.2-21.el6                 base</span><br><span class="line"></span><br><span class="line">4、安装vsftpd服务</span><br><span class="line"></span><br><span class="line">[root@centos ~]# yum install -y vsftpd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">5. 启动ftp服务器     </span><br><span class="line">   #service vsftpd start</span><br><span class="line"></span><br><span class="line">6. 重启ftp服务器 </span><br><span class="line">   #service vsftpd restart</span><br><span class="line"></span><br><span class="line">7. 查看服务有没有启动</span><br><span class="line"> [root@centos ~]# netstat -lnp  </span><br><span class="line"></span><br><span class="line">tcp        0      0 0.0.0.0:21        0.0.0.0:*       LISTEN      1491/vsftpd</span><br><span class="line"></span><br><span class="line">   如果看到以上信息，证明ftp服务已经开启。</span><br><span class="line"></span><br><span class="line">8.如果需要开启root用户的ftp权限要修改以下两个文件</span><br><span class="line">  #vi /etc/vsftpd/ftpusers中注释掉root</span><br><span class="line">  #vi /etc/vsftpd/user_list中也注释掉root</span><br><span class="line">  然后重新启动ftp服务</span><br><span class="line"></span><br><span class="line">[root@centos ~]# service vsftpd restart</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class
      
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="service-deploy" scheme="https://www.wuxinvip.com/categories/java/service-deploy/"/>
    
    
      <category term="服务搭建" scheme="https://www.wuxinvip.com/tags/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>区块链 概述、开源</title>
    <link href="https://www.wuxinvip.com/2018/07/03/block-chain/block-chain-3/"/>
    <id>https://www.wuxinvip.com/2018/07/03/block-chain/block-chain-3/</id>
    <published>2018-07-03T00:00:00.000Z</published>
    <updated>2018-10-15T05:53:58.242Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://gitee.com/null_071_4607/mastering-blockchain" target="_blank" rel="noopener">开源地址</a></p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>这是区块链相关知识的一个梳理，旨在真正的get the skill并方便他人。</p><p>知识可分为两类:</p><ul><li><p><strong>逻辑体系型的</strong></p><p>需要思考，把各种概念连起来，或归纳，或演绎，最后，在大脑中形成一种逻辑网状结构。比如可计算理论，分布式系统，解释器等。</p></li><li><p><strong>使用操作型的</strong></p><p>基本不需要思考，只需要看一下目录，要用的时候参考一下手册即可。比如linux的各种命令，go,python的一些奇怪语法,elastic-search dsl的使用。</p></li></ul><p>第一类知识是比较有意思的，值得多花时间，这种”逻辑网状结构”最后会形成一个”打通”的集群，可能会让你的大脑产生一些有意思的想法；而第二类，千万别花太多时间，因为很有可能让你产生消极，厌学，忧郁等情绪，而你越努力，就越可能”斯德哥尔摩”。</p><p>区块链知识可以归为第一类。</p><p>研究一个东西，需要知道它包含哪些概念，我把它分为两类:</p><a id="more"></a><ul><li><p><strong>自描述概念</strong></p><p>不依赖其他概念的概念</p></li><li><p><strong>他描述概念</strong></p><p>需要依赖其他概念的概念</p></li></ul><p>显然，这是一个递归的概念，可以用形式化的语言来描述，你也可以哲学的扯一大堆，但这不是我的兴趣。</p><p>下面的章节试图用<em>原理，逻辑，应用</em>的方式把区块链相关的概念连起来，形成”网状结构“，所有概念可在<a href="/glossary.md"><strong>Glossary(词汇表)</strong></a>里查看，你可以先浏览一下，想一想他们之间的关系，再来看下面的章节。当然，最后，每个人的”网状结构”可能都不同，毕竟除了”同一性”，还有”差异性”。但，原则是一致的，有了”网状结构”，在添加新的”概念”时，我们就可以审视其在”网”中的位置，也可以思考这张”网”还缺少什么，有什么不完美之处，是不是还有”孤岛”等问题，进而有可能去完善它。</p><p>而所有的学习，无非就是完善那张网，并尽可能的正交。</p><p>这样，垃圾少了，人也轻松了。</p><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><h2 id="1-KV-key-value"><a href="#1-KV-key-value" class="headerlink" title="1. KV(key value)"></a>1. KV(key value)</h2><blockquote><p>There are only two hard things in Computer Science: cache invalidation and <em><strong>naming things</strong></em>.</p><p>– Phil Karlton</p></blockquote><p>为什么名字那么重要？因为有了名字，这个名字才能够被引用，才能够谈论其属性。</p><p>就是说，你要谈论一个人，首先得有这个人，这有点废话，但却是原理性的，</p><p>名字意味着什么？</p><p>图灵机里面的head,没错，只有你找到head,才知道当前的(input,state),才能往下走。</p><p>汇编语言如果没有address,存储和操作也没法进行;各种编程语言的变量说的也是这个事情。</p><p>而kv中的k其实就是名字，v在不同的场合可以有不同的含义。</p><p>有了kv,就可以构造所有的数据结构，因为从递归的角度，v也可以是kv。</p><p>这个跟blockchain有关系吗？</p><h2 id="2-Asset-资产"><a href="#2-Asset-资产" class="headerlink" title="2. Asset(资产)"></a>2. Asset(资产)</h2><p>在digital asset的世界，address上的数字就是资产。显然，address是key,数字是value。<br>理解这一点很重要，blockchain主要主要的应用场景就是数字资产。</p><p>不太精确的分类:</p><ul><li><p>资产数字化</p><p>相当于一个凭证，其有现实的对应物，比如股票，其实对应公司的投票分红等权利。</p></li><li><p>数字资产化</p><p>没有现实的对应物，但是可以换成现实中的钱，比如比特币。</p></li></ul><h2 id="3-Transaction-交易"><a href="#3-Transaction-交易" class="headerlink" title="3. Transaction(交易)"></a>3. Transaction(交易)</h2><p>而address上的数字的变更，也就是kv的变化，对应着资产的转移，就是<strong>交易(transaction)</strong>。</p><p>如果能把所有KV的变化按顺序记录起来，就达到了<strong>可溯源</strong>的目的，这跟kafka里面的stream和table的关系是一样的。</p><p><img src="/img/block-chain/img/stream-table.png" alt="图片"></p><p>可以看出，我们可以根据交易记录，来得到目前每个地址的资产；而资产的变化必须以目前的资产为前提。</p><p>事实上，这个保证是consensus mechanism(共识机制)里面的一个检查点。</p><h2 id="4-Currency-issuance-货币发行"><a href="#4-Currency-issuance-货币发行" class="headerlink" title="4. Currency issuance(货币发行)"></a>4. Currency issuance(货币发行)</h2><p>那么资产从哪里来呢？</p><p>上帝说，要有光就有了光。</p><p>这里我们不去讨论历史，只从现实的货币发行制度以及比特币”怼”的方式阐述。</p><h3 id="4-1-美元的发行流程"><a href="#4-1-美元的发行流程" class="headerlink" title="4.1 美元的发行流程"></a>4.1 美元的发行流程</h3><p><img src="/img/block-chain/img/how-money-is-created.png" alt="图片"></p><ul><li>没钱花了，国会和总统授权财政部,发行国债</li><li>国债大部分卖给中国和日本，有钱了</li><li>又没钱花了，中国日本也不要，通过银行卖给美联储，有钱了，这个钱是凭空出来的，<strong>Currency issuance(货币发行)</strong> works</li><li>债券是有利率的，就是说偿还债务时需要比借的钱要多一些</li><li>而发行的钱=借出的钱，这多一些的钱从哪里来呢？</li><li>唯一的办法就是继续借，也就是继续发行，否则这个系统就没法运转下去</li></ul><p>这个系统的必然结果是:</p><ul><li>inflation(通货膨胀)</li><li>在经济增长对货币需求量增加的情况下，债务只可能越来越大</li><li>但是，只要有信心，这个系统就可以一直运行下去</li><li>并且，似乎其还有一个作用，生产力高的人更容易获得金钱</li><li>因为如果你赚的钱如果不足以覆盖你使用钱的成本，你就会被淘汰</li><li>这个系统不完美，但支撑了资本主义的高速发展</li><li>似乎繁荣,萧条的周期跟这个系统有很大的关系</li><li>它还在高速运转</li></ul><h3 id="4-2-比特币的发行流程"><a href="#4-2-比特币的发行流程" class="headerlink" title="4.2 比特币的发行流程"></a>4.2 比特币的发行流程</h3><p>比特币的创世区块，上面有一句话:</p><blockquote><p>“The Times 03/Jan/2009 Chancellor on brink of second bailout for banks”<br>“财政大臣站在第二次救助银行的边缘”</p></blockquote><p>这句话是当天泰晤士报头版的标题。中本聪将它写进创世区块，不但清晰地展示着比特币的诞生时间，还表达着对旧体系的嘲讽。</p><p>银行家的贪婪，政府的监守自盗，大而不倒的把戏，已经有太多的批评，这里不再赘述。</p><p>试验性质的比特币，试图回答两个问题:</p><ul><li>谁该拥有货币发行权</li><li>货币发行量由什么决定</li></ul><p><img src="/img/block-chain/img/bitcoin-issuance.png" alt="图片"></p><p>比特币的答案是:</p><ul><li>众生平等，你有我有全都有</li><li>货币发行量预期固定，每4年减半</li></ul><p><img src="/img/block-chain/img/bitcoin-supply-over-block-height.png" alt="图片"></p><p>这里有太多话题性的东西:</p><ul><li>依靠算力真的能做到去中心化？公平？民主？</li><li>指数衰减的货币真的有利于经济发展？</li><li>这种越早加入网络越容易拥有更多资产的机制是传销吗?</li></ul><p>这些东西都可以去讨论。</p><p>从技术的角度，这里对应着数据的记录和计算的机制，在 <strong>distributed network(分布式网络)</strong> 的环境下，就是所谓的 <strong>consensus mechanism(共识机制)</strong>。</p><h2 id="5-Distributed-network-分布式网络"><a href="#5-Distributed-network-分布式网络" class="headerlink" title="5. Distributed network(分布式网络)"></a>5. Distributed network(分布式网络)</h2><p><strong>一群人</strong> <strong>合作</strong> 来 <strong>搞事情</strong>，就形成了网络。</p><p>这里的人叫node(节点),搞事情的过程中，一个不行了，另一个顶上，就叫failover。</p><p>常见的搞事情，比如LB,replica storage等。</p><p>这里的合作遵循的规则就叫 <strong>consensus mechanism(共识机制)</strong>。</p><p>如果这群人都很聪明，并且互相信任，事情会简单很多。</p><p>很多的系统都是以此为假设进行设计的。</p><p>区块链的假设是:节点之间是互相不信任的。</p><p>区块链要干的事情就是:设计一个能让互相<strong>不信任</strong>的节点都<strong>信任</strong>的机制,然后大家可以愉快的一起搞事情。</p><h2 id="6-Consensus-mechanism-共识机制"><a href="#6-Consensus-mechanism-共识机制" class="headerlink" title="6. Consensus mechanism(共识机制)"></a>6. <strong>Consensus mechanism(共识机制)</strong></h2><p>在跟资产相关的世界里，这个机制需要做到:</p><ul><li>确保某个address的数字只能由拥有它的人来操作</li><li>交易记录无法篡改</li><li>交易记录可追溯</li></ul><p>比特币也是围绕这几个问题展开的，当然它还干了其他几件牛B的事情:</p><ul><li>在去中心化的条件下解决spend twice的问题</li><li>防止通货膨胀的货币发行机制</li></ul><p><strong>完全的去中心化</strong>对区块链来说并不是一个必选项，就大部分的商业活动看，去中心化反而会增加很多不必要的复杂性。</p><p>发币也不是必选项。</p><p>我们先来看如何做到<em>确保某个address的数字只能由拥有它的人来操作</em>，<em>交易记录无法篡改</em>，<em>交易记录可追溯</em></p><h2 id="7-Cryptography-密码学"><a href="#7-Cryptography-密码学" class="headerlink" title="7. Cryptography(密码学)"></a>7. Cryptography(密码学)</h2><h3 id="7-1-Asymmetric-cryptography-非对称加密"><a href="#7-1-Asymmetric-cryptography-非对称加密" class="headerlink" title="7.1 Asymmetric cryptography(非对称加密)"></a>7.1 Asymmetric cryptography(非对称加密)</h3><ul><li><p>公钥加密，只有对应的私钥能够解密</p><p>加密货币中的address对应公钥(bitcoin的实现里面，为了隐藏身份，对public key做了hash),对该address的资产进行操作的唯一条件是:拥有对应的私钥。</p></li><li><p>私钥签名，公钥能够验证是不是对应的私钥签名的</p><p>把公钥和签名广播出去，nodes可以验证交易的有效性。</p></li><li><p>篡改无效<br>签名的信息确实是签名者本人的意愿，nodes能对此进行确认。</p></li><li><p>PKI中利用CA颁发证书的方式来确定网络中的身份</p><p>对于公有链，peer可以自由加入，退出，并不需要一个中心化的CA来对身份进行认证;联盟链，peer的身份和权限可利用该机制来实现，比如hyperledger中的msp</p><p>比特币的交易:</p><p><img src="/img/block-chain/img/spending-bitcoin.png" alt="图片"></p></li></ul><p>这就回答了，如何做到<strong>确保某个address的数字只能由拥有它的人来操作</strong>的问题。</p><h3 id="7-2-SHA-Secure-Hash-Algorithm"><a href="#7-2-SHA-Secure-Hash-Algorithm" class="headerlink" title="7.2 SHA(Secure Hash Algorithm)"></a>7.2 SHA(Secure Hash Algorithm)</h3><ul><li>任意长度的数据-&gt;固定长度的数据</li><li>相同input-&gt;相同output</li><li>冲突几率很小,改变input的一个字符，output都会不同</li><li>验证hash value很容易，反推很难<blockquote><p>计算一个任意长度input的hash value非常快，但是给出一个output，要算出input却非常难，目前只有遍历试验的方法。Bitcoin中会根据目前的平均出块速度，给出一个ouput,谁先构造出hash(input)小于该output的数据，谁就拥有当前出块的权利。这个遍历试验的过程就叫做<strong>挖矿(mining)</strong>，当某个peer找到符合条件的input,它会广播给其他peer,其他peer对其进行验证，这个遍历试验并向大家证明的过程，就叫做<strong>POW</strong>;而每一次出块会有一定的奖励，这个奖励是比特币产生(coinbase)的唯一方式,而区块中确认交易的output和input的差额就是给记账peer的<strong>手续费(transaction fee)</strong>。</p></blockquote></li></ul><p>而做到交易记录<strong>无法篡改</strong>和<strong>可追溯</strong>,还需要block chain这种数据结构。</p><h2 id="8-Hash-chain-amp-amp-Block-chain"><a href="#8-Hash-chain-amp-amp-Block-chain" class="headerlink" title="8. Hash chain &amp;&amp; Block chain"></a>8. Hash chain &amp;&amp; Block chain</h2><p>block chain其实是一种特殊的hash chain。</p><p><img src="/img/block-chain/img/data-structure.png" alt="图片"></p><p>首先，数据是存在分布式网络的各个节点中的，这些节点有可能有些是坏人，”不可篡改“是指整个分布式网络对外提供的block chain data是”不可篡改”的。恶意节点的篡改，得不到承认，并且不影响对外的服务。</p><p>比特币中的好人们商量好:我们只认best block chain,就是符合规则(consensus mechanism)并且最长的那条链。</p><p>下面结合block chain的具体结构和相应的consensus mechanism来说明,why”不可篡改”?</p><p>block chain数据结构的特点是:</p><ul><li>链式存储，从任何一个block可以找到其前面的block</li><li>且每一个block(Genesis block除外)有上一个block的hash</li></ul><p>由于hash的”<strong>冲突几率很小,改变input的一个字符，output都会不同</strong>“的特性，改变一个区块的数据将会导致后面区块的hash对不上，也许你会说,”改变后面block的hash不就行了？”，但是，由于后面的block也改变了，那么其hash也改变了，而一个block有效的一个必要条件:</p><blockquote><p>hash(block)&lt;根据当前平均出块速度计算出的target</p></blockquote><p>系统会计算当前1小时的平均出块速度，动态调整difficulty,得出一个target，而一个有效的区块，不但要拥有前一个区块的hash,还必须计算出一个nonce,使得当前block的hash值小于该target。</p><p>这意味着，改变任何一个block,并且想跟上目前最长的链，需要重做生成后面所有block的工作量。</p><p>而这是非常难的。</p><p>理论上，跟所有honest peers竞争，掌握51%以上的算力是有可能对数据进行篡改的，但是，假如你的算力真的非常强，你可以把交易都篡改了，这是否能让你的利益最大化呢？首先，这个篡改肯定会被发现，当honest peers发现很长的不匹配block时，会发出告警，然后用户也会知道，这会导致什么结果呢？一个必然的结果是：系统无法被人信任，价值归0。而拥有强大的算力，并且选择做honest peer，你会获得不错的稳定收益;这就导致强大的算力更倾向于做honest peer,而拥有越多强大算力的honest peer,整个系统就越难被攻破。这就是人性，这就是市场。</p><p>所以，比特币里面不可篡改的保证靠的是:<strong>POW</strong> + <strong>block chain存储</strong> + <strong>激励措施的博弈</strong></p><p>但是，这里一个很致命的问题是:POW太浪费电了……</p><p>那么，有没有既不浪费电又能够保证”不可篡改”的办法呢？</p><p>至少，在”去中心化”的条件下是很难实现的。</p><ul><li><p>PoS(Proof of Stake)</p><p>相当于越有钱，越有话语权(挖矿或者确认交易)，意思是越有钱越想维持这个系统，越不会想破坏这个系统，从而数据也是”不可篡改的”;但是，这个将导致一个很明显的结果:有钱的会越来越有钱。越来越集中化。</p></li><li><p>PBFT(Practical Byzantine Fault Tolerance )?</p><p>意思是n个peers互相交换对new block的看法，然后honest peer取majority(n-1)的看法来决定new block是否合法,可以证明，只要坏人不超过 (n-1) / 3 ，整个系统就是按honest peer来运行的。</p><p>“不可篡改”的保证在于:你需要majority的同意(一般通过签名来保证)，而少数恶意节点显然做不到。</p></li></ul><p>为了交易速度和省电，目前很多加密货币采用了Pos;而PBFT由于需要知道有多少其他peers并能识别其签名，一般适合私有链，联盟链。</p><p>需要注意的是，区块链里面说的共识算法，跟一般分布式系统里面的paxos,raft等一致性协议相比,除了关注网络本身的失效外，还需要对数据的安全性，合约的有效性做很多的工作。</p><h2 id="9-Blockchain-区块链"><a href="#9-Blockchain-区块链" class="headerlink" title="9. Blockchain(区块链)"></a>9. Blockchain(区块链)</h2><p>所以，其实给区块链下一个定义不是一件容易的事情。</p><p>wikipedia:</p><blockquote><p>A blockchain, originally block chain, is a continuously growing list of records, called blocks, which are linked and secured using cryptography. Each block typically contains a cryptographic hash of the previous block, a timestamp and transaction data.</p></blockquote><p>investopedia:</p><blockquote><p>A blockchain is a digitized, decentralized, public ledger of all cryptocurrency transactions. Constantly growing as ‘completed’ blocks (the most recent transactions) are recorded and added to it in chronological order, it allows market participants to keep track of digital currency transactions without central recordkeeping. Each node (a computer connected to the network) gets a copy of the blockchain, which is downloaded automatically.</p></blockquote><p>百度百科:</p><blockquote><p>狭义来讲，区块链是一种按照时间顺序将数据区块以顺序相连的方式组合成的一种链式数据结构， 并以密码学方式保证的不可篡改和不可伪造的分布式账本。</p><p>广义来讲，区块链技术是利用块链式数据结构来验证与存储数据、利用分布式节点共识算法来生成和更新数据、利用密码学的方式保证数据传输和访问的安全、利用由自动化脚本代码组成的智能合约来编程和操作数据的一种全新的分布式基础架构与计算方式。</p></blockquote><p>感觉每一个说得都很有道理,也确实都很有道理。</p><p>不管如何，上面说的原理部分，基本上就是区块链最核心的部分，虽然各种具体实现有很多细节的不同，但原理就这些了。</p><p>而根据区块链发展的历史，<strong>智能合约</strong>的引入就进入了所谓的区块链2.0时代。</p><p>连接移动端,Iot就进入了所谓的区块链3.0时代。</p><p>是不是有种被时代抛弃的感觉？劳资还在守着java当饭碗，侬都区块链3.0了？</p><h2 id="10-Smart-contract-智能合约"><a href="#10-Smart-contract-智能合约" class="headerlink" title="10. Smart contract(智能合约)"></a>10. Smart contract(智能合约)</h2><h2 id="10-1-比特币的脚本语言"><a href="#10-1-比特币的脚本语言" class="headerlink" title="10.1 比特币的脚本语言"></a>10.1 比特币的脚本语言</h2><p>其实代表区块链1.0的比特币也没有那么不智能，我们来看其交易验证的逻辑:</p><p><img src="/img/block-chain/img/bitcoin-transaction-propagation.png" alt="图片"></p><p>交易必须遵守以下规则:</p><ul><li>任何一个input必须来自于某一个output</li><li>一笔交易，可以有多个input,多个output</li><li>为了方便，input被spend后就作废了，如果有change(找零)，也体现在output中</li><li>可以推断，这科树的叶子记录的address对应的资产就是当前整个比特币的资产状况</li><li>叶子上的output也叫UTXO(Unspent Transaction Output)</li><li>有效的input必须来自UTXO</li><li>UXTO里面有public key的hash,对其操作必须提供private key签名和public key</li><li>网络节点根据共识机制维护公共账本,这实际上解决了spend twice的问题</li></ul><p>这里的验证逻辑就是contract(合约)。</p><p><img src="/img/block-chain/img/signing-output-to-spend.png" alt="图片"></p><ul><li>Public script包含了UTXO对应的Publick key的hash</li><li>Signature script包含了private key的签名以及public key</li><li>被签名的信息包含下一个UXTO的Public script和amount</li></ul><p>这里的script是一种非图灵完备的stack-based的脚本语言。</p><p>Public script：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OP_DUP OP_HASH160 &lt;PubkeyHash&gt; OP_EQUALVERIFY OP_CHECKSIG</span><br></pre></td></tr></table></figure></p><p>Signature script<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Sig&gt; &lt;PubKey&gt; OP_DUP OP_HASH160 &lt;PubkeyHash&gt; OP_EQUALVERIFY OP_CHECKSIG</span><br></pre></td></tr></table></figure></p><p>其执行过程如下:</p><p><img src="/img/block-chain/img/validate-stack.png" alt="图片"></p><p>每个节点都会对收到的transaction自动执行以上的验证逻辑。</p><p>而如果支持图灵完备语言来编写合约，并可动态部署，就叫<strong>智能合约</strong>。</p><h2 id="10-2-Hyperledger-fabric的chaincode"><a href="#10-2-Hyperledger-fabric的chaincode" class="headerlink" title="10.2 Hyperledger-fabric的chaincode"></a>10.2 Hyperledger-fabric的chaincode</h2><p>以太坊，超级账本等区块链2.0平台支持<strong>智能合约</strong>，本质上就是提供一个可编程的区块链平台，底层的区块链存储，一致性机制等通用的东西给你搭好了，你可以在上面很方便的编写自己的应用。</p><p>可以理解为一种paas,编程框架和云平台的结合。</p><p>下面就Hyperledger-fabric的chaincode来做具体说明。</p><p>所谓编写chaincode,其实就是提供一些服务，这些服务会对KV进行操作，这里的隐含条件是:</p><ul><li>KV的变更其实就是transaction,会遵守consensus记录到公共账本上</li><li>对某个Key的操作，是否需要相应的权限，取决于你的实现</li><li>大家约定需要权限，那就需要权限，约定不需要，那就不需要；也可以某些需要，某些不需要</li><li>原则上比特币的coinbase,PubScript+SigScript解锁的操作方式都可以实现在chaincode中</li><li>所以，其实chaincode的framework其实只是提供了get,set的最基本的方法</li><li>部署chaincode和调用chaincode的权限也是可以大家商量的</li><li>这种非常灵活的方式，能做的东西非常多</li><li>但是整个权限的约定，chaincode的编写，部署都非常繁琐</li><li>并且现在hyperledger fabric并没有一个统一的管理这些东西的地方</li><li>不理解底层原理，搞起来还是相当麻烦</li></ul><h1 id="联系方式"><a href="#联系方式" class="headerlink" title="联系方式"></a>联系方式</h1><p>QQ群:300911873</p><p>目前正在迭代的项目:</p><p><a href="https://github.com/foolcage/mastering-fabric" target="_blank" rel="noopener">https://github.com/foolcage/mastering-fabric</a></p><p><a href="https://github.com/foolcage/fooltrader" target="_blank" rel="noopener">https://github.com/foolcage/fooltrader</a></p><p>欢迎关注 一起探讨</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://gitee.com/null_071_4607/mastering-blockchain&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;开源地址&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;这是区块链相关知识的一个梳理，旨在真正的get the skill并方便他人。&lt;/p&gt;
&lt;p&gt;知识可分为两类:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;逻辑体系型的&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;需要思考，把各种概念连起来，或归纳，或演绎，最后，在大脑中形成一种逻辑网状结构。比如可计算理论，分布式系统，解释器等。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;使用操作型的&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;基本不需要思考，只需要看一下目录，要用的时候参考一下手册即可。比如linux的各种命令，go,python的一些奇怪语法,elastic-search dsl的使用。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;第一类知识是比较有意思的，值得多花时间，这种”逻辑网状结构”最后会形成一个”打通”的集群，可能会让你的大脑产生一些有意思的想法；而第二类，千万别花太多时间，因为很有可能让你产生消极，厌学，忧郁等情绪，而你越努力，就越可能”斯德哥尔摩”。&lt;/p&gt;
&lt;p&gt;区块链知识可以归为第一类。&lt;/p&gt;
&lt;p&gt;研究一个东西，需要知道它包含哪些概念，我把它分为两类:&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
    
      <category term="区块链" scheme="https://www.wuxinvip.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>关于编码方式</title>
    <link href="https://www.wuxinvip.com/2018/07/03/essay/essay-11/"/>
    <id>https://www.wuxinvip.com/2018/07/03/essay/essay-11/</id>
    <published>2018-07-03T00:00:00.000Z</published>
    <updated>2018-10-15T08:31:42.743Z</updated>
    
    <content type="html"><![CDATA[<p>编码</p><pre><code>将人类语言解释为机器语言的一种关系映射</code></pre><p>常见编码方式</p><p>ASCII</p><pre><code>128个0-31控制字符、换行、删除、回车32-126打印字符</code></pre><p>ISO8859-1</p><pre><code>在ASCII上 加上了大多数修语言字符、256个字符 </code></pre><a id="more"></a><p>GB2312</p><pre><code>信息交换用汉字编码字符集基本集、双字节编码、A1-A9 符号区B0-F7 汉字区</code></pre><p>GBK</p><pre><code>汉字内码扩展规范对GB2312扩展编码范围 8140-FEFE 与GB2312兼容</code></pre><p>GB18030</p><pre><code>数字交换用汉字编码字符集单字节、双字节、四字节、与GB2312兼容</code></pre><p>UTF-16</p><pre><code>Unicode字符集的存取方法使用2字节标识Unicode转化格式、定长表示</code></pre><p>UTF-8<br>    边长字符集、1-6个字节<br>    涵盖了所有各国字符编码</p><p>UTF-8mb4</p><pre><code>在UTF8基础上 增加了表情字符</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;编码&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;将人类语言解释为机器语言的一种关系映射
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;常见编码方式&lt;/p&gt;
&lt;p&gt;ASCII&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;128个
0-31控制字符、换行、删除、回车
32-126打印字符
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ISO8859-1&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;在ASCII上 加上了大多数修语言字符、256个字符 
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="essay" scheme="https://www.wuxinvip.com/categories/java/essay/"/>
    
    
      <category term="随笔" scheme="https://www.wuxinvip.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>nginx-controller</title>
    <link href="https://www.wuxinvip.com/2018/07/03/load-balance/nginx-controller/"/>
    <id>https://www.wuxinvip.com/2018/07/03/load-balance/nginx-controller/</id>
    <published>2018-07-03T00:00:00.000Z</published>
    <updated>2018-10-15T08:31:42.707Z</updated>
    
    <content type="html"><![CDATA[<h2 id="好用软件推荐"><a href="#好用软件推荐" class="headerlink" title="好用软件推荐"></a>好用软件推荐</h2><h2 id="nginx-plus监控"><a href="#nginx-plus监控" class="headerlink" title="nginx-plus监控"></a>nginx-plus监控</h2><p><a href="https://www.nginx.com/products/nginx-controller/" target="_blank" rel="noopener">官方网站-nginx-controller</a></p><p><img src="/img/load-balance/img/nginx-controller-1.png" alt="图片">密码加密 图谱</p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul><li>NGINX Controller是所有NGINX Plus实例的集中管理平台。</li><li>使用Controller，您可以在多云环境中轻松管理多个NGINX Plus服务器。</li><li>使用直观的向导样式界面，您可以创建NGINX Plus的新实例，并集中配置负载平衡，URL路由和SSL终止等功能。</li><li>Controller具有丰富的监控和警报功能，有助于确保应用程序的可用性，性能和可靠性。</li><li>Controller基于最佳实践提供对200个关键指标和抢先推荐的深入可见性，<br>使ITOps和DevOps团队能够首先避免性能问题，并解决可能出现的任何问题。</li></ul><a id="more"></a><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p><strong>实时监控和警报</strong></p><p>获得关于应用程序性能的重要见解：</p><ul><li>关键指标的图表，例如每秒请求数，活动连接数，带宽使用情况</li><li>根据预定义的阈值提醒100多个指标，如CPU使用率，400/500错误和运行状况检查失败</li><li>使用REST API轻松集成您选择的任何监控工具</li></ul><p><strong>仪表板</strong></p><p>使用以下命令快速监控NGINX plus实例并对其进行故障排除：</p><ul><li>概述仪表板，用于汇总负载均衡器中的指标</li><li>应用程序健康评分，用于衡量成功请求和及时响应</li><li>可自定义的仪表板，用于监控特定于您的环境的指标</li></ul><p><strong>先发制人的建议</strong></p><p>使用内置配置分析器获取：</p><ul><li>基于成千上万客户的学习，增强了性能和安全性</li><li>通过遵循内置的最佳实践来获得更好的SLA。</li></ul><p>抢先和可行的建议：</p><ul><li>组态</li><li>安全</li><li>SSL状态</li></ul><p><strong>简化的配置管理</strong></p><p>导航一个简单直观的向导式用户界面，用于：</p><ul><li>NGINX Plus配置的指导工作流程</li><li>负载平衡器的按钮部署</li><li>流量路由到上游服务器</li><li>SSL密钥和证书管理</li></ul><p><strong>政策驱动的管理</strong></p><p>通过开发多个特定于环境的策略来加速应用程序部署。创建配置环境：</p><ul><li>分期</li><li>生产</li><li>具体业务范围</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;好用软件推荐&quot;&gt;&lt;a href=&quot;#好用软件推荐&quot; class=&quot;headerlink&quot; title=&quot;好用软件推荐&quot;&gt;&lt;/a&gt;好用软件推荐&lt;/h2&gt;&lt;h2 id=&quot;nginx-plus监控&quot;&gt;&lt;a href=&quot;#nginx-plus监控&quot; class=&quot;headerlink&quot; title=&quot;nginx-plus监控&quot;&gt;&lt;/a&gt;nginx-plus监控&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.nginx.com/products/nginx-controller/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;官方网站-nginx-controller&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/load-balance/img/nginx-controller-1.png&quot; alt=&quot;图片&quot;&gt;密码加密 图谱&lt;/p&gt;
&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;NGINX Controller是所有NGINX Plus实例的集中管理平台。&lt;/li&gt;
&lt;li&gt;使用Controller，您可以在多云环境中轻松管理多个NGINX Plus服务器。&lt;/li&gt;
&lt;li&gt;使用直观的向导样式界面，您可以创建NGINX Plus的新实例，并集中配置负载平衡，URL路由和SSL终止等功能。&lt;/li&gt;
&lt;li&gt;Controller具有丰富的监控和警报功能，有助于确保应用程序的可用性，性能和可靠性。&lt;/li&gt;
&lt;li&gt;Controller基于最佳实践提供对200个关键指标和抢先推荐的深入可见性，&lt;br&gt;使ITOps和DevOps团队能够首先避免性能问题，并解决可能出现的任何问题。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="load-balance" scheme="https://www.wuxinvip.com/categories/java/load-balance/"/>
    
    
      <category term="项目推荐" scheme="https://www.wuxinvip.com/tags/%E9%A1%B9%E7%9B%AE%E6%8E%A8%E8%8D%90/"/>
    
      <category term="负载均衡" scheme="https://www.wuxinvip.com/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    
  </entry>
  
  <entry>
    <title>nginx-plus</title>
    <link href="https://www.wuxinvip.com/2018/07/03/load-balance/nginx-plus/"/>
    <id>https://www.wuxinvip.com/2018/07/03/load-balance/nginx-plus/</id>
    <published>2018-07-03T00:00:00.000Z</published>
    <updated>2018-10-15T08:31:42.900Z</updated>
    
    <content type="html"><![CDATA[<h2 id="好用软件推荐"><a href="#好用软件推荐" class="headerlink" title="好用软件推荐"></a>好用软件推荐</h2><h2 id="简化部署、多云环境更容易发现服务的故障"><a href="#简化部署、多云环境更容易发现服务的故障" class="headerlink" title="简化部署、多云环境更容易发现服务的故障"></a>简化部署、多云环境更容易发现服务的故障</h2><h2 id="结合nginx-controller非常好用软件"><a href="#结合nginx-controller非常好用软件" class="headerlink" title="结合nginx-controller非常好用软件"></a>结合nginx-controller非常好用软件</h2><p><a href="https://www.nginx.com/products/nginx/" target="_blank" rel="noopener">官方网站-nginx-plus</a></p><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ul><li>NGINX Plus是一个基于开源NGINX构建的软件负载均衡器，Web服务器和内容缓存。</li><li>NGINX Plus在开源产品的基础上提供独家的生产就绪功能，包括会话持久性，通过API配置和主动健康检查。</li><li>使用NGINX Plus代替硬件负载均衡器，获得创新的自由，而不受基础设施的限制。</li></ul><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><a id="more"></a><p><strong>负载均衡器</strong></p><p>使用软件扩展传统的负载平衡：</p><ul><li>HTTP，TCP和UDP负载平衡</li><li>使用URI，cookie，args等进行第7层请求路由</li><li>基于cookie的会话持久性*</li><li>状态代码和响应正文的主动运行状况检查*</li><li>使用DNS *进行服务发现</li></ul><p><strong>内容缓存</strong></p><p>使用为世界上最大的CDN提供支持的相同缓存：</p><ul><li>缓存静态和动态内容</li><li>通过微处理提高动态内容性能</li><li>在后台重新验证时提供“陈旧”内容以提高性能</li><li>覆盖或设置Cache‑Control标题</li><li>使用缓存清除API轻松管理缓存*</li></ul><p><strong>网络服务器</strong></p><p>以无与伦比的速度和效率交付静态资产：</p><ul><li>同时处理数十万客户</li><li>使用比其他Web服务器少90％的内存</li><li>反向代理多个协议：HTTP，gRPC，Memcached，PHP-FPM，SCGI，uwsgi</li><li>流HTTP视频：FLV，HDS，HLS，MP4</li><li>支持HTTP / 2服务器推送的HTTP / 2网关</li></ul><p><strong>安全控制</strong></p><p>保护您的应用：</p><ul><li>请求/连接限制</li><li>双栈RSA / ECC SSL卸载</li><li>IP访问控制列表（ACL）</li><li>API和OpenID Connect单点登录（SSO）的JWT身份验证*</li><li>NGINX WAF动态模块*</li></ul><p><strong>动态模块</strong></p><p>动态插入其他功能：</p><ul><li>用于JavaScript配置的nginScript模块</li><li>GeoIP模块按IP地址定位用户（需要MaxMind GeoIP数据库）</li><li>用于编译自己的自定义模块的构建工具</li><li>单点登录模块：ForgeRock，IDF Connect和Ping Identity *</li><li>动态模块库*</li></ul><p><strong>监控</strong></p><p>诊断和调试复杂的应用程序体系结构：</p><ul><li>使用NGINX Amplify监控NGINX指标并验证配置</li><li>适用于AppDynamics，Datadog，Dynatrace和New Relic的插件</li><li>具有超过90个唯一指标的扩展状态*</li><li>内置实时图形仪表板*</li><li>用于与自定义监视工具集成的JSON和HTML输出*</li></ul><p><strong>高可用性（HA）</strong></p><p>可扩展且可靠的HA部署：</p><ul><li>主动 - 主动和主动 - 被动HA模式</li><li>群集中服务器之间的配置同步</li><li>使用内置脚本轻松安装</li><li>状态共享Sticky Learn会话持久性</li></ul><p><strong>Kubernetes Ingress控制器</strong></p><p>使用NGINX Plus创建Kubernetes应用程序：</p><ul><li>具有SSL / TLS终止的负载平衡</li><li>WebSocket和HTTP / 2支持</li><li>请求之前的URI重写被转发到应用程序</li><li>会话持久性*</li><li>JWT认证*</li></ul><p><strong>可编程</strong></p><p>动态部署自定义体系结构：</p><ul><li>用于脚本和高级配置的NGINX JavaScript模块</li><li>Lua脚本语言</li><li>Ansible，Chef和Puppet集成</li><li>用于管理上游服务器，键值存储和实时指标的API *</li><li>无需重新加载的动态重新配置*</li></ul><p><strong>流媒体</strong></p><p>Scalably提供流媒体：</p><ul><li>直播：RTMP，Apple HTTP直播（HLS），HTTP上的动态自适应流媒体（DASH）</li><li>视频点播：Flash（flv），MP4</li><li>自适应比特率VOD：HLS，Adobe HTTP动态流（HDS）*</li><li>MP4流媒体的带宽控制*</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;好用软件推荐&quot;&gt;&lt;a href=&quot;#好用软件推荐&quot; class=&quot;headerlink&quot; title=&quot;好用软件推荐&quot;&gt;&lt;/a&gt;好用软件推荐&lt;/h2&gt;&lt;h2 id=&quot;简化部署、多云环境更容易发现服务的故障&quot;&gt;&lt;a href=&quot;#简化部署、多云环境更容易发现服务的故障&quot; class=&quot;headerlink&quot; title=&quot;简化部署、多云环境更容易发现服务的故障&quot;&gt;&lt;/a&gt;简化部署、多云环境更容易发现服务的故障&lt;/h2&gt;&lt;h2 id=&quot;结合nginx-controller非常好用软件&quot;&gt;&lt;a href=&quot;#结合nginx-controller非常好用软件&quot; class=&quot;headerlink&quot; title=&quot;结合nginx-controller非常好用软件&quot;&gt;&lt;/a&gt;结合nginx-controller非常好用软件&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.nginx.com/products/nginx/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;官方网站-nginx-plus&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;NGINX Plus是一个基于开源NGINX构建的软件负载均衡器，Web服务器和内容缓存。&lt;/li&gt;
&lt;li&gt;NGINX Plus在开源产品的基础上提供独家的生产就绪功能，包括会话持久性，通过API配置和主动健康检查。&lt;/li&gt;
&lt;li&gt;使用NGINX Plus代替硬件负载均衡器，获得创新的自由，而不受基础设施的限制。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;功能&quot;&gt;&lt;a href=&quot;#功能&quot; class=&quot;headerlink&quot; title=&quot;功能&quot;&gt;&lt;/a&gt;功能&lt;/h2&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="load-balance" scheme="https://www.wuxinvip.com/categories/java/load-balance/"/>
    
    
      <category term="项目推荐" scheme="https://www.wuxinvip.com/tags/%E9%A1%B9%E7%9B%AE%E6%8E%A8%E8%8D%90/"/>
    
      <category term="负载均衡" scheme="https://www.wuxinvip.com/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"/>
    
  </entry>
  
  <entry>
    <title>谈谈区块链对互联网的冲击</title>
    <link href="https://www.wuxinvip.com/2018/07/02/block-chain/block-chain-0/"/>
    <id>https://www.wuxinvip.com/2018/07/02/block-chain/block-chain-0/</id>
    <published>2018-07-02T00:00:00.000Z</published>
    <updated>2018-10-15T05:54:53.978Z</updated>
    
    <content type="html"><![CDATA[<p>区块链 起源于比特币、不对、应该是说、区块链理论的第一应用是比特币</p><p>是日本一位大佬、看透了金融行业金融机构对货币的管理和控制能力、<br>金融机构可以任意发行货币、日本那次经济危机有关吧、</p><p>区块链涉及的新技术 有：</p><ul><li>去中心化、采取共识机制来获取最值得信任的交易链、</li><li>智能合约、不借助第三方签订协议、这种协议一旦生效不可修改、可追溯</li></ul><a id="more"></a><p>去中心化：</p><pre><code>现在互联网技术的交易基本上都是有第三方担保、比如淘宝的支付宝、以及货币发行机构各大银行这种新技术是怎么改变互联网世界的架构的呢？首先这种不适用第三方担保的协议、可以无视第三方支付平台的兴衰而动荡、</code></pre><p>然后结合去中心化和智能合约、有些人头一次接触这种思维方式、于是很多人的思考就诞生了一波思维风暴</p><p>银行去中心化、货币去中心化、法律去中心化、等等各个行业的去中心化、共识机制、其实我觉得蛮不现实的、<br>机器会共识、人可不一定、人心可以收买的、没有一个良好的信任体系、共识机制也只是一个泡沫而已</p><p>再说智能合约、法律智能合约、货币交易智能合约、物联网智能合约、也是各个方面各个行业都可以嵌入</p><p>智能合约可以用来在多方的情况下、动态的签署一份使用合约、随后由去中心化的货币再进行支付自动转账</p><ul><li>法律：甲乙丙三方 签订一个合约、到期后合约执行、货币支付或者行为交易、这份合约保存到信任链条中永久保存</li><li>物联网：家电、车、购物、都可以接入智能合约、进行一个行为合约、然后通知货币链支付</li></ul><p>看起来就一个完全自由化的社会</p><p><strong>关于共识机制的解决方案</strong></p><h3 id="公有链——对任何人开放，任何人都能参与"><a href="#公有链——对任何人开放，任何人都能参与" class="headerlink" title="公有链——对任何人开放，任何人都能参与"></a>公有链——对任何人开放，任何人都能参与</h3><pre><code>公有链通常也称为非许可链（Permissionless Blockchain），任何人都可以参与区块链数据维护和读取，容易部署应用程序，完全去中心化不受任何机构控制。公有链的应用非常广泛，例如资产证券化、数字资产的跨链流通 ……现在市场上的主流大势区块链项目比特币、以太坊、量子链、EOS、唯链以及Neo等都是公有链项目。公有链是真正意义上的完全去中心化的区块链，它通过密码学保证交易不可篡改，同时也利用密码学验证以及经济上的激励，在互为陌生的网络环境中建立共识，从而形成去中心化的信用机制。在公有链中的共识机制一般是工作量证明（PoW）和权益证明（PoS） 。公有链具有通过去中介化的方式打破当前中心化商业模式的潜力，而且本身无需维护服务器或管理系统，从根本上降低创建和运行去中心化应用程序（dApp）的成本。</code></pre><h3 id="联盟链——仅对联盟成员开放"><a href="#联盟链——仅对联盟成员开放" class="headerlink" title="联盟链——仅对联盟成员开放"></a>联盟链——仅对联盟成员开放</h3><pre><code>联盟链是一种需要注册许可的区块链，这种区块链也称为许可链（Permissioned Blockchain）。联盟链仅限于联盟成员参与，联盟规模可以大到国与国之间，也可以是不同的机构企业之间。区块链上的读写权限、参与记账权限按联盟规则来制定。整个网络由成员机构共同维护，网络接入一般通过成员机构的网关节点接入，共识过程由预先选好的节点控制。因此联盟链一般不采用工作量证明的挖矿机制，而是多采用权益证明（PoS）或PBFT（Practical Byzantine Fault Tolerant）、RAFT等共识算法。和公有链最高每秒完成交易3-20相比，联盟链可以达到1000-10000 ，交易速度更快且交易成本大幅降低。联盟链可以解决结算问题，降低两地结算的成本和时间，适合于机构间的交易、结算等B2B场景，因此金融行业应用最广泛。其中最知名的就是R3CVE组织，即R3联盟，有包括花旗银行、中国平安银行、纽约梅隆银行在内的50多家银行机构加入</code></pre><h3 id="私有链——仅行业内部透明，不对外开放"><a href="#私有链——仅行业内部透明，不对外开放" class="headerlink" title="私有链——仅行业内部透明，不对外开放"></a>私有链——仅行业内部透明，不对外开放</h3><pre><code>私有链，仅限于企业、国家机构或者单独个体使用，不完全能够解决信任问题，但是可以改善可审计性。常用于企业内部的数据库管理、审计等，政府的预算和执行，或者政府的行业统计数据等。他们彼此之间需要透明，但没必要对外公众透明。私有链的价值主要是提供安全、可追溯、不可篡改、自动执行的运算平台，可以同时防范来自内部和外部对数据的安全攻击，这个在传统的系统是很难做到的。任何人都可以创建私链的平台的Multichain项目本身就是一个私有链项目。</code></pre><p>另：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">不管区块链是不是泡沫。反正各大佬已经部署未来了、阿里、腾讯、百度、京东也在看形势、</span><br><span class="line"></span><br><span class="line">还有众多小企业在瞄准区块链猛打擦边球、毕竟这是一个机会也是一个机遇、不走未必能活、走了就可能一夜发达、</span><br><span class="line"></span><br><span class="line">互联网时代、数据时代、人工智能时代、区块链时代、</span><br><span class="line"></span><br><span class="line">小视频时代、老博客时代、共享社会、</span><br><span class="line"></span><br><span class="line">这个世界、名词化社会、动不动就我们重新定义了XXX、、、、、这样拉融资也算个噱头、、</span><br><span class="line"></span><br><span class="line">不过也可以看出机遇、机会是真的多、看准未来【未来在变、我们也要变】、and 、坚持以获成功</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;区块链 起源于比特币、不对、应该是说、区块链理论的第一应用是比特币&lt;/p&gt;
&lt;p&gt;是日本一位大佬、看透了金融行业金融机构对货币的管理和控制能力、&lt;br&gt;金融机构可以任意发行货币、日本那次经济危机有关吧、&lt;/p&gt;
&lt;p&gt;区块链涉及的新技术 有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;去中心化、采取共识机制来获取最值得信任的交易链、&lt;/li&gt;
&lt;li&gt;智能合约、不借助第三方签订协议、这种协议一旦生效不可修改、可追溯&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="block-chain" scheme="https://www.wuxinvip.com/categories/block-chain/"/>
    
    
      <category term="区块链" scheme="https://www.wuxinvip.com/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/"/>
    
  </entry>
  
  <entry>
    <title>慢哈希加密</title>
    <link href="https://www.wuxinvip.com/2018/07/02/encryption/password-java-pbkdf2/"/>
    <id>https://www.wuxinvip.com/2018/07/02/encryption/password-java-pbkdf2/</id>
    <published>2018-07-02T00:00:00.000Z</published>
    <updated>2018-10-15T08:26:26.828Z</updated>
    
    <content type="html"><![CDATA[<p>PBKDF2算法【三种】介绍：</p><p><a href="https://en.wikipedia.org/wiki/PBKDF2" target="_blank" rel="noopener">wiki</a></p><p><a href="http://blog.jobbole.com/61872/#java" target="_blank" rel="noopener">加盐密码哈希：如何正确使用</a></p><p><a href="http://blog.csdn.net/u014375869/article/details/46773995" target="_blank" rel="noopener">PBKDF2加密的实现</a></p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line">//PBKDF2</span><br><span class="line">import javax.crypto.SecretKeyFactory;</span><br><span class="line">import javax.crypto.spec.PBEKeySpec;</span><br><span class="line">import java.math.BigInteger;</span><br><span class="line">import java.security.NoSuchAlgorithmException;</span><br><span class="line">import java.security.SecureRandom;</span><br><span class="line">import java.security.spec.InvalidKeySpecException;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by huoyan403 on 3/21/2017.</span><br><span class="line"> */</span><br><span class="line">public class PasswordEncryption &#123;</span><br><span class="line"></span><br><span class="line">    public static final String PBKDF2_ALGORITHM = &quot;PBKDF2WithHmacSHA1&quot;;</span><br><span class="line"></span><br><span class="line">    // The following constants may be changed without breaking existing hashes.</span><br><span class="line">    /**</span><br><span class="line">     * 盐的长度---不宜过短</span><br><span class="line">     */</span><br><span class="line">    public static final int SALT_BYTE_SIZE = 48 / 2;</span><br><span class="line">    /**</span><br><span class="line">     * 生成密文的长度</span><br><span class="line">     */</span><br><span class="line">    public static final int HASH_BYTE_SIZE = 32 / 2;</span><br><span class="line">    /**</span><br><span class="line">     * 迭代次数</span><br><span class="line">     */</span><br><span class="line">    public static final int PBKDF2_ITERATIONS = 1000;</span><br><span class="line"></span><br><span class="line">    public static final int ITERATION_INDEX = 0;</span><br><span class="line">    public static final int SALT_INDEX = 1;</span><br><span class="line">    public static final int PBKDF2_INDEX = 2;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a salted PBKDF2 hash of the password.</span><br><span class="line">     *  加密password</span><br><span class="line">     * @param   password    the password to hash</span><br><span class="line">     * @return              a salted PBKDF2 hash of the password</span><br><span class="line">     */</span><br><span class="line">    public static String createHash(String password)</span><br><span class="line">            throws NoSuchAlgorithmException, InvalidKeySpecException</span><br><span class="line">    &#123;</span><br><span class="line">        return createHash(password.toCharArray());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Returns a salted PBKDF2 hash of the password.</span><br><span class="line">     *</span><br><span class="line">     * @param   password    the password to hash</span><br><span class="line">     * @return              a salted PBKDF2 hash of the password</span><br><span class="line">     */</span><br><span class="line">    public static String createHash(char[] password)</span><br><span class="line">            throws NoSuchAlgorithmException, InvalidKeySpecException</span><br><span class="line">    &#123;</span><br><span class="line">        // Generate a random salt</span><br><span class="line">        SecureRandom random = new SecureRandom();</span><br><span class="line">        byte[] salt = new byte[SALT_BYTE_SIZE];</span><br><span class="line">        random.nextBytes(salt);</span><br><span class="line"></span><br><span class="line">        // Hash the password</span><br><span class="line">        byte[] hash = pbkdf2(password, salt, PBKDF2_ITERATIONS, HASH_BYTE_SIZE);</span><br><span class="line">        // format iterations:salt:hash</span><br><span class="line">        return PBKDF2_ITERATIONS + &quot;:&quot; + toHex(salt) + &quot;:&quot; +  toHex(hash);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Validates a password using a hash.</span><br><span class="line">     *  验证密码是否正确 需传password和 加密后的序列值</span><br><span class="line">     * @param   password        the password to check</span><br><span class="line">     * @param   correctHash     the hash of the valid password</span><br><span class="line">     * @return                  true if the password is correct, false if not</span><br><span class="line">     */</span><br><span class="line">    public static boolean validatePassword(String password, String correctHash)</span><br><span class="line">            throws NoSuchAlgorithmException, InvalidKeySpecException</span><br><span class="line">    &#123;</span><br><span class="line">        return validatePassword(password.toCharArray(), correctHash);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Validates a password using a hash.</span><br><span class="line">     *</span><br><span class="line">     * @param   password        the password to check</span><br><span class="line">     * @param   correctHash     the hash of the valid password</span><br><span class="line">     * @return                  true if the password is correct, false if not</span><br><span class="line">     */</span><br><span class="line">    public static boolean validatePassword(char[] password, String correctHash)</span><br><span class="line">            throws NoSuchAlgorithmException, InvalidKeySpecException</span><br><span class="line">    &#123;</span><br><span class="line">        // Decode the hash into its parameters</span><br><span class="line">        String[] params = correctHash.split(&quot;:&quot;);</span><br><span class="line">        int iterations = Integer.parseInt(params[ITERATION_INDEX]);</span><br><span class="line">        byte[] salt = fromHex(params[SALT_INDEX]);</span><br><span class="line">        byte[] hash = fromHex(params[PBKDF2_INDEX]);</span><br><span class="line">        // Compute the hash of the provided password, using the same salt,</span><br><span class="line">        // iteration count, and hash length</span><br><span class="line">        byte[] testHash = pbkdf2(password, salt, iterations, hash.length);</span><br><span class="line">        // Compare the hashes in constant time. The password is correct if</span><br><span class="line">        // both hashes match.</span><br><span class="line">        return slowEquals(hash, testHash);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Compares two byte arrays in length-constant time. This comparison method</span><br><span class="line">     * is used so that password hashes cannot be extracted from an on-line</span><br><span class="line">     * system using a timing attack and then attacked off-line.</span><br><span class="line">     *</span><br><span class="line">     * @param   a       the first byte array</span><br><span class="line">     * @param   b       the second byte array</span><br><span class="line">     * @return          true if both byte arrays are the same, false if not</span><br><span class="line">     */</span><br><span class="line">    private static boolean slowEquals(byte[] a, byte[] b)</span><br><span class="line">    &#123;</span><br><span class="line">        int diff = a.length ^ b.length;</span><br><span class="line">        for(int i = 0; i &lt; a.length &amp;&amp; i &lt; b.length; i++)</span><br><span class="line">            diff |= a[i] ^ b[i];</span><br><span class="line">        return diff == 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     *  Computes the PBKDF2 hash of a password.</span><br><span class="line">     *</span><br><span class="line">     * @param   password    the password to hash.</span><br><span class="line">     * @param   salt        the salt</span><br><span class="line">     * @param   iterations  the iteration count (slowness factor)</span><br><span class="line">     * @param   bytes       the length of the hash to compute in bytes</span><br><span class="line">     * @return              the PBDKF2 hash of the password</span><br><span class="line">     */</span><br><span class="line">    private static byte[] pbkdf2(char[] password, byte[] salt, int iterations, int bytes)</span><br><span class="line">            throws NoSuchAlgorithmException, InvalidKeySpecException</span><br><span class="line">    &#123;</span><br><span class="line">        PBEKeySpec spec = new PBEKeySpec(password, salt, iterations, bytes * 8);</span><br><span class="line">        SecretKeyFactory skf = SecretKeyFactory.getInstance(PBKDF2_ALGORITHM);</span><br><span class="line">        return skf.generateSecret(spec).getEncoded();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Converts a string of hexadecimal characters into a byte array.</span><br><span class="line">     *</span><br><span class="line">     * @param   hex         the hex string</span><br><span class="line">     * @return              the hex string decoded into a byte array</span><br><span class="line">     */</span><br><span class="line">    private static byte[] fromHex(String hex)</span><br><span class="line">    &#123;</span><br><span class="line">        byte[] binary = new byte[hex.length() / 2];</span><br><span class="line">        for(int i = 0; i &lt; binary.length; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            binary[i] = (byte)Integer.parseInt(hex.substring(2*i, 2*i+2), 16);</span><br><span class="line">        &#125;</span><br><span class="line">        return binary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Converts a byte array into a hexadecimal string.</span><br><span class="line">     *</span><br><span class="line">     * @param   array       the byte array to convert</span><br><span class="line">     * @return              a length*2 character string encoding the byte array</span><br><span class="line">     */</span><br><span class="line">    private static String toHex(byte[] array)</span><br><span class="line">    &#123;</span><br><span class="line">        BigInteger bi = new BigInteger(1, array);</span><br><span class="line">        String hex = bi.toString(16);</span><br><span class="line">        int paddingLength = (array.length * 2) - hex.length();</span><br><span class="line">        if(paddingLength &gt; 0)</span><br><span class="line">            return String.format(&quot;%0&quot; + paddingLength + &quot;d&quot;, 0) + hex;</span><br><span class="line">        else</span><br><span class="line">            return hex;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"> //test类</span><br><span class="line">import com.meirengu.common.PasswordEncryption;</span><br><span class="line"></span><br><span class="line">import static com.meirengu.common.PasswordEncryption.createHash;</span><br><span class="line">import static com.meirengu.common.PasswordEncryption.validatePassword;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by huoyan403 on 3/21/2017.</span><br><span class="line"> */</span><br><span class="line">public class PasswordEncryptionTest &#123;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * Tests the basic functionality of the PasswordHash class</span><br><span class="line">     *</span><br><span class="line">     * @param   args        ignored</span><br><span class="line">     */</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">            // Print out 10 hashes</span><br><span class="line">            for(int i = 0; i &lt; 10; i++)</span><br><span class="line">                System.out.println(createHash(&quot;p\r\nassw0Rd!&quot;));</span><br><span class="line"></span><br><span class="line">            // Test password validation</span><br><span class="line">            boolean failure = false;</span><br><span class="line">            System.out.println(&quot;Running tests...&quot;);</span><br><span class="line">            for(int i = 0; i &lt; 100; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                String password = &quot;&quot;+i;</span><br><span class="line">                String hash = createHash(password);</span><br><span class="line">                String secondHash = createHash(password);</span><br><span class="line">                if(hash.equals(secondHash)) &#123;</span><br><span class="line">                    System.out.println(&quot;FAILURE: TWO HASHES ARE EQUAL!&quot;);</span><br><span class="line">                    failure = true;</span><br><span class="line">                &#125;</span><br><span class="line">                String wrongPassword = &quot;&quot;+(i+1);</span><br><span class="line">                if(PasswordEncryption.validatePassword(wrongPassword,password)) &#123;</span><br><span class="line">                    System.out.println(&quot;FAILURE: WRONG PASSWORD ACCEPTED!&quot;);</span><br><span class="line">                    failure = true;</span><br><span class="line">                &#125;</span><br><span class="line">                if(!PasswordEncryption.validatePassword(password, hash)) &#123;</span><br><span class="line">                    System.out.println(&quot;FAILURE: GOOD PASSWORD NOT ACCEPTED!&quot;);</span><br><span class="line">                    failure = true;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(failure)</span><br><span class="line">                System.out.println(&quot;TESTS FAILED!&quot;);</span><br><span class="line">            else</span><br><span class="line">                System.out.println(&quot;TESTS PASSED!&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            System.err.print(validatePassword(&quot;&quot;,&quot;1000:29bcf0ef3b1f33698b2254415caf7c81957770883a8b65b7:d9cb6f281a95c4a44415b5e5e37fb607&quot;));</span><br><span class="line">            System.err.print(createHash(&quot;123456&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">        catch(Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            System.out.println(&quot;ERROR: &quot; + ex);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">123456----加密后--&gt;1000:29bcf0ef3b1f33698b2254415caf7c81957770883a8b65b7:d9cb6f281a95c4a44415b5e5e37fb60</span><br><span class="line">不可逆 验证只能使用validataPassword(&quot;原密码&quot;，&quot;加密后密码&quot;)</span><br><span class="line"></span><br><span class="line">遵从原则：密码不通过where 1=1 and password = #&#123;password&#125;</span><br><span class="line"></span><br><span class="line">保证代码验证过程中没有任何地方使用原密码原文查询、比对</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;PBKDF2算法【三种】介绍：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/PBKDF2&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;wiki&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.jobbole.com/61872/#java&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;加盐密码哈希：如何正确使用&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/u014375869/article/details/46773995&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;PBKDF2加密的实现&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="java" scheme="https://www.wuxinvip.com/categories/java/"/>
    
      <category term="password" scheme="https://www.wuxinvip.com/categories/java/password/"/>
    
    
      <category term="密码加密" scheme="https://www.wuxinvip.com/tags/%E5%AF%86%E7%A0%81%E5%8A%A0%E5%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>基于Strom的日志实时流量分析主动防御(CCFirewall)系统</title>
    <link href="https://www.wuxinvip.com/2018/07/01/github/cc-iptable/"/>
    <id>https://www.wuxinvip.com/2018/07/01/github/cc-iptable/</id>
    <published>2018-07-01T00:00:00.000Z</published>
    <updated>2018-10-15T05:57:31.409Z</updated>
    
    <content type="html"><![CDATA[<h2 id="CC防火墙-github-地址"><a href="#CC防火墙-github-地址" class="headerlink" title="CC防火墙 github 地址"></a><a href="https://github.com/gy-games/shield" target="_blank" rel="noopener">CC防火墙 github 地址</a></h2><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>CC防火墙的架构采用Flume+Kafka+Strom+Zookeeper+Mysql实现,实现异常IP的及时封停功能</p><p><img src="/blog/github/img/cc/Struct.jpg" alt=""></p><h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><ul><li><strong>Flume</strong>      :部署在所有的Nginx服务器上，将Nginx日志推送至Kafka中，</li><li><strong>Kafka</strong>      : 临时存储Nginx的log数据</li><li><strong>Strom</strong>     ：从Kafka取数据并进行数据分析</li><li><strong>Zookeeper</strong> ：存储CC防火墙的配置文件，并且所有部署在Squid上的客户端也注册在这个Zookeeper上。</li><li><strong>Agent</strong>     ：部署在每台Squid上，并且信息注册到Zookeeper的临时节点上，接收到封停指令后通过iptables封锁IP。</li></ul><a id="more"></a><h2 id="Strom拓扑"><a href="#Strom拓扑" class="headerlink" title="Strom拓扑"></a>Strom拓扑</h2><p><img src="/blog/github/img/cc/Strom.jpg" alt=""></p><ul><li><strong>KafkaSpOut</strong>：进行Kafka数据的读取，这里为了方便与简单，并且保证顺序性Kafka内只是用一个Partion。</li><li><strong>LogFormatBolt</strong> : 收到KafkaSpout读取出的Nginx日志后进行格式化处理，并在此使用纯真库进行IP GEO匹配</li><li><strong>IpAnalysis</strong> ： 几乎所有的逻辑都在这里实现，如IP的计数器，报警的匹配等等，为了可以动态调整防火墙的配置，配置文件保存在Zookeeper中，也是在这里Watch Zookeeper的节点，达到动态改变配置的。</li><li><strong>BlockBolt</strong> ： 接收到IpAnalysis 发送的信息后，将异常的信息通过Thrift发送给各个Squid机器。</li><li><strong>UnBlockBolt</strong> ： 接收到BlockBolt成功封锁后的IP后经过一段时间进行解封。</li><li><strong>BlockReportBlot</strong> ： 做数据统计用的，对整体的作用不大</li><li><strong>xStoreBolt</strong> ： 数据库存储Bolt，拓扑上的IPStoreBolt，BlockStoreBolt，BlockReportStoreBolt 都是使用的这一个Bolt。</li></ul><h2 id="Thrit封存解封接口"><a href="#Thrit封存解封接口" class="headerlink" title="Thrit封存解封接口"></a>Thrit封存解封接口</h2><pre><code>service CCfirewall{    string  blockipbyiptables(1:string mkey,2: string ip)    string  unblockipbyiptables(1:string mkey,2: string ip)}</code></pre><h2 id="Zookeeper目录"><a href="#Zookeeper目录" class="headerlink" title="Zookeeper目录"></a>Zookeeper目录</h2><p><strong>目录树</strong></p><pre><code>.└─ccfirewall   ├─config                           //存储防火墙配置信息   └─agent_list                       //存储Agent列表           └─iptables                               //使用iptables封锁的站点            ├─10.0.0.1            ├─10.0.0.1            ├─...</code></pre><p><strong>config配置</strong></p><pre><code>{    &quot;count&quot;: &quot;50&quot;,                            //IP计数个数    &quot;if_block&quot;: &quot;true&quot;,                        //是否开启封停    &quot;if_warning&quot;: &quot;false&quot;,                    //是否开启警告    &quot;threshold_w_secound&quot;: &quot;10&quot;,            //警告阈值秒数    &quot;threshold_secound&quot;: &quot;20&quot;,                //封停阈值秒数    &quot;block_second&quot;: &quot;864000&quot;,                //封停秒数    &quot;ip_white_list&quot;: [                        //IP白名单        &quot;127.0.0.1&quot;,        &quot;211.103.231.10&quot;    ],    &quot;url_list&quot;: [{                            //URL黑名单        &quot;url&quot;: &quot;all&quot;,                        //全部        &quot;type&quot;: &quot;normal&quot;                    //normal (精确) 或 after (向后模糊)    }],    &quot;special_rule&quot;: {                        //特殊规则        &quot;reg.gyyx.cn/Login/Async&quot;: {        //URL            &quot;threshold_w_secound&quot;: &quot;100&quot;,    //警告阈值秒数            &quot;threshold_secound&quot;: &quot;300&quot;,        //封停阈值秒数            &quot;block_second&quot;: &quot;86400&quot;            //封停秒数        }    }}</code></pre><h2 id="数据库模型"><a href="#数据库模型" class="headerlink" title="数据库模型"></a>数据库模型</h2><p><img src="/blog/github/img/cc/pdm.jpg" alt=""></p><h2 id="Agent"><a href="#Agent" class="headerlink" title="Agent"></a>Agent</h2><p><strong>启动Agent</strong> </p><pre><code>python CCFirewall.py 本机IP</code></pre><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><p>左上方可以设置防火前的配置，保存后实时生效，中上方可以查看当前已经上线的客户端，点击详情可以看到此客户端已经封停的IP格式，右上方可以看到曲线，地图，已经两个计数器信息</p><p>左下方显示最新的达到计数器的条目，右下方可以看到异常IP在客户端的封锁状况。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;CC防火墙-github-地址&quot;&gt;&lt;a href=&quot;#CC防火墙-github-地址&quot; class=&quot;headerlink&quot; title=&quot;CC防火墙 github 地址&quot;&gt;&lt;/a&gt;&lt;a href=&quot;https://github.com/gy-games/shield&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CC防火墙 github 地址&lt;/a&gt;&lt;/h2&gt;&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;CC防火墙的架构采用Flume+Kafka+Strom+Zookeeper+Mysql实现,实现异常IP的及时封停功能&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/blog/github/img/cc/Struct.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;组件&quot;&gt;&lt;a href=&quot;#组件&quot; class=&quot;headerlink&quot; title=&quot;组件&quot;&gt;&lt;/a&gt;组件&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Flume&lt;/strong&gt;      :部署在所有的Nginx服务器上，将Nginx日志推送至Kafka中，&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kafka&lt;/strong&gt;      : 临时存储Nginx的log数据&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Strom&lt;/strong&gt;     ：从Kafka取数据并进行数据分析&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Zookeeper&lt;/strong&gt; ：存储CC防火墙的配置文件，并且所有部署在Squid上的客户端也注册在这个Zookeeper上。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Agent&lt;/strong&gt;     ：部署在每台Squid上，并且信息注册到Zookeeper的临时节点上，接收到封停指令后通过iptables封锁IP。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="github" scheme="https://www.wuxinvip.com/categories/github/"/>
    
    
      <category term="项目推荐" scheme="https://www.wuxinvip.com/tags/%E9%A1%B9%E7%9B%AE%E6%8E%A8%E8%8D%90/"/>
    
      <category term="防火墙" scheme="https://www.wuxinvip.com/tags/%E9%98%B2%E7%81%AB%E5%A2%99/"/>
    
  </entry>
  
  <entry>
    <title>Tengine</title>
    <link href="https://www.wuxinvip.com/2018/07/01/github/tengine/"/>
    <id>https://www.wuxinvip.com/2018/07/01/github/tengine/</id>
    <published>2018-07-01T00:00:00.000Z</published>
    <updated>2018-10-15T05:57:31.416Z</updated>
    
    <content type="html"><![CDATA[<h3 id="基于nginx更强大的web服务器负载均衡器"><a href="#基于nginx更强大的web服务器负载均衡器" class="headerlink" title="基于nginx更强大的web服务器负载均衡器"></a>基于nginx更强大的web服务器负载均衡器</h3><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Tengine是由淘宝网发起的Web服务器项目。它在Nginx的基础上，针对大访问量网站的需求，添加了很多高级功能和特性。<br>Tengine的性能和稳定性已经在大型的网站如淘宝网，天猫商城等得到了很好的检验。<br>它的最终目标是打造一个高效、稳定、安全、易用的Web平台。</p><p>从2011年12月开始，Tengine成为一个开源项目，Tengine团队在积极地开发和维护着它。<br>Tengine团队的核心成员来自于淘宝、搜狗等互联网企业。<br>Tengine是社区合作的成果，我们欢迎大家参与其中，贡献自己的力量。</p><a id="more"></a><h2 id="Tengine文档"><a href="#Tengine文档" class="headerlink" title="Tengine文档"></a>Tengine文档</h2><p><a href="http://tengine.taobao.org" target="_blank" rel="noopener">http://tengine.taobao.org</a></p><p><a href="https://github.com/alibaba/tengine" target="_blank" rel="noopener">https://github.com/alibaba/tengine</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;基于nginx更强大的web服务器负载均衡器&quot;&gt;&lt;a href=&quot;#基于nginx更强大的web服务器负载均衡器&quot; class=&quot;headerlink&quot; title=&quot;基于nginx更强大的web服务器负载均衡器&quot;&gt;&lt;/a&gt;基于nginx更强大的web服务器负载均衡器&lt;/h3&gt;&lt;h2 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h2&gt;&lt;p&gt;Tengine是由淘宝网发起的Web服务器项目。它在Nginx的基础上，针对大访问量网站的需求，添加了很多高级功能和特性。&lt;br&gt;Tengine的性能和稳定性已经在大型的网站如淘宝网，天猫商城等得到了很好的检验。&lt;br&gt;它的最终目标是打造一个高效、稳定、安全、易用的Web平台。&lt;/p&gt;
&lt;p&gt;从2011年12月开始，Tengine成为一个开源项目，Tengine团队在积极地开发和维护着它。&lt;br&gt;Tengine团队的核心成员来自于淘宝、搜狗等互联网企业。&lt;br&gt;Tengine是社区合作的成果，我们欢迎大家参与其中，贡献自己的力量。&lt;/p&gt;
    
    </summary>
    
      <category term="github" scheme="https://www.wuxinvip.com/categories/github/"/>
    
    
      <category term="项目推荐" scheme="https://www.wuxinvip.com/tags/%E9%A1%B9%E7%9B%AE%E6%8E%A8%E8%8D%90/"/>
    
  </entry>
  
</feed>
